(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2887:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(4148),s(3733),s(996);var i=s(170),a=s(5002),r=s(3876),l=s.n(r),n=s(6299),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4148)),"/Users/akirayouky/Desktop/Siti/Condomini/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,3733)),"/Users/akirayouky/Desktop/Siti/Condomini/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,996,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/akirayouky/Desktop/Siti/Condomini/src/app/page.tsx"],m="/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1663:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3642,23)),Promise.resolve().then(s.t.bind(s,7586,23)),Promise.resolve().then(s.t.bind(s,7838,23)),Promise.resolve().then(s.t.bind(s,8057,23)),Promise.resolve().then(s.t.bind(s,7741,23)),Promise.resolve().then(s.t.bind(s,3118,23))},5753:()=>{},8536:(e,t,s)=>{Promise.resolve().then(s.bind(s,4209))},4209:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var i=s(7247),a=s(8964);let r="/api";class l{static async getAll(){try{let e=await fetch(`${r}/condomini`);return await e.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async getById(e){try{let t=await fetch(`${r}/condomini/${e}`);return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async create(e){try{let t=await fetch(`${r}/condomini`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async update(e,t){try{let s=await fetch(`${r}/condomini/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await s.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async delete(e){try{let t=await fetch(`${r}/condomini/${e}`,{method:"DELETE"});return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static validateCondominio(e){let t=[];return e.nome&&""!==e.nome.trim()||t.push("Il nome del condominio \xe8 obbligatorio"),e.nome&&e.nome.length<2&&t.push("Il nome deve essere di almeno 2 caratteri"),e.nome&&e.nome.length>100&&t.push("Il nome non pu\xf2 superare i 100 caratteri"),t}}function n(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[r,n]=(0,a.useState)(null);return{condomini:e,loading:s,error:r,loadCondomini:async()=>{i(!0),n(null);let e=await l.getAll();e.success&&e.data?t(e.data):n(e.error||"Errore nel caricamento dei condomini"),i(!1)},createCondominio:async e=>{let s=l.validateCondominio(e);if(s.length>0)return n(s.join(", ")),!1;let i=await l.create(e);return i.success&&i.data?(t(e=>[...e,i.data]),n(null),!0):(n(i.error||"Errore nella creazione del condominio"),!1)},updateCondominio:async(e,s)=>{let i=l.validateCondominio(s);if(i.length>0)return n(i.join(", ")),!1;let a=await l.update(e,s);return a.success&&a.data?(t(t=>t.map(t=>t.id===e?a.data:t)),n(null),!0):(n(a.error||"Errore nell'aggiornamento del condominio"),!1)},deleteCondominio:async e=>{let s=await l.delete(e);return s.success?(t(t=>t.filter(t=>t.id!==e)),n(null),!0):(n(s.error||"Errore nell'eliminazione del condominio"),!1)},getCondominio:t=>e.find(e=>e.id===t||e.token===t),clearError:()=>n(null)}}function o({onSubmit:e,onCancel:t,loading:s=!1,initialData:r,isEdit:l=!1}){let[n,o]=(0,a.useState)({nome:r?.nome||""}),[d,c]=(0,a.useState)([]),m=async t=>{t.preventDefault(),c([]);let s=[];if(n.nome.trim()?n.nome.length<2?s.push("Il nome deve essere di almeno 2 caratteri"):n.nome.length>100&&s.push("Il nome non pu\xf2 superare i 100 caratteri"):s.push("Il nome del condominio \xe8 obbligatorio"),s.length>0){c(s);return}await e(n)&&!l&&o({nome:""})};return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:l?"Modifica Condominio":"Nuovo Condominio"}),t&&i.jsx("button",{type:"button",onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]}),d.length>0&&i.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:i.jsx("div",{className:"text-red-600 text-sm",children:d.map((e,t)=>(0,i.jsxs)("div",{children:["• ",e]},t))})}),(0,i.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Condominio *"}),i.jsx("input",{type:"text",id:"nome",name:"nome",value:n.nome,onChange:e=>{let{name:t,value:s}=e.target;o(e=>({...e,[t]:s})),d.length>0&&c([])},placeholder:"Es: Condominio Via Roma 123",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:s,maxLength:100}),(0,i.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[n.nome.length,"/100 caratteri"]})]}),(0,i.jsxs)("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",disabled:s||!n.nome.trim(),className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:s?(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),l?"Aggiornamento...":"Creazione..."]}):l?"Aggiorna Condominio":"Crea Condominio"}),t&&i.jsx("button",{type:"button",onClick:t,disabled:s,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Annulla"})]})]})]})}function d({condomini:e,loading:t=!1,onEdit:s,onDelete:r,onView:l}){let[n,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),m=async e=>{o(e);let t=await r(e);o(null),t&&c(null)},x=e=>new Date(e).toLocaleString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),u=async e=>{try{await navigator.clipboard.writeText(e)}catch(e){console.error("Errore nel copiare il token:",e)}};return t?i.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"Caricamento condomini..."})]})}):0===e.length?i.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83C\uDFE2"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun condominio trovato"}),i.jsx("p",{className:"text-gray-500",children:"Inizia creando il tuo primo condominio"})]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Condomini (",e.length,")"]})}),i.jsx("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome Condominio"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Token"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Creazione"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ultima Modifica"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Azioni"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-blue-600 font-medium text-sm",children:e.nome.charAt(0).toUpperCase()})}),(0,i.jsxs)("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.nome}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded font-mono",children:e.token}),i.jsx("button",{onClick:()=>u(e.token),className:"ml-2 text-gray-400 hover:text-gray-600 transition-colors",title:"Copia token",children:"\uD83D\uDCCB"})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x(e.data_inserimento)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x(e.data_ultima_modifica)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,i.jsxs)("div",{className:"flex justify-end gap-2",children:[l&&i.jsx("button",{onClick:()=>l(e),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Visualizza dettagli",children:"\uD83D\uDC41️"}),i.jsx("button",{onClick:()=>s(e),className:"text-indigo-600 hover:text-indigo-900 transition-colors",title:"Modifica",children:"✏️"}),i.jsx("button",{onClick:()=>c(e.id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Elimina",children:"\uD83D\uDDD1️"})]})})]},e.id))})]})})]}),d&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Conferma eliminazione"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Sei sicuro di voler eliminare questo condominio? Questa azione non pu\xf2 essere annullata."}),(0,i.jsxs)("div",{className:"flex gap-3 justify-end",children:[i.jsx("button",{onClick:()=>c(null),disabled:n===d,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Annulla"}),i.jsx("button",{onClick:()=>m(d),disabled:n===d,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors disabled:bg-red-300 disabled:cursor-not-allowed",children:n===d?(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Eliminazione..."]}):"Elimina"})]})]})})]})}function c(){let{condomini:e,loading:t,error:s,createCondominio:r,updateCondominio:l,deleteCondominio:c,clearError:m}=n(),[x,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[p,b]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),N=async e=>{b(!0);let t=await r(e);return b(!1),t&&(u(!1),v("Condominio creato con successo!")),t},y=async e=>{if(!h)return!1;b(!0);let t=await l(h.id,e);return b(!1),t&&(g(null),v("Condominio aggiornato con successo!")),t},f=async e=>{let t=await c(e);return t&&v("Condominio eliminato con successo!"),t},w={totale:e.length,recenti:e.filter(e=>{let t=new Date(e.data_inserimento),s=new Date;return s.setDate(s.getDate()-7),t>=s}).length};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Gestione Condomini"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Gestisci l'anagrafica dei condomini e i relativi token di accesso"})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 px-4 py-3 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:w.totale}),i.jsx("div",{className:"text-sm text-blue-800",children:"Totale"})]}),(0,i.jsxs)("div",{className:"bg-green-50 px-4 py-3 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:w.recenti}),i.jsx("div",{className:"text-sm text-green-800",children:"Ultimi 7gg"})]})]})]}),s&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-red-400 mr-3",children:"❌"}),(0,i.jsxs)("div",{children:[i.jsx("h4",{className:"text-red-800 font-medium",children:"Errore"}),i.jsx("p",{className:"text-red-700 text-sm mt-1",children:s})]}),i.jsx("button",{onClick:m,className:"ml-auto text-red-400 hover:text-red-600",children:"✕"})]})}),j&&i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-green-400 mr-3",children:"✅"}),(0,i.jsxs)("div",{children:[i.jsx("h4",{className:"text-green-800 font-medium",children:"Successo"}),i.jsx("p",{className:"text-green-700 text-sm mt-1",children:j})]}),i.jsx("button",{onClick:()=>v(null),className:"ml-auto text-green-400 hover:text-green-600",children:"✕"})]})}),i.jsx("div",{className:"flex justify-between items-center",children:(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsxs)("button",{onClick:()=>{u(!0),g(null)},className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[i.jsx("span",{children:"➕"}),"Nuovo Condominio"]}),(0,i.jsxs)("button",{onClick:()=>window.location.reload(),className:"bg-gray-100 text-gray-600 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[i.jsx("span",{children:"\uD83D\uDD04"}),"Ricarica"]})]})}),x&&i.jsx(o,{onSubmit:N,onCancel:()=>u(!1),loading:p}),h&&i.jsx(o,{onSubmit:y,onCancel:()=>{g(null)},loading:p,initialData:{nome:h.nome},isEdit:!0}),i.jsx(d,{condomini:e,loading:t,onEdit:e=>{g(e),u(!1)},onDelete:f})]})}class m{static{this.API_BASE="/api/tipologie"}static async getAll(){try{let e=await fetch(this.API_BASE);return await e.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async getById(e){try{let t=await fetch(`${this.API_BASE}/${e}`);return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async create(e){try{let t=await fetch(this.API_BASE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async update(e,t){try{let s=await fetch(`${this.API_BASE}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await s.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async delete(e){try{let t=await fetch(`${this.API_BASE}/${e}`,{method:"DELETE"});return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static validate(e){let t=[];return e.nome&&""!==e.nome.trim()||t.push("Il nome della tipologia \xe8 obbligatorio"),e.nome&&e.nome.length<2&&t.push("Il nome deve essere di almeno 2 caratteri"),t}}function x(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[r,l]=(0,a.useState)(null);return{tipologie:e,loading:s,error:r,loadTipologie:async()=>{i(!0),l(null);let e=await m.getAll();e.success&&e.data?t(e.data):l(e.error||"Errore nel caricamento delle tipologie"),i(!1)},createTipologia:async e=>{let s=m.validate(e);if(s.length>0)return l(s.join(", ")),!1;let i=await m.create(e);return i.success&&i.data?(t(e=>[...e,i.data]),l(null),!0):(l(i.error||"Errore nella creazione della tipologia"),!1)},updateTipologia:async(e,s)=>{let i=m.validate(s);if(i.length>0)return l(i.join(", ")),!1;let a=await m.update(e,s);return a.success&&a.data?(t(t=>t.map(t=>t.id===e?a.data:t)),l(null),!0):(l(a.error||"Errore nell'aggiornamento della tipologia"),!1)},deleteTipologia:async e=>{let s=await m.delete(e);return s.success?(t(t=>t.filter(t=>t.id!==e)),l(null),!0):(l(s.error||"Errore nell'eliminazione della tipologia"),!1)},getTipologia:t=>e.find(e=>e.id===t),getTipologieAttive:()=>e.filter(e=>e.attiva),clearError:()=>l(null)}}function u({onSubmit:e,onCancel:t,loading:s=!1,initialData:r,isEdit:l=!1}){let[n,o]=(0,a.useState)({nome:r?.nome||"",descrizione:r?.descrizione||"",campi_personalizzati:r?.campi_personalizzati||[]}),[d,c]=(0,a.useState)([]),m=[{value:"testo",label:"Testo"},{value:"numero",label:"Numero"},{value:"data",label:"Data"},{value:"checkbox",label:"Checkbox"},{value:"select",label:"Lista selezione"},{value:"textarea",label:"Testo lungo"}],x=async t=>{t.preventDefault(),c([]);let s=[];if(n.nome.trim()||s.push("Il nome della tipologia \xe8 obbligatorio"),s.length>0){c(s);return}await e(n)&&!l&&o({nome:"",descrizione:"",campi_personalizzati:[]})},u=e=>{let{name:t,value:s}=e.target;o(e=>({...e,[t]:s})),d.length>0&&c([])},h=e=>{o(t=>({...t,campi_personalizzati:t.campi_personalizzati.filter((t,s)=>s!==e)}))},g=(e,t)=>{o(s=>({...s,campi_personalizzati:s.campi_personalizzati.map((s,i)=>i===e?{...s,...t}:s)}))};return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:l?"Modifica Tipologia":"Nuova Tipologia"}),t&&i.jsx("button",{type:"button",onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]}),d.length>0&&i.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:i.jsx("div",{className:"text-red-600 text-sm",children:d.map((e,t)=>(0,i.jsxs)("div",{children:["• ",e]},t))})}),(0,i.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Tipologia *"}),i.jsx("input",{type:"text",name:"nome",value:n.nome,onChange:u,placeholder:"Es: Verifica Antincendio",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrizione"}),i.jsx("textarea",{name:"descrizione",value:n.descrizione,onChange:u,placeholder:"Descrivi brevemente questa tipologia di verifica...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:s})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Campi Personalizzati"}),i.jsx("button",{type:"button",onClick:()=>{let e={nome:"",tipo:"testo",obbligatorio:!1};o(t=>({...t,campi_personalizzati:[...t.campi_personalizzati,e]}))},disabled:s,className:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600 transition-colors",children:"+ Aggiungi Campo"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[n.campi_personalizzati.map((e,t)=>(0,i.jsxs)("div",{className:"border border-gray-200 p-4 rounded-md",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,i.jsxs)("h5",{className:"font-medium text-gray-700",children:["Campo #",t+1]}),i.jsx("button",{type:"button",onClick:()=>h(t),className:"text-red-500 hover:text-red-700",children:"\uD83D\uDDD1️"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Nome Campo"}),i.jsx("input",{type:"text",value:e.nome,onChange:e=>g(t,{nome:e.target.value}),placeholder:"Es: Numero estintori",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Tipo"}),i.jsx("select",{value:e.tipo,onChange:e=>g(t,{tipo:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm",children:m.map(e=>i.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Placeholder"}),i.jsx("input",{type:"text",value:e.placeholder||"",onChange:e=>g(t,{placeholder:e.target.value}),placeholder:"Testo di aiuto...",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm"})]}),i.jsx("div",{className:"flex items-center",children:(0,i.jsxs)("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:e.obbligatorio,onChange:e=>g(t,{obbligatorio:e.target.checked}),className:"mr-2"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Campo obbligatorio"})]})}),"select"===e.tipo&&(0,i.jsxs)("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Opzioni (una per riga)"}),i.jsx("textarea",{value:e.opzioni?.join("\n")||"",onChange:e=>g(t,{opzioni:e.target.value.split("\n").filter(e=>""!==e.trim())}),placeholder:"Opzione 1\\nOpzione 2\\nOpzione 3",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded text-sm"})]})]})]},t)),0===n.campi_personalizzati.length&&(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCDD"}),i.jsx("p",{children:"Nessun campo personalizzato configurato"}),(0,i.jsxs)("p",{className:"text-sm",children:["                ",i.jsx("p",{children:'Clicca su "Aggiungi Campo" per iniziare'})]})]})]})]}),(0,i.jsxs)("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",disabled:s||!n.nome.trim(),className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:s?(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),l?"Aggiornamento...":"Creazione..."]}):l?"Aggiorna Tipologia":"Crea Tipologia"}),t&&i.jsx("button",{type:"button",onClick:t,disabled:s,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Annulla"})]})]})]})}function h({tipologie:e,loading:t=!1,onEdit:s,onDelete:r,onToggleActive:l}){let[n,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(null),m=async e=>{o(e);let t=await r(e);o(null),t&&c(null)},x=e=>new Date(e).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"});return t?i.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"Caricamento tipologie..."})]})}):0===e.length?i.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCCB"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessuna tipologia trovata"}),i.jsx("p",{className:"text-gray-500",children:"Inizia creando la tua prima tipologia di verifica"})]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Tipologie Verifiche (",e.length,")"]})}),i.jsx("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipologia"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campi Configurati"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stato"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Creazione"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Azioni"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"text-purple-600 font-medium",children:e.nome.charAt(0).toUpperCase()})}),(0,i.jsxs)("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.nome}),i.jsx("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:e.descrizione||"Nessuna descrizione"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.campi_personalizzati.length}),i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"campi"}),e.campi_personalizzati.some(e=>e.obbligatorio)&&i.jsx("span",{className:"ml-2 text-xs bg-red-100 text-red-600 px-2 py-1 rounded",children:"obbligatori"})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.attiva?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.attiva?"✓ Attiva":"○ Disattiva"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x(e.data_creazione)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,i.jsxs)("div",{className:"flex justify-end gap-2",children:[l&&i.jsx("button",{onClick:()=>l(e.id,!e.attiva),className:`text-sm px-2 py-1 rounded transition-colors ${e.attiva?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900"}`,title:e.attiva?"Disattiva":"Attiva",children:e.attiva?"⏸️":"▶️"}),i.jsx("button",{onClick:()=>s(e),className:"text-indigo-600 hover:text-indigo-900 transition-colors",title:"Modifica",children:"✏️"}),i.jsx("button",{onClick:()=>c(e.id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Elimina",children:"\uD83D\uDDD1️"})]})})]},e.id))})]})})]}),d&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Conferma eliminazione"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Sei sicuro di voler eliminare questa tipologia? Questa azione non pu\xf2 essere annullata."}),(0,i.jsxs)("div",{className:"flex gap-3 justify-end",children:[i.jsx("button",{onClick:()=>c(null),disabled:n===d,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Annulla"}),i.jsx("button",{onClick:()=>m(d),disabled:n===d,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors disabled:bg-red-300 disabled:cursor-not-allowed",children:n===d?(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Eliminazione..."]}):"Elimina"})]})]})})]})}function g(){let{tipologie:e,loading:t,error:s,createTipologia:r,updateTipologia:l,deleteTipologia:n,clearError:o}=x(),[d,c]=(0,a.useState)(!1),[m,g]=(0,a.useState)(null),[p,b]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),N=async e=>{b(!0);let t=await r(e);return b(!1),t&&(c(!1),v("Tipologia creata con successo!")),t},y=async e=>{if(!m)return!1;let t={...e,attiva:m.attiva};b(!0);let s=await l(m.id,t);return b(!1),s&&(g(null),v("Tipologia aggiornata con successo!")),s},f=async e=>{let t=await n(e);return t&&v("Tipologia eliminata con successo!"),t},w=async(t,s)=>{let i=e.find(e=>e.id===t);if(!i)return!1;let a={nome:i.nome,descrizione:i.descrizione,campi_personalizzati:i.campi_personalizzati,attiva:s},r=await l(t,a);return r&&v(`Tipologia ${s?"attivata":"disattivata"} con successo!`),r},C={totale:e.length,attive:e.filter(e=>e.attiva).length,conCampi:e.filter(e=>e.campi_personalizzati.length>0).length};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Tipologie Verifiche"}),i.jsx("p",{className:"text-gray-600 mt-1",children:"Configura le diverse tipologie di verifiche e i relativi campi personalizzati"})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsxs)("div",{className:"bg-purple-50 px-4 py-3 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:C.totale}),i.jsx("div",{className:"text-sm text-purple-800",children:"Totale"})]}),(0,i.jsxs)("div",{className:"bg-green-50 px-4 py-3 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:C.attive}),i.jsx("div",{className:"text-sm text-green-800",children:"Attive"})]}),(0,i.jsxs)("div",{className:"bg-blue-50 px-4 py-3 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:C.conCampi}),i.jsx("div",{className:"text-sm text-blue-800",children:"Con Campi"})]})]})]}),s&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-red-400 mr-3",children:"❌"}),(0,i.jsxs)("div",{children:[i.jsx("h4",{className:"text-red-800 font-medium",children:"Errore"}),i.jsx("p",{className:"text-red-700 text-sm mt-1",children:s})]}),i.jsx("button",{onClick:o,className:"ml-auto text-red-400 hover:text-red-600",children:"✕"})]})}),j&&i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-green-400 mr-3",children:"✅"}),(0,i.jsxs)("div",{children:[i.jsx("h4",{className:"text-green-800 font-medium",children:"Successo"}),i.jsx("p",{className:"text-green-700 text-sm mt-1",children:j})]}),i.jsx("button",{onClick:()=>v(null),className:"ml-auto text-green-400 hover:text-green-600",children:"✕"})]})}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsxs)("button",{onClick:()=>{c(!0),g(null)},className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center gap-2",children:[i.jsx("span",{children:"➕"}),"Nuova Tipologia"]}),(0,i.jsxs)("button",{onClick:()=>window.location.reload(),className:"bg-gray-100 text-gray-600 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[i.jsx("span",{children:"\uD83D\uDD04"}),"Ricarica"]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:"\uD83D\uDCA1 Le tipologie disattive non appariranno nel wizard verifiche"})]}),d&&i.jsx(u,{onSubmit:N,onCancel:()=>c(!1),loading:p}),m&&i.jsx(u,{onSubmit:y,onCancel:()=>{g(null)},loading:p,initialData:{nome:m.nome,descrizione:m.descrizione,campi_personalizzati:m.campi_personalizzati,attiva:m.attiva},isEdit:!0}),i.jsx(h,{tipologie:e,loading:t,onEdit:e=>{g(e),c(!1)},onDelete:f,onToggleActive:w})]})}function p({selectedCondominio:e,selectedTipologia:t,onCondominioChange:s,onTipologiaChange:a,onNext:r,canProceed:l}){let{condomini:o,loading:d}=n(),{tipologie:c,loading:m}=x(),u=c.filter(e=>e.attiva);return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Step 1: Selezione Condominio e Tipologia"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Seleziona il condominio da verificare e il tipo di verifica da eseguire"})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Seleziona Condominio *"}),d?i.jsx("div",{className:"animate-pulse",children:i.jsx("div",{className:"h-10 bg-gray-200 rounded-md"})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:o.map(t=>i.jsx("button",{onClick:()=>s(t),className:`p-4 border-2 rounded-lg text-left transition-all ${e?.id===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:i.jsx("span",{className:"text-blue-600 font-medium",children:t.nome.charAt(0).toUpperCase()})}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:t.nome}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:["Token: ",t.token]})]})]})},t.id))}),!d&&0===o.length&&(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83C\uDFE2"}),i.jsx("p",{children:"Nessun condominio disponibile"}),i.jsx("p",{className:"text-sm",children:"Aggiungi prima un condominio nella sezione apposita"})]})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Seleziona Tipologia Verifica *"}),m?i.jsx("div",{className:"animate-pulse",children:i.jsx("div",{className:"h-10 bg-gray-200 rounded-md"})}):i.jsx("div",{className:"grid grid-cols-1 gap-3",children:u.map(e=>i.jsx("button",{onClick:()=>a(e),className:`p-4 border-2 rounded-lg text-left transition-all ${t?.id===e.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"}`,children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"flex items-start",children:[i.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3 mt-1",children:i.jsx("span",{className:"text-green-600 font-medium",children:e.nome.charAt(0).toUpperCase()})}),(0,i.jsxs)("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-gray-900",children:e.nome}),i.jsx("div",{className:"text-sm text-gray-500 mt-1",children:e.descrizione}),(0,i.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:[e.campi_personalizzati.length," campi configurati"]})]})]}),t?.id===e.id&&i.jsx("div",{className:"text-green-500 text-xl",children:"✓"})]})},e.id))}),!m&&0===u.length&&(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCB"}),i.jsx("p",{children:"Nessuna tipologia di verifica attiva"}),i.jsx("p",{className:"text-sm",children:"Configura prima le tipologie nella sezione apposita"})]})]}),e&&t&&(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Riepilogo Selezioni:"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Condominio:"})," ",e.nome]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Tipologia:"})," ",t.nome]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Campi da compilare:"})," ",t.campi_personalizzati.length]})]})]}),i.jsx("div",{className:"flex justify-end pt-4",children:(0,i.jsxs)("button",{onClick:r,disabled:!l,className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2",children:["Continua",i.jsx("span",{children:"→"})]})})]})}function b({tipologia:e,datiVerifica:t,onDatiChange:s,onNext:r,onPrevious:l,canProceed:n}){let[o,d]=(0,a.useState)({}),c=(e,i)=>{if(s({...t,[e.nome]:i}),o[e.nome]){let t={...o};delete t[e.nome],d(t)}},m=()=>{let s={};return e.campi_personalizzati.forEach(e=>{if(e.obbligatorio){let i=t[e.nome];i&&("string"!=typeof i||""!==i.trim())||(s[e.nome]="Questo campo \xe8 obbligatorio")}}),d(s),0===Object.keys(s).length},x=e=>{let s=t[e.nome]||"",a=o[e.nome];switch(e.tipo){case"testo":return i.jsx("input",{type:"text",value:s,onChange:t=>c(e,t.target.value),placeholder:e.placeholder,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${a?"border-red-500":"border-gray-300"}`});case"numero":return i.jsx("input",{type:"number",value:s,onChange:t=>c(e,parseFloat(t.target.value)||""),placeholder:e.placeholder,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${a?"border-red-500":"border-gray-300"}`});case"data":return i.jsx("input",{type:"date",value:s,onChange:t=>c(e,t.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${a?"border-red-500":"border-gray-300"}`});case"checkbox":return(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:!0===s,onChange:t=>c(e,t.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("span",{className:"text-sm text-gray-700",children:e.placeholder||"Seleziona se applicabile"})]});case"select":return(0,i.jsxs)("select",{value:s,onChange:t=>c(e,t.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${a?"border-red-500":"border-gray-300"}`,children:[i.jsx("option",{value:"",children:"Seleziona..."}),e.opzioni?.map((e,t)=>i.jsx("option",{value:e,children:e},t))]});case"textarea":return i.jsx("textarea",{value:s,onChange:t=>c(e,t.target.value),placeholder:e.placeholder,rows:4,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${a?"border-red-500":"border-gray-300"}`});default:return null}};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Step 2: Compilazione Dati Verifica"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-4",children:["Compila i campi richiesti per la verifica: ",i.jsx("strong",{children:e.nome})]}),i.jsx("div",{className:"text-sm text-gray-500",children:"Campi obbligatori contrassegnati con *"})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[e.campi_personalizzati.map(e=>(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.nome,e.obbligatorio&&i.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),x(e),o[e.nome]&&i.jsx("div",{className:"text-red-500 text-sm mt-1",children:o[e.nome]})]},e.id)),0===e.campi_personalizzati.length&&(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCDD"}),i.jsx("p",{children:"Nessun campo configurato per questa tipologia"}),i.jsx("p",{className:"text-sm",children:"Puoi procedere direttamente al passo successivo"})]})]}),(0,i.jsxs)("div",{className:"flex justify-between pt-6",children:[(0,i.jsxs)("button",{onClick:l,className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors flex items-center gap-2",children:[i.jsx("span",{children:"←"}),"Indietro"]}),(0,i.jsxs)("button",{onClick:()=>{m()&&r()},disabled:!n,className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2",children:["Continua",i.jsx("span",{children:"→"})]})]})]})}function j({condominio:e,tipologia:t,datiVerifica:s,note:a,onNoteChange:r,onComplete:l,onPrevious:n,loading:o=!1}){return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Step 3: Riepilogo e Completamento"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Verifica i dati inseriti e completa la verifica"})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[i.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Riepilogo Verifica"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Informazioni Generali"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Condominio:"})," ",e.nome]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Tipologia:"})," ",t.nome]}),(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Data:"})," ",new Date().toLocaleDateString("it-IT")]})]})]}),(0,i.jsxs)("div",{children:[i.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"Dati Raccolti"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[Object.entries(s).map(([e,t])=>(0,i.jsxs)("div",{children:[(0,i.jsxs)("strong",{children:[e,":"]})," ","boolean"==typeof t?t?"S\xec":"No":String(t)]},e)),0===Object.keys(s).length&&i.jsx("div",{className:"text-gray-500 italic",children:"Nessun dato raccolto"})]})]})]})]}),(0,i.jsxs)("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note Aggiuntive"}),i.jsx("textarea",{value:a,onChange:e=>r(e.target.value),placeholder:"Inserisci eventuali note, osservazioni o commenti sulla verifica...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:o})]}),(0,i.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"Opzioni di Completamento"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm text-blue-700",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"mr-2",children:"\uD83D\uDCE7"}),"Email di notifica sar\xe0 inviata automaticamente"]}),(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"mr-2",children:"\uD83D\uDCBE"}),"I dati verranno salvati nel sistema"]}),(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"mr-2",children:"\uD83D\uDCCB"}),"La verifica sar\xe0 disponibile nel pannello amministratore"]})]})]}),(0,i.jsxs)("div",{className:"flex justify-between pt-6",children:[(0,i.jsxs)("button",{onClick:n,disabled:o,className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50 flex items-center gap-2",children:[i.jsx("span",{children:"←"}),"Indietro"]}),i.jsx("button",{onClick:l,disabled:o,className:"bg-green-500 text-white px-8 py-3 rounded-lg hover:bg-green-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2",children:o?(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Completamento..."]}):i.jsx(i.Fragment,{children:"✓ Completa Verifica"})})]})]})}function v(){let[e,t]=(0,a.useState)(1),[s,r]=(0,a.useState)(null),[l,n]=(0,a.useState)(null),[o,d]=(0,a.useState)({}),[c,m]=(0,a.useState)(""),[x,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),v=()=>{t(e=>e-1)},N=async()=>{if(s&&l){u(!0);try{let e={condominio_id:s.id,tipologia_id:l.id,dati_verifica:o,note:c},i=await fetch("/api/verifiche",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await i.json();a.success?(g(!0),setTimeout(()=>{t(1),r(null),n(null),d({}),m(""),g(!1)},3e3)):alert("Errore nel completamento della verifica: "+a.error)}catch(e){alert("Errore di connessione")}u(!1)}},y=!!(s&&l),f=!l||l.campi_personalizzati.filter(e=>e.obbligatorio).every(e=>o[e.nome]&&""!==o[e.nome]);return h?i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,i.jsxs)("div",{className:"text-center",children:[i.jsx("div",{className:"text-green-500 text-6xl mb-4",children:"✅"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Verifica Completata con Successo!"}),(0,i.jsxs)("div",{className:"space-y-2 text-gray-600 mb-6",children:[(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Condominio:"})," ",s?.nome]}),(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Tipologia:"})," ",l?.nome]}),(0,i.jsxs)("p",{children:[i.jsx("strong",{children:"Data:"})," ",new Date().toLocaleDateString("it-IT")]})]}),i.jsx("div",{className:"bg-green-50 p-4 rounded-lg mb-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-center text-green-700",children:[i.jsx("span",{className:"mr-2",children:"\uD83D\uDCE7"}),"Email di notifica inviata con successo"]})}),i.jsx("p",{className:"text-sm text-gray-500",children:"Reindirizzamento automatico in corso..."})]})})}):(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Wizard Verifiche"}),i.jsx("div",{className:"flex items-center justify-between mb-6",children:[1,2,3].map(t=>(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ${t<e?"bg-green-500 text-white":t===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"}`,children:t<e?"✓":t}),t<3&&i.jsx("div",{className:`w-16 md:w-32 h-1 mx-2 ${t<e?"bg-green-500":"bg-gray-200"}`})]},t))}),(0,i.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[i.jsx("span",{className:1===e?"font-medium text-blue-600":"",children:"Selezione"}),i.jsx("span",{className:2===e?"font-medium text-blue-600":"",children:"Compilazione"}),i.jsx("span",{className:3===e?"font-medium text-blue-600":"",children:"Riepilogo"})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[1===e&&i.jsx(p,{selectedCondominio:s,selectedTipologia:l,onCondominioChange:r,onTipologiaChange:n,onNext:()=>{s&&l&&t(2)},canProceed:y}),2===e&&l&&i.jsx(b,{tipologia:l,datiVerifica:o,onDatiChange:d,onNext:()=>{t(3)},onPrevious:v,canProceed:f}),3===e&&s&&l&&i.jsx(j,{condominio:s,tipologia:l,datiVerifica:o,note:c,onNoteChange:m,onComplete:N,onPrevious:v,loading:x})]}),(0,i.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,i.jsxs)("button",{onClick:()=>{t(1),r(null),n(null),d({}),m(""),g(!1)},className:"text-gray-600 hover:text-gray-800 text-sm flex items-center gap-1",children:[i.jsx("span",{children:"\uD83D\uDD04"}),"Ricomincia"]}),i.jsx("div",{className:"text-sm text-gray-500",children:"\uD83D\uDCA1 I dati vengono salvati automaticamente ad ogni passaggio"})]})]})}function N(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(!0),[l,n]=(0,a.useState)(null),[o,d]=(0,a.useState)("tutte"),[c,m]=(0,a.useState)(null),[x,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),j=(0,a.useCallback)(async()=>{r(!0);try{let e="tutte"!==o?`/api/lavorazioni?stato=${o}`:"/api/lavorazioni",s=await fetch(e),i=await s.json();i.success?t(i.data):n(i.error)}catch(e){n("Errore nel caricamento delle lavorazioni")}r(!1)},[o]),v=async(e,t,s)=>{try{let i=await fetch(`/api/lavorazioni/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({azione:t,nota:s})}),a=await i.json();a.success?(j(),u(!1),g(""),m(null)):n(a.error)}catch(e){n("Errore nell'esecuzione dell'azione")}},N=(e,t)=>{m(e),b(t),u(!0)},y=e=>new Date(e).toLocaleString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),f=e=>{switch(e){case"aperta":return"bg-yellow-100 text-yellow-800";case"chiusa":return"bg-green-100 text-green-800";case"riaperta":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},w=e=>{switch(e){case"aperta":return"\uD83D\uDCC2";case"chiusa":return"✅";case"riaperta":return"\uD83D\uDD04";default:return"❓"}},C={totali:e.length,aperte:e.filter(e=>"aperta"===e.stato).length,chiuse:e.filter(e=>"chiusa"===e.stato).length,riaperte:e.filter(e=>"riaperta"===e.stato).length};return s?(0,i.jsxs)("div",{className:"flex items-center justify-center p-8",children:[i.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"}),i.jsx("span",{className:"ml-3 text-gray-600",children:"Caricamento lavorazioni..."})]}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Pannello Amministratore"}),i.jsx("p",{className:"text-gray-600",children:"Gestisci lavorazioni, riapri verifiche chiuse e aggiungi note"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:C.totali}),i.jsx("div",{className:"text-blue-800 text-sm",children:"Totali"})]}),i.jsx("div",{className:"text-blue-400 text-2xl",children:"\uD83D\uDCCA"})]})}),i.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:C.aperte}),i.jsx("div",{className:"text-yellow-800 text-sm",children:"Aperte"})]}),i.jsx("div",{className:"text-yellow-400 text-2xl",children:"\uD83D\uDCC2"})]})}),i.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:C.chiuse}),i.jsx("div",{className:"text-green-800 text-sm",children:"Chiuse"})]}),i.jsx("div",{className:"text-green-400 text-2xl",children:"✅"})]})}),i.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-orange-600",children:C.riaperte}),i.jsx("div",{className:"text-orange-800 text-sm",children:"Riaperte"})]}),i.jsx("div",{className:"text-orange-400 text-2xl",children:"\uD83D\uDD04"})]})})]}),(0,i.jsxs)("div",{className:"flex gap-4 items-center",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filtra per stato:"}),(0,i.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Filtra lavorazioni per stato",children:[i.jsx("option",{value:"tutte",children:"Tutte le lavorazioni"}),i.jsx("option",{value:"aperta",children:"Solo aperte"}),i.jsx("option",{value:"chiusa",children:"Solo chiuse"}),i.jsx("option",{value:"riaperta",children:"Solo riaperte"})]}),(0,i.jsxs)("button",{onClick:j,className:"bg-gray-100 text-gray-600 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[i.jsx("span",{children:"\uD83D\uDD04"}),"Ricarica"]})]}),l&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"text-red-600",children:["❌ ",l]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:0===e.length?(0,i.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[i.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCB"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nessuna lavorazione trovata"}),i.jsx("p",{children:"Non ci sono lavorazioni che corrispondono ai filtri selezionati"})]}):i.jsx("div",{className:"divide-y divide-gray-200",children:e.map(e=>i.jsx("div",{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"text-2xl",children:w(e.stato)}),i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${f(e.stato)}`,children:e.stato.toUpperCase()}),(0,i.jsxs)("span",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e.descrizione}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 space-y-1 mb-3",children:[(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Aperta:"})," ",y(e.data_apertura)]}),e.data_chiusura&&(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Chiusa:"})," ",y(e.data_chiusura)]}),e.data_riapertura&&(0,i.jsxs)("div",{children:[i.jsx("strong",{children:"Riaperta:"})," ",y(e.data_riapertura)]})]}),e.note.length>0&&(0,i.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,i.jsxs)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["Note (",e.note.length,"):"]}),i.jsx("div",{className:"space-y-2",children:e.note.map((e,t)=>(0,i.jsxs)("div",{className:"text-sm text-gray-600 flex items-start",children:[i.jsx("span",{className:"text-blue-500 mr-2",children:"•"}),e]},t))})]})]}),(0,i.jsxs)("div",{className:"ml-4 flex flex-col gap-2",children:[i.jsx("button",{onClick:()=>N(e,"aggiungi_nota"),className:"text-blue-600 hover:text-blue-800 text-sm px-3 py-1 border border-blue-200 rounded",children:"\uD83D\uDCDD Aggiungi Nota"}),"aperta"===e.stato&&i.jsx("button",{onClick:()=>N(e,"chiudi"),className:"text-green-600 hover:text-green-800 text-sm px-3 py-1 border border-green-200 rounded",children:"✅ Chiudi"}),"chiusa"===e.stato&&i.jsx("button",{onClick:()=>N(e,"riapri"),className:"text-orange-600 hover:text-orange-800 text-sm px-3 py-1 border border-orange-200 rounded",children:"\uD83D\uDD04 Riapri"})]})]})},e.id))})}),x&&c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 mx-4",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["chiudi"===p&&"Chiudi Lavorazione","riapri"===p&&"Riapri Lavorazione","aggiungi_nota"===p&&"Aggiungi Nota"]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[i.jsx("strong",{children:"Lavorazione:"})," ",c.descrizione]}),i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"aggiungi_nota"===p?"Nuova nota:":"Nota (opzionale):"}),i.jsx("textarea",{value:h,onChange:e=>g(e.target.value),placeholder:"Inserisci una nota...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{className:"flex gap-3 justify-end",children:[i.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Annulla"}),i.jsx("button",{onClick:()=>{c&&v(c.id,p,h)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Conferma"})]})]})})]})}function y(){let{condomini:e,loading:t}=n(),s={condomininiAttivi:e.length,verificheCompletate:85,inCorso:7,scadute:3},a=e.filter(e=>{let t=new Date(e.data_inserimento),s=new Date;return s.setDate(s.getDate()-7),t>=s}).length;return(0,i.jsxs)("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Dashboard"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsx("div",{className:"bg-blue-50 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Condomini Attivi"}),i.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:t?"...":s.condomininiAttivi})]}),i.jsx("div",{className:"text-blue-400 text-3xl",children:"\uD83C\uDFE2"})]})}),i.jsx("div",{className:"bg-green-50 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Verifiche Completate"}),i.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:s.verificheCompletate})]}),i.jsx("div",{className:"text-green-400 text-3xl",children:"✅"})]})}),i.jsx("div",{className:"bg-yellow-50 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"In Corso"}),i.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-2",children:s.inCorso})]}),i.jsx("div",{className:"text-yellow-400 text-3xl",children:"⏳"})]})}),i.jsx("div",{className:"bg-red-50 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Scadute"}),i.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:s.scadute})]}),i.jsx("div",{className:"text-red-400 text-3xl",children:"⚠️"})]})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Condomini Recenti",i.jsx("span",{className:"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:a})]}),t?(0,i.jsxs)("div",{className:"animate-pulse space-y-3",children:[i.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]}):e.length>0?i.jsx("div",{className:"space-y-3",children:e.slice(-5).reverse().map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:i.jsx("span",{className:"text-blue-600 font-medium text-sm",children:e.nome.charAt(0).toUpperCase()})}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:e.nome}),i.jsx("div",{className:"text-sm text-gray-500",children:new Date(e.data_inserimento).toLocaleDateString("it-IT")})]})]}),(0,i.jsxs)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[e.token.slice(0,12),"..."]})]},e.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nessun condominio presente"})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Azioni Rapide"}),(0,i.jsxs)("div",{className:"space-y-3",children:[i.jsx("button",{className:"w-full text-left p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-2xl mr-3",children:"\uD83C\uDFE2"}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Nuovo Condominio"}),i.jsx("div",{className:"text-sm text-gray-600",children:"Aggiungi un nuovo condominio al sistema"})]})]})}),i.jsx("button",{className:"w-full text-left p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-2xl mr-3",children:"✅"}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Nuova Verifica"}),i.jsx("div",{className:"text-sm text-gray-600",children:"Avvia il wizard per una nuova verifica"})]})]})}),i.jsx("button",{className:"w-full text-left p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors",children:(0,i.jsxs)("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-2xl mr-3",children:"\uD83D\uDCCB"}),(0,i.jsxs)("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:"Tipologie Verifiche"}),i.jsx("div",{className:"text-sm text-gray-600",children:"Gestisci le tipologie di verifica"})]})]})})]})]})]})]})}function f(){let[e,t]=(0,a.useState)("dashboard");return(0,i.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,i.jsxs)("nav",{className:"w-64 bg-white shadow-lg",children:[i.jsx("div",{className:"p-6",children:i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Verifiche Condominiali"})}),i.jsx("ul",{className:"mt-6",children:[{id:"dashboard",name:"Dashboard",icon:"\uD83C\uDFE0"},{id:"condomini",name:"Condomini",icon:"\uD83C\uDFE2"},{id:"tipologie",name:"Tipologie",icon:"\uD83D\uDCCB"},{id:"verifiche",name:"Verifiche",icon:"✅"},{id:"admin",name:"Admin",icon:"⚙️"}].map(s=>i.jsx("li",{children:(0,i.jsxs)("button",{onClick:()=>t(s.id),className:`w-full flex items-center px-6 py-3 text-left hover:bg-blue-50 transition-colors ${e===s.id?"bg-blue-100 border-r-4 border-blue-500 text-blue-700":"text-gray-600"}`,children:[i.jsx("span",{className:"text-2xl mr-3",children:s.icon}),s.name]})},s.id))})]}),i.jsx("main",{className:"flex-1 p-8",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:["dashboard"===e&&i.jsx(y,{}),"condomini"===e&&i.jsx(c,{}),"tipologie"===e&&i.jsx(g,{}),"verifiche"===e&&i.jsx(v,{}),"admin"===e&&i.jsx(N,{})]})})]})}},3733:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>r,viewport:()=>l});var i=s(2051);s(5023);let a="Verifiche Condominiali",r={title:a,description:"App PWA per gestione verifiche condominiali",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:a},formatDetection:{telephone:!1},icons:{icon:"/icon-192.png",apple:"/apple-icon.png"}},l={themeColor:"#3b82f6"};function n({children:e}){return i.jsx("html",{lang:"it",children:i.jsx("body",{className:"min-h-screen bg-gray-50",children:e})})}},4148:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});let i=(0,s(5347).createProxy)(String.raw`/Users/akirayouky/Desktop/Siti/Condomini/src/app/page.tsx#default`)},5023:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[787,39],()=>s(2887));module.exports=i})();