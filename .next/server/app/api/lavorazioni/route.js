"use strict";(()=>{var e={};e.id=827,e.ids=[827],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8815:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>U,patchFetch:()=>y,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>x,staticGenerationAsyncStorage:()=>z});var a={};t.r(a),t.d(a,{GET:()=>f,POST:()=>v});var o=t(3278),i=t(5002),n=t(4877),s=t(1309);let u=require("node:crypto"),c={randomUUID:u.randomUUID},l=new Uint8Array(256),d=l.length,p=[];for(let e=0;e<256;++e)p.push((e+256).toString(16).slice(1));let m=[{id:"1",verifica_id:"1",stato:"chiusa",descrizione:"Verifica antincendio completata - Sistema conforme",note:["Tutti gli estintori controllati e funzionanti","Vie di fuga libere e segnalate correttamente","Controlli periodici programmati per il prossimo trimestre"],data_apertura:"2024-02-01T09:00:00Z",data_chiusura:"2024-02-01T11:30:00Z"},{id:"2",verifica_id:"2",stato:"aperta",descrizione:"Controllo ascensore in corso",note:["Iniziata verifica funzionamento meccanico","Controllo sistemi di sicurezza previsto per domani"],data_apertura:"2024-02-05T14:00:00Z"},{id:"3",verifica_id:"1",stato:"riaperta",descrizione:"Riapertura per controllo aggiuntivo estintore piano terra",note:["Rilevata anomalia su estintore E-12","Necessaria sostituzione entro 7 giorni","Contattato fornitore per preventivo"],data_apertura:"2024-02-01T09:00:00Z",data_chiusura:"2024-02-01T11:30:00Z",data_riapertura:"2024-02-10T10:15:00Z"}];async function f(e){try{let{searchParams:r}=new URL(e.url),t=r.get("stato"),a=r.get("verificaId"),o=m;return t&&(o=o.filter(e=>e.stato===t)),a&&(o=o.filter(e=>e.verifica_id===a)),s.NextResponse.json({success:!0,data:o,total:o.length})}catch(e){return s.NextResponse.json({success:!1,error:"Errore nel recupero delle lavorazioni"},{status:500})}}async function v(e){try{var r,t;let{verificaId:a,descrizione:o,note:i}=await e.json();if(!a||!o)return s.NextResponse.json({success:!1,error:"Verifica ID e descrizione sono obbligatori"},{status:400});let n=new Date().toISOString(),f={id:c.randomUUID?c.randomUUID():function(e,r,t){let a=(e=e||{}).random??e.rng?.()??(d>l.length-16&&((0,u.randomFillSync)(l),d=0),l.slice(d,d+=16));if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,r){if((t=t||0)<0||t+16>r.length)throw RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let e=0;e<16;++e)r[t+e]=a[e];return r}return function(e,r=0){return(p[e[r+0]]+p[e[r+1]]+p[e[r+2]]+p[e[r+3]]+"-"+p[e[r+4]]+p[e[r+5]]+"-"+p[e[r+6]]+p[e[r+7]]+"-"+p[e[r+8]]+p[e[r+9]]+"-"+p[e[r+10]]+p[e[r+11]]+p[e[r+12]]+p[e[r+13]]+p[e[r+14]]+p[e[r+15]]).toLowerCase()}(a)}(r,t,void 0),verifica_id:a,stato:"aperta",descrizione:o.trim(),note:i?[i]:[],data_apertura:n};return m.push(f),s.NextResponse.json({success:!0,data:f,message:"Lavorazione creata con successo"},{status:201})}catch(e){return s.NextResponse.json({success:!1,error:"Errore nella creazione della lavorazione"},{status:500})}}let g=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/lavorazioni/route",pathname:"/api/lavorazioni",filename:"route",bundlePath:"app/api/lavorazioni/route"},resolvedPagePath:"/Users/akirayouky/Desktop/Siti/Condomini/src/app/api/lavorazioni/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:z,serverHooks:x}=g,U="/api/lavorazioni/route";function y(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:z})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[787,833],()=>t(8815));module.exports=a})();