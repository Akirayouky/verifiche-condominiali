"use strict";(()=>{var e={};e.id=487,e.ids=[487],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2521:(e,s,r)=>{r.r(s),r.d(s,{originalPathname:()=>f,patchFetch:()=>m,requestAsyncStorage:()=>v,routeModule:()=>d,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var t={};r.r(t),r.d(t,{DELETE:()=>l,GET:()=>c,PUT:()=>p});var a=r(3278),o=r(5002),n=r(4877),i=r(1309);let u=[{id:"1",verifica_id:"1",stato:"chiusa",descrizione:"Verifica antincendio completata - Sistema conforme",note:["Tutti gli estintori controllati e funzionanti","Vie di fuga libere e segnalate correttamente"],data_apertura:"2024-02-01T09:00:00Z",data_chiusura:"2024-02-01T11:30:00Z"}];async function c(e,{params:s}){try{let{id:e}=s,r=u.find(s=>s.id===e);if(!r)return i.NextResponse.json({success:!1,error:"Lavorazione non trovata"},{status:404});return i.NextResponse.json({success:!0,data:r})}catch(e){return i.NextResponse.json({success:!1,error:"Errore nel recupero della lavorazione"},{status:500})}}async function p(e,{params:s}){try{let{id:r}=s,{azione:t,descrizione:a,nota:o}=await e.json(),n=u.findIndex(e=>e.id===r);if(-1===n)return i.NextResponse.json({success:!1,error:"Lavorazione non trovata"},{status:404});let c=u[n],p=new Date().toISOString();switch(t){case"chiudi":if("aperta"!==c.stato)return i.NextResponse.json({success:!1,error:"Solo le lavorazioni aperte possono essere chiuse"},{status:400});c.stato="chiusa",c.data_chiusura=p,o&&c.note.push(o);break;case"riapri":if("chiusa"!==c.stato)return i.NextResponse.json({success:!1,error:"Solo le lavorazioni chiuse possono essere riaperte"},{status:400});c.stato="riaperta",c.data_riapertura=p,o&&c.note.push(o);break;case"aggiungi_nota":o&&c.note.push(o);break;case"modifica":a&&(c.descrizione=a),o&&c.note.push(o);break;default:return i.NextResponse.json({success:!1,error:"Azione non riconosciuta"},{status:400})}return u[n]=c,i.NextResponse.json({success:!0,data:c,message:"Lavorazione aggiornata con successo"})}catch(e){return i.NextResponse.json({success:!1,error:"Errore nell'aggiornamento della lavorazione"},{status:500})}}async function l(e,{params:s}){try{let{id:e}=s,r=u.findIndex(s=>s.id===e);if(-1===r)return i.NextResponse.json({success:!1,error:"Lavorazione non trovata"},{status:404});return u.splice(r,1),i.NextResponse.json({success:!0,message:"Lavorazione eliminata con successo"})}catch(e){return i.NextResponse.json({success:!1,error:"Errore nell'eliminazione della lavorazione"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/lavorazioni/[id]/route",pathname:"/api/lavorazioni/[id]",filename:"route",bundlePath:"app/api/lavorazioni/[id]/route"},resolvedPagePath:"/Users/akirayouky/Desktop/Siti/Condomini/src/app/api/lavorazioni/[id]/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:v,staticGenerationAsyncStorage:h,serverHooks:x}=d,f="/api/lavorazioni/[id]/route";function m(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[787,833],()=>r(2521));module.exports=t})();