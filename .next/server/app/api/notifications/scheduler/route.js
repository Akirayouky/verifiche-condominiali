"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/notifications/scheduler/route";
exports.ids = ["app/api/notifications/scheduler/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Fscheduler%2Froute&page=%2Fapi%2Fnotifications%2Fscheduler%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Fscheduler%2Froute.ts&appDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Fscheduler%2Froute&page=%2Fapi%2Fnotifications%2Fscheduler%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Fscheduler%2Froute.ts&appDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_akirayouky_Desktop_Siti_Condomini_src_app_api_notifications_scheduler_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/notifications/scheduler/route.ts */ \"(rsc)/./src/app/api/notifications/scheduler/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/notifications/scheduler/route\",\n        pathname: \"/api/notifications/scheduler\",\n        filename: \"route\",\n        bundlePath: \"app/api/notifications/scheduler/route\"\n    },\n    resolvedPagePath: \"/Users/akirayouky/Desktop/Siti/Condomini/src/app/api/notifications/scheduler/route.ts\",\n    nextConfigOutput,\n    userland: _Users_akirayouky_Desktop_Siti_Condomini_src_app_api_notifications_scheduler_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/notifications/scheduler/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZub3RpZmljYXRpb25zJTJGc2NoZWR1bGVyJTJGcm91dGUmcGFnZT0lMkZhcGklMkZub3RpZmljYXRpb25zJTJGc2NoZWR1bGVyJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbm90aWZpY2F0aW9ucyUyRnNjaGVkdWxlciUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFraXJheW91a3klMkZEZXNrdG9wJTJGU2l0aSUyRkNvbmRvbWluaSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZha2lyYXlvdWt5JTJGRGVza3RvcCUyRlNpdGklMkZDb25kb21pbmkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3FDO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29uZG9taW5pLXB3YS8/YmZiOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvYWtpcmF5b3VreS9EZXNrdG9wL1NpdGkvQ29uZG9taW5pL3NyYy9hcHAvYXBpL25vdGlmaWNhdGlvbnMvc2NoZWR1bGVyL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9ub3RpZmljYXRpb25zL3NjaGVkdWxlci9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL25vdGlmaWNhdGlvbnMvc2NoZWR1bGVyXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9ub3RpZmljYXRpb25zL3NjaGVkdWxlci9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9ha2lyYXlvdWt5L0Rlc2t0b3AvU2l0aS9Db25kb21pbmkvc3JjL2FwcC9hcGkvbm90aWZpY2F0aW9ucy9zY2hlZHVsZXIvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL25vdGlmaWNhdGlvbnMvc2NoZWR1bGVyL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Fscheduler%2Froute&page=%2Fapi%2Fnotifications%2Fscheduler%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Fscheduler%2Froute.ts&appDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/notifications/scheduler/route.ts":
/*!******************************************************!*\
  !*** ./src/app/api/notifications/scheduler/route.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_notifications__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/notifications */ \"(rsc)/./src/lib/notifications.ts\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n/**\n * API Route per gestione reminder automatici e controllo scadenze\n * POST /api/notifications/scheduler\n */ \n\n\nasync function POST(request) {\n    try {\n        const { action } = await request.json();\n        console.log(\"\\uD83D\\uDD04 Scheduler notifiche - Action:\", action);\n        switch(action){\n            case \"check-scadenze\":\n                console.log(\"â° Controllo scadenze lavorazioni...\");\n                await (0,_lib_notifications__WEBPACK_IMPORTED_MODULE_1__.controllaScadenzeLavorazioni)();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: \"Controllo scadenze completato\"\n                });\n            case \"send-daily-reminders\":\n                console.log(\"\\uD83D\\uDCC5 Invio reminder giornalieri...\");\n                const risultatoReminder = await inviaReminderGiornalieri();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    data: risultatoReminder,\n                    message: \"Reminder giornalieri inviati\"\n                });\n            case \"process-notifications\":\n                console.log(\"\\uD83D\\uDD04 Processamento notifiche in coda...\");\n                await processaNotificheInCoda();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: \"Processamento notifiche completato\"\n                });\n            case \"cleanup\":\n                console.log(\"\\uD83E\\uDDF9 Cleanup notifiche vecchie...\");\n                await cleanupNotificheVecchie();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: \"Cleanup completato\"\n                });\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Action non valida\"\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error(\"âŒ Errore scheduler notifiche:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Errore interno scheduler\",\n            details: error instanceof Error ? error.message : \"Errore sconosciuto\"\n        }, {\n            status: 500\n        });\n    }\n}\n/**\n * Invia reminder giornalieri configurati\n */ async function inviaReminderGiornalieri() {\n    console.log(\"\\uD83D\\uDCC5 Invio reminder giornalieri configurati\");\n    try {\n        // Query reminder attivi per oggi\n        const oggi = new Date();\n        const oraAttuale = oggi.toTimeString().slice(0, 5) // HH:MM\n        ;\n        const giornoSettimana = oggi.getDay() // 0=domenica, 1=lunedÃ¬, etc.\n        ;\n        // Per ora disabiliamo i reminder configurabili dato che la tabella non esiste\n        // TODO: Implementare reminder_configs se necessario\n        const reminders = [];\n        const error = null;\n        if (error) {\n            throw error;\n        }\n        if (!reminders || reminders.length === 0) {\n            console.log(\"âœ… Nessun reminder da inviare oggi\");\n            return {\n                reminderInviati: 0\n            };\n        }\n        console.log(`ğŸ“¬ Elaborazione di ${reminders.length} reminder`);\n        const notificationManager = _lib_notifications__WEBPACK_IMPORTED_MODULE_1__.NotificationManager.getInstance();\n        let reminderInviati = 0;\n        for (const reminder of reminders){\n            try {\n                let messaggio = \"\";\n                switch(reminder.tipo){\n                    case \"scadenza_lavorazioni\":\n                        messaggio = await generaMessaggioScadenzeLavorazioni(reminder.utente_id, reminder.giorni_anticipo || 1);\n                        break;\n                    case \"controllo_giornaliero\":\n                        messaggio = await generaMessaggioControlloGiornaliero(reminder.utente_id);\n                        break;\n                    case \"report_settimanale\":\n                        messaggio = await generaMessaggioReportSettimanale(reminder.utente_id);\n                        break;\n                    case \"personalizzato\":\n                        messaggio = reminder.descrizione || \"Reminder personalizzato\";\n                        break;\n                }\n                if (messaggio) {\n                    await notificationManager.creaReminderPersonalizzato(reminder, messaggio);\n                    // Aggiorna ultima_esecuzione\n                    await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.from(\"reminder_configs\").update({\n                        ultima_esecuzione: new Date().toISOString(),\n                        prossima_esecuzione: calcolaProssimaEsecuzione(reminder)\n                    }).eq(\"id\", reminder.id);\n                    reminderInviati++;\n                    console.log(`âœ… Reminder inviato: ${reminder.nome} -> ${reminder.users.nome}`);\n                }\n            } catch (error) {\n                console.error(`âŒ Errore reminder ${reminder.id}:`, error);\n            }\n        }\n        console.log(`ğŸ‰ Reminder giornalieri completati: ${reminderInviati}/${reminders.length}`);\n        return {\n            reminderInviati,\n            totaliConfigurati: reminders.length\n        };\n    } catch (error) {\n        console.error(\"âŒ Errore invio reminder giornalieri:\", error);\n        throw error;\n    }\n}\n/**\n * Genera messaggio per scadenze lavorazioni\n */ async function generaMessaggioScadenzeLavorazioni(utenteId, giorniAnticipo) {\n    const dataInizio = new Date();\n    const dataFine = new Date();\n    dataFine.setDate(dataInizio.getDate() + giorniAnticipo);\n    const { data: lavorazioni, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.from(\"lavorazioni\").select(`\n      id, titolo, data_scadenza, priorita,\n      condomini!inner(nome)\n    `).eq(\"user_id\", utenteId).in(\"stato\", [\n        \"da_eseguire\",\n        \"in_corso\",\n        \"riaperta\"\n    ]).gte(\"data_scadenza\", dataInizio.toISOString()).lte(\"data_scadenza\", dataFine.toISOString());\n    if (error || !lavorazioni || lavorazioni.length === 0) {\n        return \"\" // Non inviare reminder se non ci sono scadenze\n        ;\n    }\n    const lavorazioniUrgenti = lavorazioni.filter((l)=>l.priorita === \"urgente\").length;\n    const lavorazioniAlte = lavorazioni.filter((l)=>l.priorita === \"alta\").length;\n    let messaggio = `Hai ${lavorazioni.length} lavorazioni in scadenza nei prossimi ${giorniAnticipo} giorni`;\n    if (lavorazioniUrgenti > 0) {\n        messaggio += ` (${lavorazioniUrgenti} urgenti)`;\n    }\n    if (lavorazioniAlte > 0) {\n        messaggio += ` (${lavorazioniAlte} prioritÃ  alta)`;\n    }\n    messaggio += \".\\n\\nLavorazioni in scadenza:\";\n    lavorazioni.slice(0, 5).forEach((lav, idx)=>{\n        const scadenza = new Date(lav.data_scadenza).toLocaleDateString(\"it-IT\");\n        const nomeCondominio = lav.condomini?.nome || \"N/A\";\n        messaggio += `\\n${idx + 1}. ${lav.titolo} - ${nomeCondominio} (${scadenza})`;\n    });\n    if (lavorazioni.length > 5) {\n        messaggio += `\\n... e altre ${lavorazioni.length - 5} lavorazioni`;\n    }\n    return messaggio;\n}\n/**\n * Genera messaggio controllo giornaliero\n */ async function generaMessaggioControlloGiornaliero(utenteId) {\n    const { data: stats, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.from(\"lavorazioni\").select(\"stato, priorita\").eq(\"user_id\", utenteId);\n    if (error || !stats) {\n        return \"Controllo giornaliero: impossibile recuperare statistiche\";\n    }\n    const totali = stats.length;\n    const daEseguire = stats.filter((s)=>s.stato === \"da_eseguire\").length;\n    const inCorso = stats.filter((s)=>s.stato === \"in_corso\").length;\n    const urgenti = stats.filter((s)=>s.priorita === \"urgente\" && [\n            \"da_eseguire\",\n            \"in_corso\"\n        ].includes(s.stato)).length;\n    return `ğŸ“Š Controllo giornaliero:\nâ€¢ ${totali} lavorazioni totali\nâ€¢ ${daEseguire} da eseguire\nâ€¢ ${inCorso} in corso\nâ€¢ ${urgenti} urgenti attive\n\n${urgenti > 0 ? \"âš ï¸ Priorit\\xe0 alle lavorazioni urgenti!\" : \"âœ… Nessuna urgenza in corso\"}`;\n}\n/**\n * Genera messaggio report settimanale\n */ async function generaMessaggioReportSettimanale(utenteId) {\n    const settimanaFa = new Date();\n    settimanaFa.setDate(settimanaFa.getDate() - 7);\n    const { data: completate, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.from(\"lavorazioni\").select(\"id, titolo, data_completamento\").eq(\"user_id\", utenteId).eq(\"stato\", \"completata\").gte(\"data_completamento\", settimanaFa.toISOString());\n    const numeroCompletate = completate?.length || 0;\n    return `ğŸ“ˆ Report settimanale:\nâ€¢ ${numeroCompletate} lavorazioni completate\nâ€¢ Periodo: ${settimanaFa.toLocaleDateString(\"it-IT\")} - ${new Date().toLocaleDateString(\"it-IT\")}\n\n${numeroCompletate > 0 ? \"\\uD83C\\uDF89 Ottimo lavoro questa settimana!\" : \"\\uD83D\\uDCAA Continua cos\\xec per la prossima settimana!\"}`;\n}\n/**\n * Calcola prossima esecuzione reminder\n */ function calcolaProssimaEsecuzione(reminder) {\n    const prossima = new Date();\n    switch(reminder.frequenza){\n        case \"giornaliera\":\n            prossima.setDate(prossima.getDate() + 1);\n            break;\n        case \"settimanale\":\n            prossima.setDate(prossima.getDate() + 7);\n            break;\n        case \"mensile\":\n            prossima.setMonth(prossima.getMonth() + 1);\n            break;\n        default:\n            prossima.setDate(prossima.getDate() + 1);\n    }\n    // Imposta ora di invio\n    const [ore, minuti] = reminder.ora_invio.split(\":\");\n    prossima.setHours(parseInt(ore), parseInt(minuti), 0, 0);\n    return prossima.toISOString();\n}\n/**\n * Processa notifiche in coda per invio email/SMS\n */ async function processaNotificheInCoda() {\n    // TODO: Implementare invio email/SMS per notifiche urgenti\n    console.log(\"\\uD83D\\uDCE7 Processamento notifiche per email/SMS (TODO)\");\n}\n/**\n * Cleanup notifiche vecchie\n */ async function cleanupNotificheVecchie() {\n    // Elimina notifiche lette piÃ¹ vecchie di 30 giorni\n    const trentaGiorniFa = new Date();\n    trentaGiorniFa.setDate(trentaGiorniFa.getDate() - 30);\n    const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.from(\"notifiche\").delete().eq(\"letta\", true).lt(\"data_creazione\", trentaGiorniFa.toISOString());\n    if (error) {\n        console.error(\"âŒ Errore cleanup:\", error);\n        throw error;\n    }\n    console.log(\"âœ… Cleanup notifiche completato\");\n}\n// GET per info scheduler\nasync function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        message: \"Scheduler Notifiche API\",\n        endpoints: {\n            \"POST /api/notifications/scheduler\": {\n                actions: {\n                    \"check-scadenze\": \"Controlla scadenze lavorazioni imminenti\",\n                    \"send-daily-reminders\": \"Invia reminder giornalieri configurati\",\n                    \"process-notifications\": \"Processa notifiche per email/SMS\",\n                    \"cleanup\": \"Rimuovi notifiche vecchie\"\n                }\n            }\n        },\n        info: \"Configurare cron job per esecuzione automatica\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9ub3RpZmljYXRpb25zL3NjaGVkdWxlci9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7Q0FHQyxHQUVzRDtBQUMrQztBQUM3RDtBQUVsQyxlQUFlSSxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxNQUFNLEVBQUUsR0FBRyxNQUFNRCxRQUFRRSxJQUFJO1FBRXJDQyxRQUFRQyxHQUFHLENBQUMsOENBQW9DSDtRQUVoRCxPQUFRQTtZQUNOLEtBQUs7Z0JBQ0hFLFFBQVFDLEdBQUcsQ0FBQztnQkFDWixNQUFNUixnRkFBNEJBO2dCQUVsQyxPQUFPRCxxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO29CQUN2QkcsU0FBUztvQkFDVEMsU0FBUztnQkFDWDtZQUVGLEtBQUs7Z0JBQ0hILFFBQVFDLEdBQUcsQ0FBQztnQkFDWixNQUFNRyxvQkFBb0IsTUFBTUM7Z0JBRWhDLE9BQU9iLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7b0JBQ3ZCRyxTQUFTO29CQUNUSSxNQUFNRjtvQkFDTkQsU0FBUztnQkFDWDtZQUVGLEtBQUs7Z0JBQ0hILFFBQVFDLEdBQUcsQ0FBQztnQkFDWixNQUFNTTtnQkFFTixPQUFPZixxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO29CQUN2QkcsU0FBUztvQkFDVEMsU0FBUztnQkFDWDtZQUVGLEtBQUs7Z0JBQ0hILFFBQVFDLEdBQUcsQ0FBQztnQkFDWixNQUFNTztnQkFFTixPQUFPaEIscURBQVlBLENBQUNPLElBQUksQ0FBQztvQkFDdkJHLFNBQVM7b0JBQ1RDLFNBQVM7Z0JBQ1g7WUFFRjtnQkFDRSxPQUFPWCxxREFBWUEsQ0FBQ08sSUFBSSxDQUN0QjtvQkFBRUcsU0FBUztvQkFBT08sT0FBTztnQkFBb0IsR0FDN0M7b0JBQUVDLFFBQVE7Z0JBQUk7UUFFcEI7SUFFRixFQUFFLE9BQU9ELE9BQU87UUFDZFQsUUFBUVMsS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsT0FBT2pCLHFE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Q0QsZUFBZS9CO0lBQ2IsMkRBQTJEO0lBQzNEUCxRQUFRQyxHQUFHLENBQUM7QUFDZDtBQUVBOztDQUVDLEdBQ0QsZUFBZU87SUFDYixtREFBbUQ7SUFDbkQsTUFBTW9GLGlCQUFpQixJQUFJOUU7SUFDM0I4RSxlQUFlMUMsT0FBTyxDQUFDMEMsZUFBZXpDLE9BQU8sS0FBSztJQUVsRCxNQUFNLEVBQUUxQyxLQUFLLEVBQUUsR0FBRyxNQUFNZCxtREFBUUEsQ0FDN0J3QyxJQUFJLENBQUMsYUFDTDBELE1BQU0sR0FDTnBELEVBQUUsQ0FBQyxTQUFTLE1BQ1pxRCxFQUFFLENBQUMsa0JBQWtCRixlQUFldEQsV0FBVztJQUVsRCxJQUFJN0IsT0FBTztRQUNUVCxRQUFRUyxLQUFLLENBQUMscUJBQXFCQTtRQUNuQyxNQUFNQTtJQUNSO0lBRUFULFFBQVFDLEdBQUcsQ0FBQztBQUNkO0FBRUEseUJBQXlCO0FBQ2xCLGVBQWU4RjtJQUNwQixPQUFPdkcscURBQVlBLENBQUNPLElBQUksQ0FBQztRQUN2QkcsU0FBUztRQUNUQyxTQUFTO1FBQ1Q2RixXQUFXO1lBQ1QscUNBQXFDO2dCQUNuQ0MsU0FBUztvQkFDUCxrQkFBa0I7b0JBQ2xCLHdCQUF3QjtvQkFDeEIseUJBQXlCO29CQUN6QixXQUFXO2dCQUNiO1lBQ0Y7UUFDRjtRQUNBQyxNQUFNO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbmRvbWluaS1wd2EvLi9zcmMvYXBwL2FwaS9ub3RpZmljYXRpb25zL3NjaGVkdWxlci9yb3V0ZS50cz80ZWMwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQVBJIFJvdXRlIHBlciBnZXN0aW9uZSByZW1pbmRlciBhdXRvbWF0aWNpIGUgY29udHJvbGxvIHNjYWRlbnplXG4gKiBQT1NUIC9hcGkvbm90aWZpY2F0aW9ucy9zY2hlZHVsZXJcbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBjb250cm9sbGFTY2FkZW56ZUxhdm9yYXppb25pLCBOb3RpZmljYXRpb25NYW5hZ2VyLCBnZXRBZG1pblVzZXJzIH0gZnJvbSAnQC9saWIvbm90aWZpY2F0aW9ucydcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnQC9saWIvc3VwYWJhc2UnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBhY3Rpb24gfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG5cbiAgICBjb25zb2xlLmxvZygn8J+UhCBTY2hlZHVsZXIgbm90aWZpY2hlIC0gQWN0aW9uOicsIGFjdGlvbilcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdjaGVjay1zY2FkZW56ZSc6XG4gICAgICAgIGNvbnNvbGUubG9nKCfij7AgQ29udHJvbGxvIHNjYWRlbnplIGxhdm9yYXppb25pLi4uJylcbiAgICAgICAgYXdhaXQgY29udHJvbGxhU2NhZGVuemVMYXZvcmF6aW9uaSgpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogJ0NvbnRyb2xsbyBzY2FkZW56ZSBjb21wbGV0YXRvJ1xuICAgICAgICB9KVxuXG4gICAgICBjYXNlICdzZW5kLWRhaWx5LXJlbWluZGVycyc6XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OFIEludmlvIHJlbWluZGVyIGdpb3JuYWxpZXJpLi4uJylcbiAgICAgICAgY29uc3QgcmlzdWx0YXRvUmVtaW5kZXIgPSBhd2FpdCBpbnZpYVJlbWluZGVyR2lvcm5hbGllcmkoKVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHJpc3VsdGF0b1JlbWluZGVyLFxuICAgICAgICAgIG1lc3NhZ2U6ICdSZW1pbmRlciBnaW9ybmFsaWVyaSBpbnZpYXRpJ1xuICAgICAgICB9KVxuXG4gICAgICBjYXNlICdwcm9jZXNzLW5vdGlmaWNhdGlvbnMnOlxuICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBQcm9jZXNzYW1lbnRvIG5vdGlmaWNoZSBpbiBjb2RhLi4uJylcbiAgICAgICAgYXdhaXQgcHJvY2Vzc2FOb3RpZmljaGVJbkNvZGEoKVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdQcm9jZXNzYW1lbnRvIG5vdGlmaWNoZSBjb21wbGV0YXRvJ1xuICAgICAgICB9KVxuXG4gICAgICBjYXNlICdjbGVhbnVwJzpcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfp7kgQ2xlYW51cCBub3RpZmljaGUgdmVjY2hpZS4uLicpXG4gICAgICAgIGF3YWl0IGNsZWFudXBOb3RpZmljaGVWZWNjaGllKClcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnQ2xlYW51cCBjb21wbGV0YXRvJ1xuICAgICAgICB9KVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBY3Rpb24gbm9uIHZhbGlkYScgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgKVxuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvcmUgc2NoZWR1bGVyIG5vdGlmaWNoZTonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiAnRXJyb3JlIGludGVybm8gc2NoZWR1bGVyJyxcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyb3JlIHNjb25vc2NpdXRvJ1xuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG4vKipcbiAqIEludmlhIHJlbWluZGVyIGdpb3JuYWxpZXJpIGNvbmZpZ3VyYXRpXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGludmlhUmVtaW5kZXJHaW9ybmFsaWVyaSgpIHtcbiAgY29uc29sZS5sb2coJ/Cfk4UgSW52aW8gcmVtaW5kZXIgZ2lvcm5hbGllcmkgY29uZmlndXJhdGknKVxuXG4gIHRyeSB7XG4gICAgLy8gUXVlcnkgcmVtaW5kZXIgYXR0aXZpIHBlciBvZ2dpXG4gICAgY29uc3Qgb2dnaSA9IG5ldyBEYXRlKClcbiAgICBjb25zdCBvcmFBdHR1YWxlID0gb2dnaS50b1RpbWVTdHJpbmcoKS5zbGljZSgwLCA1KSAvLyBISDpNTVxuICAgIGNvbnN0IGdpb3Jub1NldHRpbWFuYSA9IG9nZ2kuZ2V0RGF5KCkgLy8gMD1kb21lbmljYSwgMT1sdW5lZMOsLCBldGMuXG5cbiAgICAvLyBQZXIgb3JhIGRpc2FiaWxpYW1vIGkgcmVtaW5kZXIgY29uZmlndXJhYmlsaSBkYXRvIGNoZSBsYSB0YWJlbGxhIG5vbiBlc2lzdGVcbiAgICAvLyBUT0RPOiBJbXBsZW1lbnRhcmUgcmVtaW5kZXJfY29uZmlncyBzZSBuZWNlc3NhcmlvXG4gICAgY29uc3QgcmVtaW5kZXJzOiBhbnlbXSA9IFtdXG4gICAgY29uc3QgZXJyb3IgPSBudWxsXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuXG4gICAgaWYgKCFyZW1pbmRlcnMgfHwgcmVtaW5kZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5sb2coJ+KchSBOZXNzdW4gcmVtaW5kZXIgZGEgaW52aWFyZSBvZ2dpJylcbiAgICAgIHJldHVybiB7IHJlbWluZGVySW52aWF0aTogMCB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYPCfk6wgRWxhYm9yYXppb25lIGRpICR7cmVtaW5kZXJzLmxlbmd0aH0gcmVtaW5kZXJgKVxuXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uTWFuYWdlciA9IE5vdGlmaWNhdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuICAgIGxldCByZW1pbmRlckludmlhdGkgPSAwXG5cbiAgICBmb3IgKGNvbnN0IHJlbWluZGVyIG9mIHJlbWluZGVycykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGV0IG1lc3NhZ2dpbyA9ICcnXG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggKHJlbWluZGVyLnRpcG8pIHtcbiAgICAgICAgICBjYXNlICdzY2FkZW56YV9sYXZvcmF6aW9uaSc6XG4gICAgICAgICAgICBtZXNzYWdnaW8gPSBhd2FpdCBnZW5lcmFNZXNzYWdnaW9TY2FkZW56ZUxhdm9yYXppb25pKHJlbWluZGVyLnV0ZW50ZV9pZCwgcmVtaW5kZXIuZ2lvcm5pX2FudGljaXBvIHx8IDEpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgXG4gICAgICAgICAgY2FzZSAnY29udHJvbGxvX2dpb3JuYWxpZXJvJzpcbiAgICAgICAgICAgIG1lc3NhZ2dpbyA9IGF3YWl0IGdlbmVyYU1lc3NhZ2dpb0NvbnRyb2xsb0dpb3JuYWxpZXJvKHJlbWluZGVyLnV0ZW50ZV9pZClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBcbiAgICAgICAgICBjYXNlICdyZXBvcnRfc2V0dGltYW5hbGUnOlxuICAgICAgICAgICAgbWVzc2FnZ2lvID0gYXdhaXQgZ2VuZXJhTWVzc2FnZ2lvUmVwb3J0U2V0dGltYW5hbGUocmVtaW5kZXIudXRlbnRlX2lkKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIFxuICAgICAgICAgIGNhc2UgJ3BlcnNvbmFsaXp6YXRvJzpcbiAgICAgICAgICAgIG1lc3NhZ2dpbyA9IHJlbWluZGVyLmRlc2NyaXppb25lIHx8ICdSZW1pbmRlciBwZXJzb25hbGl6emF0bydcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWVzc2FnZ2lvKSB7XG4gICAgICAgICAgYXdhaXQgbm90aWZpY2F0aW9uTWFuYWdlci5jcmVhUmVtaW5kZXJQZXJzb25hbGl6emF0byhyZW1pbmRlciwgbWVzc2FnZ2lvKVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFnZ2lvcm5hIHVsdGltYV9lc2VjdXppb25lXG4gICAgICAgICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgIC5mcm9tKCdyZW1pbmRlcl9jb25maWdzJylcbiAgICAgICAgICAgIC51cGRhdGUoeyBcbiAgICAgICAgICAgICAgdWx0aW1hX2VzZWN1emlvbmU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgcHJvc3NpbWFfZXNlY3V6aW9uZTogY2FsY29sYVByb3NzaW1hRXNlY3V6aW9uZShyZW1pbmRlcilcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXEoJ2lkJywgcmVtaW5kZXIuaWQpXG5cbiAgICAgICAgICByZW1pbmRlckludmlhdGkrK1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgUmVtaW5kZXIgaW52aWF0bzogJHtyZW1pbmRlci5ub21lfSAtPiAke3JlbWluZGVyLnVzZXJzLm5vbWV9YClcbiAgICAgICAgfVxuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRXJyb3JlIHJlbWluZGVyICR7cmVtaW5kZXIuaWR9OmAsIGVycm9yKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDwn46JIFJlbWluZGVyIGdpb3JuYWxpZXJpIGNvbXBsZXRhdGk6ICR7cmVtaW5kZXJJbnZpYXRpfS8ke3JlbWluZGVycy5sZW5ndGh9YClcbiAgICBcbiAgICByZXR1cm4geyByZW1pbmRlckludmlhdGksIHRvdGFsaUNvbmZpZ3VyYXRpOiByZW1pbmRlcnMubGVuZ3RoIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvcmUgaW52aW8gcmVtaW5kZXIgZ2lvcm5hbGllcmk6JywgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vKipcbiAqIEdlbmVyYSBtZXNzYWdnaW8gcGVyIHNjYWRlbnplIGxhdm9yYXppb25pXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYU1lc3NhZ2dpb1NjYWRlbnplTGF2b3JhemlvbmkodXRlbnRlSWQ6IHN0cmluZywgZ2lvcm5pQW50aWNpcG86IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGRhdGFJbml6aW8gPSBuZXcgRGF0ZSgpXG4gIGNvbnN0IGRhdGFGaW5lID0gbmV3IERhdGUoKVxuICBkYXRhRmluZS5zZXREYXRlKGRhdGFJbml6aW8uZ2V0RGF0ZSgpICsgZ2lvcm5pQW50aWNpcG8pXG5cbiAgY29uc3QgeyBkYXRhOiBsYXZvcmF6aW9uaSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2xhdm9yYXppb25pJylcbiAgICAuc2VsZWN0KGBcbiAgICAgIGlkLCB0aXRvbG8sIGRhdGFfc2NhZGVuemEsIHByaW9yaXRhLFxuICAgICAgY29uZG9taW5pIWlubmVyKG5vbWUpXG4gICAgYClcbiAgICAuZXEoJ3VzZXJfaWQnLCB1dGVudGVJZClcbiAgICAuaW4oJ3N0YXRvJywgWydkYV9lc2VndWlyZScsICdpbl9jb3JzbycsICdyaWFwZXJ0YSddKVxuICAgIC5ndGUoJ2RhdGFfc2NhZGVuemEnLCBkYXRhSW5pemlvLnRvSVNPU3RyaW5nKCkpXG4gICAgLmx0ZSgnZGF0YV9zY2FkZW56YScsIGRhdGFGaW5lLnRvSVNPU3RyaW5nKCkpXG5cbiAgaWYgKGVycm9yIHx8ICFsYXZvcmF6aW9uaSB8fCBsYXZvcmF6aW9uaS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJycgLy8gTm9uIGludmlhcmUgcmVtaW5kZXIgc2Ugbm9uIGNpIHNvbm8gc2NhZGVuemVcbiAgfVxuXG4gIGNvbnN0IGxhdm9yYXppb25pVXJnZW50aSA9IGxhdm9yYXppb25pLmZpbHRlcihsID0+IGwucHJpb3JpdGEgPT09ICd1cmdlbnRlJykubGVuZ3RoXG4gIGNvbnN0IGxhdm9yYXppb25pQWx0ZSA9IGxhdm9yYXppb25pLmZpbHRlcihsID0+IGwucHJpb3JpdGEgPT09ICdhbHRhJykubGVuZ3RoXG5cbiAgbGV0IG1lc3NhZ2dpbyA9IGBIYWkgJHtsYXZvcmF6aW9uaS5sZW5ndGh9IGxhdm9yYXppb25pIGluIHNjYWRlbnphIG5laSBwcm9zc2ltaSAke2dpb3JuaUFudGljaXBvfSBnaW9ybmlgXG4gIFxuICBpZiAobGF2b3JhemlvbmlVcmdlbnRpID4gMCkge1xuICAgIG1lc3NhZ2dpbyArPSBgICgke2xhdm9yYXppb25pVXJnZW50aX0gdXJnZW50aSlgXG4gIH1cbiAgXG4gIGlmIChsYXZvcmF6aW9uaUFsdGUgPiAwKSB7XG4gICAgbWVzc2FnZ2lvICs9IGAgKCR7bGF2b3JhemlvbmlBbHRlfSBwcmlvcml0w6AgYWx0YSlgXG4gIH1cblxuICBtZXNzYWdnaW8gKz0gJy5cXG5cXG5MYXZvcmF6aW9uaSBpbiBzY2FkZW56YTonXG4gIFxuICBsYXZvcmF6aW9uaS5zbGljZSgwLCA1KS5mb3JFYWNoKChsYXYsIGlkeCkgPT4ge1xuICAgIGNvbnN0IHNjYWRlbnphID0gbmV3IERhdGUobGF2LmRhdGFfc2NhZGVuemEpLnRvTG9jYWxlRGF0ZVN0cmluZygnaXQtSVQnKVxuICAgIGNvbnN0IG5vbWVDb25kb21pbmlvID0gKGxhdi5jb25kb21pbmkgYXMgYW55KT8ubm9tZSB8fCAnTi9BJ1xuICAgIG1lc3NhZ2dpbyArPSBgXFxuJHtpZHggKyAxfS4gJHtsYXYudGl0b2xvfSAtICR7bm9tZUNvbmRvbWluaW99ICgke3NjYWRlbnphfSlgXG4gIH0pXG5cbiAgaWYgKGxhdm9yYXppb25pLmxlbmd0aCA+IDUpIHtcbiAgICBtZXNzYWdnaW8gKz0gYFxcbi4uLiBlIGFsdHJlICR7bGF2b3JhemlvbmkubGVuZ3RoIC0gNX0gbGF2b3JhemlvbmlgXG4gIH1cblxuICByZXR1cm4gbWVzc2FnZ2lvXG59XG5cbi8qKlxuICogR2VuZXJhIG1lc3NhZ2dpbyBjb250cm9sbG8gZ2lvcm5hbGllcm9cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhTWVzc2FnZ2lvQ29udHJvbGxvR2lvcm5hbGllcm8odXRlbnRlSWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHsgZGF0YTogc3RhdHMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdsYXZvcmF6aW9uaScpXG4gICAgLnNlbGVjdCgnc3RhdG8sIHByaW9yaXRhJylcbiAgICAuZXEoJ3VzZXJfaWQnLCB1dGVudGVJZClcblxuICBpZiAoZXJyb3IgfHwgIXN0YXRzKSB7XG4gICAgcmV0dXJuICdDb250cm9sbG8gZ2lvcm5hbGllcm86IGltcG9zc2liaWxlIHJlY3VwZXJhcmUgc3RhdGlzdGljaGUnXG4gIH1cblxuICBjb25zdCB0b3RhbGkgPSBzdGF0cy5sZW5ndGhcbiAgY29uc3QgZGFFc2VndWlyZSA9IHN0YXRzLmZpbHRlcihzID0+IHMuc3RhdG8gPT09ICdkYV9lc2VndWlyZScpLmxlbmd0aFxuICBjb25zdCBpbkNvcnNvID0gc3RhdHMuZmlsdGVyKHMgPT4gcy5zdGF0byA9PT0gJ2luX2NvcnNvJykubGVuZ3RoXG4gIGNvbnN0IHVyZ2VudGkgPSBzdGF0cy5maWx0ZXIocyA9PiBzLnByaW9yaXRhID09PSAndXJnZW50ZScgJiYgWydkYV9lc2VndWlyZScsICdpbl9jb3JzbyddLmluY2x1ZGVzKHMuc3RhdG8pKS5sZW5ndGhcblxuICByZXR1cm4gYPCfk4ogQ29udHJvbGxvIGdpb3JuYWxpZXJvOlxu4oCiICR7dG90YWxpfSBsYXZvcmF6aW9uaSB0b3RhbGlcbuKAoiAke2RhRXNlZ3VpcmV9IGRhIGVzZWd1aXJlXG7igKIgJHtpbkNvcnNvfSBpbiBjb3Jzb1xu4oCiICR7dXJnZW50aX0gdXJnZW50aSBhdHRpdmVcblxuJHt1cmdlbnRpID4gMCA/ICfimqDvuI8gUHJpb3JpdMOgIGFsbGUgbGF2b3JhemlvbmkgdXJnZW50aSEnIDogJ+KchSBOZXNzdW5hIHVyZ2VuemEgaW4gY29yc28nfWBcbn1cblxuLyoqXG4gKiBHZW5lcmEgbWVzc2FnZ2lvIHJlcG9ydCBzZXR0aW1hbmFsZVxuICovXG5hc3luYyBmdW5jdGlvbiBnZW5lcmFNZXNzYWdnaW9SZXBvcnRTZXR0aW1hbmFsZSh1dGVudGVJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3Qgc2V0dGltYW5hRmEgPSBuZXcgRGF0ZSgpXG4gIHNldHRpbWFuYUZhLnNldERhdGUoc2V0dGltYW5hRmEuZ2V0RGF0ZSgpIC0gNylcblxuICBjb25zdCB7IGRhdGE6IGNvbXBsZXRhdGUsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdsYXZvcmF6aW9uaScpXG4gICAgLnNlbGVjdCgnaWQsIHRpdG9sbywgZGF0YV9jb21wbGV0YW1lbnRvJylcbiAgICAuZXEoJ3VzZXJfaWQnLCB1dGVudGVJZClcbiAgICAuZXEoJ3N0YXRvJywgJ2NvbXBsZXRhdGEnKVxuICAgIC5ndGUoJ2RhdGFfY29tcGxldGFtZW50bycsIHNldHRpbWFuYUZhLnRvSVNPU3RyaW5nKCkpXG5cbiAgY29uc3QgbnVtZXJvQ29tcGxldGF0ZSA9IGNvbXBsZXRhdGU/Lmxlbmd0aCB8fCAwXG5cbiAgcmV0dXJuIGDwn5OIIFJlcG9ydCBzZXR0aW1hbmFsZTpcbuKAoiAke251bWVyb0NvbXBsZXRhdGV9IGxhdm9yYXppb25pIGNvbXBsZXRhdGVcbuKAoiBQZXJpb2RvOiAke3NldHRpbWFuYUZhLnRvTG9jYWxlRGF0ZVN0cmluZygnaXQtSVQnKX0gLSAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdpdC1JVCcpfVxuXG4ke251bWVyb0NvbXBsZXRhdGUgPiAwID8gJ/CfjokgT3R0aW1vIGxhdm9ybyBxdWVzdGEgc2V0dGltYW5hIScgOiAn8J+SqiBDb250aW51YSBjb3PDrCBwZXIgbGEgcHJvc3NpbWEgc2V0dGltYW5hISd9YFxufVxuXG4vKipcbiAqIENhbGNvbGEgcHJvc3NpbWEgZXNlY3V6aW9uZSByZW1pbmRlclxuICovXG5mdW5jdGlvbiBjYWxjb2xhUHJvc3NpbWFFc2VjdXppb25lKHJlbWluZGVyOiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBwcm9zc2ltYSA9IG5ldyBEYXRlKClcbiAgXG4gIHN3aXRjaCAocmVtaW5kZXIuZnJlcXVlbnphKSB7XG4gICAgY2FzZSAnZ2lvcm5hbGllcmEnOlxuICAgICAgcHJvc3NpbWEuc2V0RGF0ZShwcm9zc2ltYS5nZXREYXRlKCkgKyAxKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXR0aW1hbmFsZSc6XG4gICAgICBwcm9zc2ltYS5zZXREYXRlKHByb3NzaW1hLmdldERhdGUoKSArIDcpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ21lbnNpbGUnOlxuICAgICAgcHJvc3NpbWEuc2V0TW9udGgocHJvc3NpbWEuZ2V0TW9udGgoKSArIDEpXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBwcm9zc2ltYS5zZXREYXRlKHByb3NzaW1hLmdldERhdGUoKSArIDEpXG4gIH1cblxuICAvLyBJbXBvc3RhIG9yYSBkaSBpbnZpb1xuICBjb25zdCBbb3JlLCBtaW51dGldID0gcmVtaW5kZXIub3JhX2ludmlvLnNwbGl0KCc6JylcbiAgcHJvc3NpbWEuc2V0SG91cnMocGFyc2VJbnQob3JlKSwgcGFyc2VJbnQobWludXRpKSwgMCwgMClcblxuICByZXR1cm4gcHJvc3NpbWEudG9JU09TdHJpbmcoKVxufVxuXG4vKipcbiAqIFByb2Nlc3NhIG5vdGlmaWNoZSBpbiBjb2RhIHBlciBpbnZpbyBlbWFpbC9TTVNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc2FOb3RpZmljaGVJbkNvZGEoKSB7XG4gIC8vIFRPRE86IEltcGxlbWVudGFyZSBpbnZpbyBlbWFpbC9TTVMgcGVyIG5vdGlmaWNoZSB1cmdlbnRpXG4gIGNvbnNvbGUubG9nKCfwn5OnIFByb2Nlc3NhbWVudG8gbm90aWZpY2hlIHBlciBlbWFpbC9TTVMgKFRPRE8pJylcbn1cblxuLyoqXG4gKiBDbGVhbnVwIG5vdGlmaWNoZSB2ZWNjaGllXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNsZWFudXBOb3RpZmljaGVWZWNjaGllKCkge1xuICAvLyBFbGltaW5hIG5vdGlmaWNoZSBsZXR0ZSBwacO5IHZlY2NoaWUgZGkgMzAgZ2lvcm5pXG4gIGNvbnN0IHRyZW50YUdpb3JuaUZhID0gbmV3IERhdGUoKVxuICB0cmVudGFHaW9ybmlGYS5zZXREYXRlKHRyZW50YUdpb3JuaUZhLmdldERhdGUoKSAtIDMwKVxuXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ25vdGlmaWNoZScpXG4gICAgLmRlbGV0ZSgpXG4gICAgLmVxKCdsZXR0YScsIHRydWUpXG4gICAgLmx0KCdkYXRhX2NyZWF6aW9uZScsIHRyZW50YUdpb3JuaUZhLnRvSVNPU3RyaW5nKCkpXG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3JlIGNsZWFudXA6JywgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxuICBcbiAgY29uc29sZS5sb2coJ+KchSBDbGVhbnVwIG5vdGlmaWNoZSBjb21wbGV0YXRvJylcbn1cblxuLy8gR0VUIHBlciBpbmZvIHNjaGVkdWxlclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIG1lc3NhZ2U6ICdTY2hlZHVsZXIgTm90aWZpY2hlIEFQSScsXG4gICAgZW5kcG9pbnRzOiB7XG4gICAgICAnUE9TVCAvYXBpL25vdGlmaWNhdGlvbnMvc2NoZWR1bGVyJzoge1xuICAgICAgICBhY3Rpb25zOiB7XG4gICAgICAgICAgJ2NoZWNrLXNjYWRlbnplJzogJ0NvbnRyb2xsYSBzY2FkZW56ZSBsYXZvcmF6aW9uaSBpbW1pbmVudGknLFxuICAgICAgICAgICdzZW5kLWRhaWx5LXJlbWluZGVycyc6ICdJbnZpYSByZW1pbmRlciBnaW9ybmFsaWVyaSBjb25maWd1cmF0aScsXG4gICAgICAgICAgJ3Byb2Nlc3Mtbm90aWZpY2F0aW9ucyc6ICdQcm9jZXNzYSBub3RpZmljaGUgcGVyIGVtYWlsL1NNUycsXG4gICAgICAgICAgJ2NsZWFudXAnOiAnUmltdW92aSBub3RpZmljaGUgdmVjY2hpZSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgaW5mbzogJ0NvbmZpZ3VyYXJlIGNyb24gam9iIHBlciBlc2VjdXppb25lIGF1dG9tYXRpY2EnXG4gIH0pXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNvbnRyb2xsYVNjYWRlbnplTGF2b3JhemlvbmkiLCJOb3RpZmljYXRpb25NYW5hZ2VyIiwic3VwYWJhc2UiLCJQT1NUIiwicmVxdWVzdCIsImFjdGlvbiIsImpzb24iLCJjb25zb2xlIiwibG9nIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJyaXN1bHRhdG9SZW1pbmRlciIsImludmlhUmVtaW5kZXJHaW9ybmFsaWVyaSIsImRhdGEiLCJwcm9jZXNzYU5vdGlmaWNoZUluQ29kYSIsImNsZWFudXBOb3RpZmljaGVWZWNjaGllIiwiZXJyb3IiLCJzdGF0dXMiLCJkZXRhaWxzIiwiRXJyb3IiLCJvZ2dpIiwiRGF0ZSIsIm9yYUF0dHVhbGUiLCJ0b1RpbWVTdHJpbmciLCJzbGljZSIsImdpb3Jub1NldHRpbWFuYSIsImdldERheSIsInJlbWluZGVycyIsImxlbmd0aCIsInJlbWluZGVySW52aWF0aSIsIm5vdGlmaWNhdGlvbk1hbmFnZXIiLCJnZXRJbnN0YW5jZSIsInJlbWluZGVyIiwibWVzc2FnZ2lvIiwidGlwbyIsImdlbmVyYU1lc3NhZ2dpb1NjYWRlbnplTGF2b3JhemlvbmkiLCJ1dGVudGVfaWQiLCJnaW9ybmlfYW50aWNpcG8iLCJnZW5lcmFNZXNzYWdnaW9Db250cm9sbG9HaW9ybmFsaWVybyIsImdlbmVyYU1lc3NhZ2dpb1JlcG9ydFNldHRpbWFuYWxlIiwiZGVzY3JpemlvbmUiLCJjcmVhUmVtaW5kZXJQZXJzb25hbGl6emF0byIsImZyb20iLCJ1cGRhdGUiLCJ1bHRpbWFfZXNlY3V6aW9uZSIsInRvSVNPU3RyaW5nIiwicHJvc3NpbWFfZXNlY3V6aW9uZSIsImNhbGNvbGFQcm9zc2ltYUVzZWN1emlvbmUiLCJlcSIsImlkIiwibm9tZSIsInVzZXJzIiwidG90YWxpQ29uZmlndXJhdGkiLCJ1dGVudGVJZCIsImdpb3JuaUFudGljaXBvIiwiZGF0YUluaXppbyIsImRhdGFGaW5lIiwic2V0RGF0ZSIsImdldERhdGUiLCJsYXZvcmF6aW9uaSIsInNlbGVjdCIsImluIiwiZ3RlIiwibHRlIiwibGF2b3JhemlvbmlVcmdlbnRpIiwiZmlsdGVyIiwibCIsInByaW9yaXRhIiwibGF2b3JhemlvbmlBbHRlIiwiZm9yRWFjaCIsImxhdiIsImlkeCIsInNjYWRlbnphIiwiZGF0YV9zY2FkZW56YSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsIm5vbWVDb25kb21pbmlvIiwiY29uZG9taW5pIiwidGl0b2xvIiwic3RhdHMiLCJ0b3RhbGkiLCJkYUVzZWd1aXJlIiwicyIsInN0YXRvIiwiaW5Db3JzbyIsInVyZ2VudGkiLCJpbmNsdWRlcyIsInNldHRpbWFuYUZhIiwiY29tcGxldGF0ZSIsIm51bWVyb0NvbXBsZXRhdGUiLCJwcm9zc2ltYSIsImZyZXF1ZW56YSIsInNldE1vbnRoIiwiZ2V0TW9udGgiLCJvcmUiLCJtaW51dGkiLCJvcmFfaW52aW8iLCJzcGxpdCIsInNldEhvdXJzIiwicGFyc2VJbnQiLCJ0cmVudGFHaW9ybmlGYSIsImRlbGV0ZSIsImx0IiwiR0VUIiwiZW5kcG9pbnRzIiwiYWN0aW9ucyIsImluZm8iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/notifications/scheduler/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/notifications.ts":
/*!**********************************!*\
  !*** ./src/lib/notifications.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NotificationManager: () => (/* binding */ NotificationManager),\n/* harmony export */   controllaScadenzeLavorazioni: () => (/* binding */ controllaScadenzeLavorazioni),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getAdminUsers: () => (/* binding */ getAdminUsers)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n/**\n * Sistema di gestione notifiche real-time\n * Gestisce creazione, invio e persistenza delle notifiche\n */ \n/**\n * Classe per gestione notifiche centralizzata\n */ class NotificationManager {\n    static getInstance() {\n        if (!NotificationManager.instance) {\n            NotificationManager.instance = new NotificationManager();\n        }\n        return NotificationManager.instance;\n    }\n    /**\n   * Crea una nuova notifica nel database\n   */ async creaNotifica(datiNotifica) {\n        try {\n            const nuovaNotifica = {\n                ...datiNotifica,\n                letta: false,\n                data_creazione: new Date().toISOString()\n            };\n            console.log(\"\\uD83D\\uDCE2 Creando notifica:\", nuovaNotifica);\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"notifiche\").insert([\n                nuovaNotifica\n            ]).select().single();\n            if (error) {\n                console.error(\"âŒ Errore creazione notifica:\", error);\n                return null;\n            }\n            const notifica = data;\n            console.log(\"âœ… Notifica creata:\", notifica.id);\n            // Invia notifica real-time ai subscriber\n            this.inviaNotificaRealTime(notifica);\n            return notifica;\n        } catch (error) {\n            console.error(\"âŒ Errore critico creazione notifica:\", error);\n            return null;\n        }\n    }\n    /**\n   * Notifica per scadenza lavorazione imminente\n   */ async notificaScadenzaImminente(lavorazione, giorniAnticipo) {\n        const dataScadenza = new Date(lavorazione.data_scadenza);\n        const dataNotifica = new Date();\n        dataNotifica.setDate(dataNotifica.getDate() + giorniAnticipo);\n        return await this.creaNotifica({\n            tipo: \"scadenza_imminente\",\n            titolo: `â° Scadenza lavorazione tra ${giorniAnticipo} giorni`,\n            messaggio: `La lavorazione \"${lavorazione.titolo}\" nel condominio scade il ${dataScadenza.toLocaleDateString(\"it-IT\")}`,\n            utente_id: lavorazione.user_id,\n            lavorazione_id: lavorazione.id,\n            condominio_id: lavorazione.condominio_id,\n            priorita: giorniAnticipo <= 1 ? \"urgente\" : giorniAnticipo <= 3 ? \"alta\" : \"media\",\n            data_scadenza: lavorazione.data_scadenza\n        });\n    }\n    /**\n   * Notifica per nuova assegnazione sopralluoghista\n   */ async notificaNuovaAssegnazione(lavorazione, utenteAssegnato) {\n        return await this.creaNotifica({\n            tipo: \"nuova_assegnazione\",\n            titolo: \"\\uD83D\\uDCCB Nuova lavorazione assegnata\",\n            messaggio: `Ti Ã¨ stata assegnata la lavorazione \"${lavorazione.titolo}\" con prioritÃ  ${lavorazione.priorita}`,\n            utente_id: utenteAssegnato,\n            lavorazione_id: lavorazione.id,\n            condominio_id: lavorazione.condominio_id,\n            priorita: lavorazione.priorita === \"urgente\" ? \"urgente\" : \"alta\"\n        });\n    }\n    /**\n   * Notifica per lavorazione completata (per admin)\n   */ async notificaLavorazioneCompletata(lavorazione, adminUsers) {\n        const notifiche = [];\n        for (const adminId of adminUsers){\n            const notifica = await this.creaNotifica({\n                tipo: \"lavorazione_completata\",\n                titolo: \"âœ… Lavorazione completata\",\n                messaggio: `La lavorazione \"${lavorazione.titolo}\" Ã¨ stata completata dal sopralluoghista`,\n                utente_id: adminId,\n                lavorazione_id: lavorazione.id,\n                condominio_id: lavorazione.condominio_id,\n                priorita: \"media\"\n            });\n            if (notifica) notifiche.push(notifica);\n        }\n        return notifiche;\n    }\n    /**\n   * Crea reminder personalizzato\n   */ async creaReminderPersonalizzato(config, messaggio) {\n        return await this.creaNotifica({\n            tipo: \"reminder_personalizzato\",\n            titolo: `ğŸ”” ${config.nome}`,\n            messaggio,\n            utente_id: config.utente_id,\n            priorita: \"media\"\n        });\n    }\n    /**\n   * Recupera notifiche non lette per utente\n   */ async getNotificheNonLette(utenteId) {\n        try {\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"notifiche\").select(\"*\").eq(\"utente_id\", utenteId).eq(\"letta\", false).order(\"data_creazione\", {\n                ascending: false\n            }).limit(50);\n            if (error) {\n                console.error(\"âŒ Errore recupero notifiche:\", error);\n                return [];\n            }\n            return data || [];\n        } catch (error) {\n            console.error(\"âŒ Errore critico recupero notifiche:\", error);\n            return [];\n        }\n    }\n    /**\n   * Marca notifica come letta\n   */ async marcaComeLetta(notificaId) {\n        try {\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"notifiche\").update({\n                letta: true\n            }).eq(\"id\", notificaId);\n            return !error;\n        } catch (error) {\n            console.error(\"âŒ Errore marca come letta:\", error);\n            return false;\n        }\n    }\n    /**\n   * Marca tutte le notifiche come lette per un utente\n   */ async marcaTutteComeLette(utenteId) {\n        try {\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"notifiche\").update({\n                letta: true\n            }).eq(\"utente_id\", utenteId).eq(\"letta\", false);\n            return !error;\n        } catch (error) {\n            console.error(\"âŒ Errore marca tutte come lette:\", error);\n            return false;\n        }\n    }\n    /**\n   * Sottoscrivi a notifiche real-time per un utente\n   */ subscribe(utenteId, callback) {\n        this.subscribers.set(utenteId, callback);\n        // Ritorna funzione di unsubscribe\n        return ()=>{\n            this.subscribers.delete(utenteId);\n        };\n    }\n    /**\n   * Invia notifica real-time ai subscriber\n   */ inviaNotificaRealTime(notifica) {\n        const callback = this.subscribers.get(notifica.utente_id);\n        if (callback) {\n            callback(notifica);\n        }\n    }\n    constructor(){\n        this.subscribers = new Map();\n    }\n}\n/**\n * Utility per controllo scadenze lavorazioni\n */ async function controllaScadenzeLavorazioni() {\n    console.log(\"\\uD83D\\uDD0D Controllo scadenze lavorazioni...\");\n    try {\n        const notificationManager = NotificationManager.getInstance();\n        // Query lavorazioni attive con scadenza nei prossimi giorni\n        const dataOggi = new Date();\n        const tra7Giorni = new Date();\n        tra7Giorni.setDate(dataOggi.getDate() + 7);\n        const { data: lavorazioni, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"lavorazioni\").select(`\n        id, titolo, data_scadenza, user_id, condominio_id, priorita,\n        condomini!inner(nome)\n      `).in(\"stato\", [\n            \"da_eseguire\",\n            \"in_corso\",\n            \"riaperta\"\n        ]).gte(\"data_scadenza\", dataOggi.toISOString()).lte(\"data_scadenza\", tra7Giorni.toISOString());\n        if (error) {\n            console.error(\"âŒ Errore query scadenze:\", error);\n            return;\n        }\n        if (!lavorazioni || lavorazioni.length === 0) {\n            console.log(\"âœ… Nessuna scadenza imminente\");\n            return;\n        }\n        console.log(`â° Trovate ${lavorazioni.length} lavorazioni in scadenza`);\n        // Crea notifiche per ogni lavorazione\n        for (const lavorazione of lavorazioni){\n            const dataScadenza = new Date(lavorazione.data_scadenza);\n            const giorniRimanenti = Math.ceil((dataScadenza.getTime() - dataOggi.getTime()) / (1000 * 60 * 60 * 24));\n            // Notifica a 7, 3, 1 giorni e il giorno stesso\n            if ([\n                7,\n                3,\n                1,\n                0\n            ].includes(giorniRimanenti)) {\n                await notificationManager.notificaScadenzaImminente(lavorazione, giorniRimanenti);\n            }\n        }\n    } catch (error) {\n        console.error(\"âŒ Errore critico controllo scadenze:\", error);\n    }\n}\n/**\n * Utility per ottenere admin users\n */ async function getAdminUsers() {\n    try {\n        const { data: admins, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"users\").select(\"id\").eq(\"role\", \"admin\").eq(\"attivo\", true);\n        if (error) {\n            console.error(\"âŒ Errore recupero admin:\", error);\n            return [];\n        }\n        return admins?.map((admin)=>admin.id) || [];\n    } catch (error) {\n        console.error(\"âŒ Errore critico recupero admin:\", error);\n        return [];\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (NotificationManager);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBQ3BCLElBQUk7UUFDRixNQUFNLEVBQUVuRSxNQUFNb0UsTUFBTSxFQUFFbkUsS0FBSyxFQUFFLEdBQUcsTUFBTWQsbURBQVFBLENBQzNDZSxJQUFJLENBQUMsU0FDTEUsTUFBTSxDQUFDLE1BQ1BrQyxFQUFFLENBQUMsUUFBUSxTQUNYQSxFQUFFLENBQUMsVUFBVTtRQUVoQixJQUFJckMsT0FBTztZQUNUSCxRQUFRRyxLQUFLLENBQUMsNEJBQTRCQTtZQUMxQyxPQUFPLEVBQUU7UUFDWDtRQUVBLE9BQU9tRSxRQUFRQyxJQUFJQyxDQUFBQSxRQUFTQSxNQUFNL0QsRUFBRSxLQUFLLEVBQUU7SUFDN0MsRUFBRSxPQUFPTixPQUFPO1FBQ2RILFFBQVFHLEtBQUssQ0FBQyxvQ0FBb0NBO1FBQ2xELE9BQU8sRUFBRTtJQUNYO0FBQ0Y7QUFFQSxpRUFBZWIsbUJBQW1CQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29uZG9taW5pLXB3YS8uL3NyYy9saWIvbm90aWZpY2F0aW9ucy50cz84MmU2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2lzdGVtYSBkaSBnZXN0aW9uZSBub3RpZmljaGUgcmVhbC10aW1lXG4gKiBHZXN0aXNjZSBjcmVhemlvbmUsIGludmlvIGUgcGVyc2lzdGVuemEgZGVsbGUgbm90aWZpY2hlXG4gKi9cblxuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZSdcbmltcG9ydCB7IE5vdGlmaWNhLCBSZW1pbmRlckNvbmZpZywgTm90aWZpY2FBemlvbmUgfSBmcm9tICdAL2xpYi90eXBlcydcblxuLyoqXG4gKiBDbGFzc2UgcGVyIGdlc3Rpb25lIG5vdGlmaWNoZSBjZW50cmFsaXp6YXRhXG4gKi9cbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IE5vdGlmaWNhdGlvbk1hbmFnZXJcbiAgcHJpdmF0ZSBzdWJzY3JpYmVyczogTWFwPHN0cmluZywgKG5vdGlmaWNhdGlvbjogTm90aWZpY2EpID0+IHZvaWQ+ID0gbmV3IE1hcCgpXG5cbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IE5vdGlmaWNhdGlvbk1hbmFnZXIge1xuICAgIGlmICghTm90aWZpY2F0aW9uTWFuYWdlci5pbnN0YW5jZSkge1xuICAgICAgTm90aWZpY2F0aW9uTWFuYWdlci5pbnN0YW5jZSA9IG5ldyBOb3RpZmljYXRpb25NYW5hZ2VyKClcbiAgICB9XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbk1hbmFnZXIuaW5zdGFuY2VcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhIHVuYSBudW92YSBub3RpZmljYSBuZWwgZGF0YWJhc2VcbiAgICovXG4gIGFzeW5jIGNyZWFOb3RpZmljYShkYXRpTm90aWZpY2E6IE9taXQ8Tm90aWZpY2EsICdpZCcgfCAnZGF0YV9jcmVhemlvbmUnIHwgJ2xldHRhJz4pOiBQcm9taXNlPE5vdGlmaWNhIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBudW92YU5vdGlmaWNhOiBQYXJ0aWFsPE5vdGlmaWNhPiA9IHtcbiAgICAgICAgLi4uZGF0aU5vdGlmaWNhLFxuICAgICAgICBsZXR0YTogZmFsc2UsXG4gICAgICAgIGRhdGFfY3JlYXppb25lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5OiIENyZWFuZG8gbm90aWZpY2E6JywgbnVvdmFOb3RpZmljYSlcblxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ25vdGlmaWNoZScpXG4gICAgICAgIC5pbnNlcnQoW251b3ZhTm90aWZpY2FdKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3JlIGNyZWF6aW9uZSBub3RpZmljYTonLCBlcnJvcilcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cblxuICAgICAgY29uc3Qgbm90aWZpY2EgPSBkYXRhIGFzIE5vdGlmaWNhXG4gICAgICBjb25zb2xlLmxvZygn4pyFIE5vdGlmaWNhIGNyZWF0YTonLCBub3RpZmljYS5pZClcblxuICAgICAgLy8gSW52aWEgbm90aWZpY2EgcmVhbC10aW1lIGFpIHN1YnNjcmliZXJcbiAgICAgIHRoaXMuaW52aWFOb3RpZmljYVJlYWxUaW1lKG5vdGlmaWNhKVxuXG4gICAgICByZXR1cm4gbm90aWZpY2FcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3JlIGNyaXRpY28gY3JlYXppb25lIG5vdGlmaWNhOicsIGVycm9yKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTm90aWZpY2EgcGVyIHNjYWRlbnphIGxhdm9yYXppb25lIGltbWluZW50ZVxuICAgKi9cbiAgYXN5bmMgbm90aWZpY2FTY2FkZW56YUltbWluZW50ZShsYXZvcmF6aW9uZTogYW55LCBnaW9ybmlBbnRpY2lwbzogbnVtYmVyKTogUHJvbWlzZTxOb3RpZmljYSB8IG51bGw+IHtcbiAgICBjb25zdCBkYXRhU2NhZGVuemEgPSBuZXcgRGF0ZShsYXZvcmF6aW9uZS5kYXRhX3NjYWRlbnphKVxuICAgIGNvbnN0IGRhdGFOb3RpZmljYSA9IG5ldyBEYXRlKClcbiAgICBkYXRhTm90aWZpY2Euc2V0RGF0ZShkYXRhTm90aWZpY2EuZ2V0RGF0ZSgpICsgZ2lvcm5pQW50aWNpcG8pXG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhTm90aWZpY2Eoe1xuICAgICAgdGlwbzogJ3NjYWRlbnphX2ltbWluZW50ZScsXG4gICAgICB0aXRvbG86IGDij7AgU2NhZGVuemEgbGF2b3JhemlvbmUgdHJhICR7Z2lvcm5pQW50aWNpcG99IGdpb3JuaWAsXG4gICAgICBtZXNzYWdnaW86IGBMYSBsYXZvcmF6aW9uZSBcIiR7bGF2b3JhemlvbmUudGl0b2xvfVwiIG5lbCBjb25kb21pbmlvIHNjYWRlIGlsICR7ZGF0YVNjYWRlbnphLnRvTG9jYWxlRGF0ZVN0cmluZygnaXQtSVQnKX1gLFxuICAgICAgdXRlbnRlX2lkOiBsYXZvcmF6aW9uZS51c2VyX2lkLFxuICAgICAgbGF2b3JhemlvbmVfaWQ6IGxhdm9yYXppb25lLmlkLFxuICAgICAgY29uZG9taW5pb19pZDogbGF2b3JhemlvbmUuY29uZG9taW5pb19pZCxcbiAgICAgIHByaW9yaXRhOiBnaW9ybmlBbnRpY2lwbyA8PSAxID8gJ3VyZ2VudGUnIDogZ2lvcm5pQW50aWNpcG8gPD0gMyA/ICdhbHRhJyA6ICdtZWRpYScsXG4gICAgICBkYXRhX3NjYWRlbnphOiBsYXZvcmF6aW9uZS5kYXRhX3NjYWRlbnphXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZmljYSBwZXIgbnVvdmEgYXNzZWduYXppb25lIHNvcHJhbGx1b2doaXN0YVxuICAgKi9cbiAgYXN5bmMgbm90aWZpY2FOdW92YUFzc2VnbmF6aW9uZShsYXZvcmF6aW9uZTogYW55LCB1dGVudGVBc3NlZ25hdG86IHN0cmluZyk6IFByb21pc2U8Tm90aWZpY2EgfCBudWxsPiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYU5vdGlmaWNhKHtcbiAgICAgIHRpcG86ICdudW92YV9hc3NlZ25hemlvbmUnLFxuICAgICAgdGl0b2xvOiAn8J+TiyBOdW92YSBsYXZvcmF6aW9uZSBhc3NlZ25hdGEnLFxuICAgICAgbWVzc2FnZ2lvOiBgVGkgw6ggc3RhdGEgYXNzZWduYXRhIGxhIGxhdm9yYXppb25lIFwiJHtsYXZvcmF6aW9uZS50aXRvbG99XCIgY29uIHByaW9yaXTDoCAke2xhdm9yYXppb25lLnByaW9yaXRhfWAsXG4gICAgICB1dGVudGVfaWQ6IHV0ZW50ZUFzc2VnbmF0byxcbiAgICAgIGxhdm9yYXppb25lX2lkOiBsYXZvcmF6aW9uZS5pZCxcbiAgICAgIGNvbmRvbWluaW9faWQ6IGxhdm9yYXppb25lLmNvbmRvbWluaW9faWQsXG4gICAgICBwcmlvcml0YTogbGF2b3JhemlvbmUucHJpb3JpdGEgPT09ICd1cmdlbnRlJyA/ICd1cmdlbnRlJyA6ICdhbHRhJ1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogTm90aWZpY2EgcGVyIGxhdm9yYXppb25lIGNvbXBsZXRhdGEgKHBlciBhZG1pbilcbiAgICovXG4gIGFzeW5jIG5vdGlmaWNhTGF2b3JhemlvbmVDb21wbGV0YXRhKGxhdm9yYXppb25lOiBhbnksIGFkbWluVXNlcnM6IHN0cmluZ1tdKTogUHJvbWlzZTxOb3RpZmljYVtdPiB7XG4gICAgY29uc3Qgbm90aWZpY2hlOiBOb3RpZmljYVtdID0gW11cblxuICAgIGZvciAoY29uc3QgYWRtaW5JZCBvZiBhZG1pblVzZXJzKSB7XG4gICAgICBjb25zdCBub3RpZmljYSA9IGF3YWl0IHRoaXMuY3JlYU5vdGlmaWNhKHtcbiAgICAgICAgdGlwbzogJ2xhdm9yYXppb25lX2NvbXBsZXRhdGEnLFxuICAgICAgICB0aXRvbG86ICfinIUgTGF2b3JhemlvbmUgY29tcGxldGF0YScsXG4gICAgICAgIG1lc3NhZ2dpbzogYExhIGxhdm9yYXppb25lIFwiJHtsYXZvcmF6aW9uZS50aXRvbG99XCIgw6ggc3RhdGEgY29tcGxldGF0YSBkYWwgc29wcmFsbHVvZ2hpc3RhYCxcbiAgICAgICAgdXRlbnRlX2lkOiBhZG1pbklkLFxuICAgICAgICBsYXZvcmF6aW9uZV9pZDogbGF2b3JhemlvbmUuaWQsXG4gICAgICAgIGNvbmRvbWluaW9faWQ6IGxhdm9yYXppb25lLmNvbmRvbWluaW9faWQsXG4gICAgICAgIHByaW9yaXRhOiAnbWVkaWEnXG4gICAgICB9KVxuXG4gICAgICBpZiAobm90aWZpY2EpIG5vdGlmaWNoZS5wdXNoKG5vdGlmaWNhKVxuICAgIH1cblxuICAgIHJldHVybiBub3RpZmljaGVcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhIHJlbWluZGVyIHBlcnNvbmFsaXp6YXRvXG4gICAqL1xuICBhc3luYyBjcmVhUmVtaW5kZXJQZXJzb25hbGl6emF0byhjb25maWc6IFJlbWluZGVyQ29uZmlnLCBtZXNzYWdnaW86IHN0cmluZyk6IFByb21pc2U8Tm90aWZpY2EgfCBudWxsPiB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYU5vdGlmaWNhKHtcbiAgICAgIHRpcG86ICdyZW1pbmRlcl9wZXJzb25hbGl6emF0bycsXG4gICAgICB0aXRvbG86IGDwn5SUICR7Y29uZmlnLm5vbWV9YCxcbiAgICAgIG1lc3NhZ2dpbyxcbiAgICAgIHV0ZW50ZV9pZDogY29uZmlnLnV0ZW50ZV9pZCxcbiAgICAgIHByaW9yaXRhOiAnbWVkaWEnXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWN1cGVyYSBub3RpZmljaGUgbm9uIGxldHRlIHBlciB1dGVudGVcbiAgICovXG4gIGFzeW5jIGdldE5vdGlmaWNoZU5vbkxldHRlKHV0ZW50ZUlkOiBzdHJpbmcpOiBQcm9taXNlPE5vdGlmaWNhW10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ25vdGlmaWNoZScpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuZXEoJ3V0ZW50ZV9pZCcsIHV0ZW50ZUlkKVxuICAgICAgICAuZXEoJ2xldHRhJywgZmFsc2UpXG4gICAgICAgIC5vcmRlcignZGF0YV9jcmVhemlvbmUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgICAgLmxpbWl0KDUwKVxuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yZSByZWN1cGVybyBub3RpZmljaGU6JywgZXJyb3IpXG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gKGRhdGEgYXMgTm90aWZpY2FbXSkgfHwgW11cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3JlIGNyaXRpY28gcmVjdXBlcm8gbm90aWZpY2hlOicsIGVycm9yKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1hcmNhIG5vdGlmaWNhIGNvbWUgbGV0dGFcbiAgICovXG4gIGFzeW5jIG1hcmNhQ29tZUxldHRhKG5vdGlmaWNhSWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnbm90aWZpY2hlJylcbiAgICAgICAgLnVwZGF0ZSh7IGxldHRhOiB0cnVlIH0pXG4gICAgICAgIC5lcSgnaWQnLCBub3RpZmljYUlkKVxuXG4gICAgICByZXR1cm4gIWVycm9yXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvcmUgbWFyY2EgY29tZSBsZXR0YTonLCBlcnJvcilcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJjYSB0dXR0ZSBsZSBub3RpZmljaGUgY29tZSBsZXR0ZSBwZXIgdW4gdXRlbnRlXG4gICAqL1xuICBhc3luYyBtYXJjYVR1dHRlQ29tZUxldHRlKHV0ZW50ZUlkOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ25vdGlmaWNoZScpXG4gICAgICAgIC51cGRhdGUoeyBsZXR0YTogdHJ1ZSB9KVxuICAgICAgICAuZXEoJ3V0ZW50ZV9pZCcsIHV0ZW50ZUlkKVxuICAgICAgICAuZXEoJ2xldHRhJywgZmFsc2UpXG5cbiAgICAgIHJldHVybiAhZXJyb3JcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yZSBtYXJjYSB0dXR0ZSBjb21lIGxldHRlOicsIGVycm9yKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNvdHRvc2NyaXZpIGEgbm90aWZpY2hlIHJlYWwtdGltZSBwZXIgdW4gdXRlbnRlXG4gICAqL1xuICBzdWJzY3JpYmUodXRlbnRlSWQ6IHN0cmluZywgY2FsbGJhY2s6IChub3RpZmljYXRpb246IE5vdGlmaWNhKSA9PiB2b2lkKTogKCkgPT4gdm9pZCB7XG4gICAgdGhpcy5zdWJzY3JpYmVycy5zZXQodXRlbnRlSWQsIGNhbGxiYWNrKVxuXG4gICAgLy8gUml0b3JuYSBmdW56aW9uZSBkaSB1bnN1YnNjcmliZVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLnN1YnNjcmliZXJzLmRlbGV0ZSh1dGVudGVJZClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW52aWEgbm90aWZpY2EgcmVhbC10aW1lIGFpIHN1YnNjcmliZXJcbiAgICovXG4gIHByaXZhdGUgaW52aWFOb3RpZmljYVJlYWxUaW1lKG5vdGlmaWNhOiBOb3RpZmljYSk6IHZvaWQge1xuICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5zdWJzY3JpYmVycy5nZXQobm90aWZpY2EudXRlbnRlX2lkKVxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2sobm90aWZpY2EpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVXRpbGl0eSBwZXIgY29udHJvbGxvIHNjYWRlbnplIGxhdm9yYXppb25pXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb250cm9sbGFTY2FkZW56ZUxhdm9yYXppb25pKCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zb2xlLmxvZygn8J+UjSBDb250cm9sbG8gc2NhZGVuemUgbGF2b3JhemlvbmkuLi4nKVxuXG4gIHRyeSB7XG4gICAgY29uc3Qgbm90aWZpY2F0aW9uTWFuYWdlciA9IE5vdGlmaWNhdGlvbk1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxuXG4gICAgLy8gUXVlcnkgbGF2b3JhemlvbmkgYXR0aXZlIGNvbiBzY2FkZW56YSBuZWkgcHJvc3NpbWkgZ2lvcm5pXG4gICAgY29uc3QgZGF0YU9nZ2kgPSBuZXcgRGF0ZSgpXG4gICAgY29uc3QgdHJhN0dpb3JuaSA9IG5ldyBEYXRlKClcbiAgICB0cmE3R2lvcm5pLnNldERhdGUoZGF0YU9nZ2kuZ2V0RGF0ZSgpICsgNylcblxuICAgIGNvbnN0IHsgZGF0YTogbGF2b3JhemlvbmksIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2xhdm9yYXppb25pJylcbiAgICAgIC5zZWxlY3QoYFxuICAgICAgICBpZCwgdGl0b2xvLCBkYXRhX3NjYWRlbnphLCB1c2VyX2lkLCBjb25kb21pbmlvX2lkLCBwcmlvcml0YSxcbiAgICAgICAgY29uZG9taW5pIWlubmVyKG5vbWUpXG4gICAgICBgKVxuICAgICAgLmluKCdzdGF0bycsIFsnZGFfZXNlZ3VpcmUnLCAnaW5fY29yc28nLCAncmlhcGVydGEnXSlcbiAgICAgIC5ndGUoJ2RhdGFfc2NhZGVuemEnLCBkYXRhT2dnaS50b0lTT1N0cmluZygpKVxuICAgICAgLmx0ZSgnZGF0YV9zY2FkZW56YScsIHRyYTdHaW9ybmkudG9JU09TdHJpbmcoKSlcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yZSBxdWVyeSBzY2FkZW56ZTonLCBlcnJvcilcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICghbGF2b3JhemlvbmkgfHwgbGF2b3JhemlvbmkubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIE5lc3N1bmEgc2NhZGVuemEgaW1taW5lbnRlJylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDij7AgVHJvdmF0ZSAke2xhdm9yYXppb25pLmxlbmd0aH0gbGF2b3JhemlvbmkgaW4gc2NhZGVuemFgKVxuXG4gICAgLy8gQ3JlYSBub3RpZmljaGUgcGVyIG9nbmkgbGF2b3JhemlvbmVcbiAgICBmb3IgKGNvbnN0IGxhdm9yYXppb25lIG9mIGxhdm9yYXppb25pKSB7XG4gICAgICBjb25zdCBkYXRhU2NhZGVuemEgPSBuZXcgRGF0ZShsYXZvcmF6aW9uZS5kYXRhX3NjYWRlbnphKVxuICAgICAgY29uc3QgZ2lvcm5pUmltYW5lbnRpID0gTWF0aC5jZWlsKChkYXRhU2NhZGVuemEuZ2V0VGltZSgpIC0gZGF0YU9nZ2kuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSlcblxuICAgICAgLy8gTm90aWZpY2EgYSA3LCAzLCAxIGdpb3JuaSBlIGlsIGdpb3JubyBzdGVzc29cbiAgICAgIGlmIChbNywgMywgMSwgMF0uaW5jbHVkZXMoZ2lvcm5pUmltYW5lbnRpKSkge1xuICAgICAgICBhd2FpdCBub3RpZmljYXRpb25NYW5hZ2VyLm5vdGlmaWNhU2NhZGVuemFJbW1pbmVudGUobGF2b3JhemlvbmUsIGdpb3JuaVJpbWFuZW50aSlcbiAgICAgIH1cbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3JlIGNyaXRpY28gY29udHJvbGxvIHNjYWRlbnplOicsIGVycm9yKVxuICB9XG59XG5cbi8qKlxuICogVXRpbGl0eSBwZXIgb3R0ZW5lcmUgYWRtaW4gdXNlcnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFkbWluVXNlcnMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YTogYWRtaW5zLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAuZXEoJ3JvbGUnLCAnYWRtaW4nKVxuICAgICAgLmVxKCdhdHRpdm8nLCB0cnVlKVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3JlIHJlY3VwZXJvIGFkbWluOicsIGVycm9yKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuXG4gICAgcmV0dXJuIGFkbWlucz8ubWFwKGFkbWluID0+IGFkbWluLmlkKSB8fCBbXVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvcmUgY3JpdGljbyByZWN1cGVybyBhZG1pbjonLCBlcnJvcilcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOb3RpZmljYXRpb25NYW5hZ2VyIl0sIm5hbWVzIjpbInN1cGFiYXNlIiwiTm90aWZpY2F0aW9uTWFuYWdlciIsImdldEluc3RhbmNlIiwiaW5zdGFuY2UiLCJjcmVhTm90aWZpY2EiLCJkYXRpTm90aWZpY2EiLCJudW92YU5vdGlmaWNhIiwibGV0dGEiLCJkYXRhX2NyZWF6aW9uZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwiaW5zZXJ0Iiwic2VsZWN0Iiwic2luZ2xlIiwibm90aWZpY2EiLCJpZCIsImludmlhTm90aWZpY2FSZWFsVGltZSIsIm5vdGlmaWNhU2NhZGVuemFJbW1pbmVudGUiLCJsYXZvcmF6aW9uZSIsImdpb3JuaUFudGljaXBvIiwiZGF0YVNjYWRlbnphIiwiZGF0YV9zY2FkZW56YSIsImRhdGFOb3RpZmljYSIsInNldERhdGUiLCJnZXREYXRlIiwidGlwbyIsInRpdG9sbyIsIm1lc3NhZ2dpbyIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInV0ZW50ZV9pZCIsInVzZXJfaWQiLCJsYXZvcmF6aW9uZV9pZCIsImNvbmRvbWluaW9faWQiLCJwcmlvcml0YSIsIm5vdGlmaWNhTnVvdmFBc3NlZ25hemlvbmUiLCJ1dGVudGVBc3NlZ25hdG8iLCJub3RpZmljYUxhdm9yYXppb25lQ29tcGxldGF0YSIsImFkbWluVXNlcnMiLCJub3RpZmljaGUiLCJhZG1pbklkIiwicHVzaCIsImNyZWFSZW1pbmRlclBlcnNvbmFsaXp6YXRvIiwiY29uZmlnIiwibm9tZSIsImdldE5vdGlmaWNoZU5vbkxldHRlIiwidXRlbnRlSWQiLCJlcSIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibGltaXQiLCJtYXJjYUNvbWVMZXR0YSIsIm5vdGlmaWNhSWQiLCJ1cGRhdGUiLCJtYXJjYVR1dHRlQ29tZUxldHRlIiwic3Vic2NyaWJlIiwiY2FsbGJhY2siLCJzdWJzY3JpYmVycyIsInNldCIsImRlbGV0ZSIsImdldCIsIk1hcCIsImNvbnRyb2xsYVNjYWRlbnplTGF2b3JhemlvbmkiLCJub3RpZmljYXRpb25NYW5hZ2VyIiwiZGF0YU9nZ2kiLCJ0cmE3R2lvcm5pIiwibGF2b3JhemlvbmkiLCJpbiIsImd0ZSIsImx0ZSIsImxlbmd0aCIsImdpb3JuaVJpbWFuZW50aSIsIk1hdGgiLCJjZWlsIiwiZ2V0VGltZSIsImluY2x1ZGVzIiwiZ2V0QWRtaW5Vc2VycyIsImFkbWlucyIsIm1hcCIsImFkbWluIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/notifications.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dbQuery: () => (/* binding */ dbQuery),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://ygvlcikgzkoaxlrmwsnv.supabase.co\" || 0;\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlndmxjaWtnemtvYXhscm13c252Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzOTgzMzgsImV4cCI6MjA3NDk3NDMzOH0.Zc6eihyJiTZy6WicV6MyIgZ1Oq7GwzRYR01zovQHFPs\" || 0;\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n// Funzioni helper per il database\nconst dbQuery = {\n    // Condomini\n    condomini: {\n        getAll: ()=>supabase.from(\"condomini\").select(\"*\").order(\"data_inserimento\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"condomini\").insert([\n                data\n            ]).select().single(),\n        getById: (id)=>supabase.from(\"condomini\").select(\"*\").eq(\"id\", id).single(),\n        update: (id, data)=>supabase.from(\"condomini\").update(data).eq(\"id\", id).select().single(),\n        delete: (id)=>supabase.from(\"condomini\").delete().eq(\"id\", id)\n    },\n    // Tipologie\n    tipologie: {\n        getAll: ()=>supabase.from(\"tipologie_verifiche\").select(\"*\").order(\"data_creazione\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"tipologie_verifiche\").insert([\n                data\n            ]).select().single(),\n        getById: (id)=>supabase.from(\"tipologie_verifiche\").select(\"*\").eq(\"id\", id).single(),\n        update: (id, data)=>supabase.from(\"tipologie_verifiche\").update(data).eq(\"id\", id).select().single(),\n        delete: (id)=>supabase.from(\"tipologie_verifiche\").delete().eq(\"id\", id)\n    },\n    // Verifiche\n    verifiche: {\n        getAll: ()=>supabase.from(\"verifiche\").select(\"*\").order(\"data_creazione\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"verifiche\").insert([\n                data\n            ]).select().single(),\n        getById: (id)=>supabase.from(\"verifiche\").select(\"*\").eq(\"id\", id).single(),\n        update: (id, data)=>supabase.from(\"verifiche\").update(data).eq(\"id\", id).select().single(),\n        delete: (id)=>supabase.from(\"verifiche\").delete().eq(\"id\", id)\n    },\n    // Lavorazioni\n    lavorazioni: {\n        getAll: ()=>supabase.from(\"lavorazioni\").select(\"*\").order(\"data_apertura\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"lavorazioni\").insert([\n                data\n            ]).select().single(),\n        getById: (id)=>supabase.from(\"lavorazioni\").select(\"*\").eq(\"id\", id).single(),\n        update: (id, data)=>supabase.from(\"lavorazioni\").update(data).eq(\"id\", id).select().single(),\n        delete: (id)=>supabase.from(\"lavorazioni\").delete().eq(\"id\", id)\n    },\n    // Users\n    users: {\n        getAll: ()=>supabase.from(\"users\").select(\"id, username, email, role, nome, cognome, telefono, attivo, created_at, last_login, approved_at\").order(\"created_at\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"users\").insert([\n                data\n            ]).select(\"id, username, email, role, nome, cognome, telefono, attivo, created_at\").single(),\n        getById: (id)=>supabase.from(\"users\").select(\"id, username, email, role, nome, cognome, telefono, attivo, created_at, last_login, approved_at\").eq(\"id\", id).single(),\n        getByIdFull: (id)=>supabase.from(\"users\").select(\"*\").eq(\"id\", id).single(),\n        getByUsername: (username)=>supabase.from(\"users\").select(\"*\").eq(\"username\", username).single(),\n        getByEmail: (email)=>supabase.from(\"users\").select(\"*\").eq(\"email\", email).single(),\n        update: (id, data)=>supabase.from(\"users\").update(data).eq(\"id\", id).select(\"id, username, email, role, nome, cognome, telefono, attivo, created_at, last_login, approved_at\").single(),\n        updateLastLogin: (id)=>supabase.from(\"users\").update({\n                last_login: new Date().toISOString()\n            }).eq(\"id\", id),\n        delete: (id)=>supabase.from(\"users\").delete().eq(\"id\", id)\n    },\n    // Note Personali\n    note_personali: {\n        getAll: ()=>supabase.from(\"note_personali\").select(\"*\").order(\"data_creazione\", {\n                ascending: false\n            }),\n        getAllByUser: (utente_id)=>supabase.from(\"note_personali\").select(\"*\").eq(\"utente_id\", utente_id).order(\"data_creazione\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"note_personali\").insert([\n                data\n            ]).select().single(),\n        getById: (id)=>supabase.from(\"note_personali\").select(\"*\").eq(\"id\", id).single(),\n        update: (id, data)=>supabase.from(\"note_personali\").update(data).eq(\"id\", id).select().single(),\n        delete: (id)=>supabase.from(\"note_personali\").delete().eq(\"id\", id)\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTUQ7SUFDNUU7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29uZG9taW5pLXB3YS8uL3NyYy9saWIvc3VwYWJhc2UudHM/MDZlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICdodHRwczovL3lndmxjaWtnemtvYXhscm13c252LnN1cGFiYXNlLmNvJ1xuY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSB8fCAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW5sbmRteGphV3RuZW10dllYaHNjbTEzYzI1Mklpd2ljbTlzWlNJNkltRnViMjRpTENKcFlYUWlPakUzTlRrek9UZ3pNemdzSW1WNGNDSTZNakEzTkRrM05ETXpPSDAuWmM2ZWloeUppVFp5NldpY1Y2TXlJZ1oxT3E3R3d6UllSMDF6b3ZRSEZQcydcblxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUtleSlcblxuLy8gRnVuemlvbmkgaGVscGVyIHBlciBpbCBkYXRhYmFzZVxuZXhwb3J0IGNvbnN0IGRiUXVlcnkgPSB7XG4gIC8vIENvbmRvbWluaVxuICBjb25kb21pbmk6IHtcbiAgICBnZXRBbGw6ICgpID0+IHN1cGFiYXNlLmZyb20oJ2NvbmRvbWluaScpLnNlbGVjdCgnKicpLm9yZGVyKCdkYXRhX2luc2VyaW1lbnRvJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pLFxuICAgIGNyZWF0ZTogKGRhdGE6IGFueSkgPT4gc3VwYWJhc2UuZnJvbSgnY29uZG9taW5pJykuaW5zZXJ0KFtkYXRhXSkuc2VsZWN0KCkuc2luZ2xlKCksXG4gICAgZ2V0QnlJZDogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ2NvbmRvbWluaScpLnNlbGVjdCgnKicpLmVxKCdpZCcsIGlkKS5zaW5nbGUoKSxcbiAgICB1cGRhdGU6IChpZDogc3RyaW5nLCBkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ2NvbmRvbWluaScpLnVwZGF0ZShkYXRhKS5lcSgnaWQnLCBpZCkuc2VsZWN0KCkuc2luZ2xlKCksXG4gICAgZGVsZXRlOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgnY29uZG9taW5pJykuZGVsZXRlKCkuZXEoJ2lkJywgaWQpXG4gIH0sXG5cbiAgLy8gVGlwb2xvZ2llXG4gIHRpcG9sb2dpZToge1xuICAgIGdldEFsbDogKCkgPT4gc3VwYWJhc2UuZnJvbSgndGlwb2xvZ2llX3ZlcmlmaWNoZScpLnNlbGVjdCgnKicpLm9yZGVyKCdkYXRhX2NyZWF6aW9uZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KSxcbiAgICBjcmVhdGU6IChkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ3RpcG9sb2dpZV92ZXJpZmljaGUnKS5pbnNlcnQoW2RhdGFdKS5zZWxlY3QoKS5zaW5nbGUoKSxcbiAgICBnZXRCeUlkOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgndGlwb2xvZ2llX3ZlcmlmaWNoZScpLnNlbGVjdCgnKicpLmVxKCdpZCcsIGlkKS5zaW5nbGUoKSxcbiAgICB1cGRhdGU6IChpZDogc3RyaW5nLCBkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ3RpcG9sb2dpZV92ZXJpZmljaGUnKS51cGRhdGUoZGF0YSkuZXEoJ2lkJywgaWQpLnNlbGVjdCgpLnNpbmdsZSgpLFxuICAgIGRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ3RpcG9sb2dpZV92ZXJpZmljaGUnKS5kZWxldGUoKS5lcSgnaWQnLCBpZClcbiAgfSxcblxuICAvLyBWZXJpZmljaGVcbiAgdmVyaWZpY2hlOiB7XG4gICAgZ2V0QWxsOiAoKSA9PiBzdXBhYmFzZS5mcm9tKCd2ZXJpZmljaGUnKS5zZWxlY3QoJyonKS5vcmRlcignZGF0YV9jcmVhemlvbmUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSksXG4gICAgY3JlYXRlOiAoZGF0YTogYW55KSA9PiBzdXBhYmFzZS5mcm9tKCd2ZXJpZmljaGUnKS5pbnNlcnQoW2RhdGFdKS5zZWxlY3QoKS5zaW5nbGUoKSxcbiAgICBnZXRCeUlkOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgndmVyaWZpY2hlJykuc2VsZWN0KCcqJykuZXEoJ2lkJywgaWQpLnNpbmdsZSgpLFxuICAgIHVwZGF0ZTogKGlkOiBzdHJpbmcsIGRhdGE6IGFueSkgPT4gc3VwYWJhc2UuZnJvbSgndmVyaWZpY2hlJykudXBkYXRlKGRhdGEpLmVxKCdpZCcsIGlkKS5zZWxlY3QoKS5zaW5nbGUoKSxcbiAgICBkZWxldGU6IChpZDogc3RyaW5nKSA9PiBzdXBhYmFzZS5mcm9tKCd2ZXJpZmljaGUnKS5kZWxldGUoKS5lcSgnaWQnLCBpZClcbiAgfSxcblxuICAvLyBMYXZvcmF6aW9uaVxuICBsYXZvcmF6aW9uaToge1xuICAgIGdldEFsbDogKCkgPT4gc3VwYWJhc2UuZnJvbSgnbGF2b3JhemlvbmknKS5zZWxlY3QoJyonKS5vcmRlcignZGF0YV9hcGVydHVyYScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KSxcbiAgICBjcmVhdGU6IChkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ2xhdm9yYXppb25pJykuaW5zZXJ0KFtkYXRhXSkuc2VsZWN0KCkuc2luZ2xlKCksXG4gICAgZ2V0QnlJZDogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ2xhdm9yYXppb25pJykuc2VsZWN0KCcqJykuZXEoJ2lkJywgaWQpLnNpbmdsZSgpLFxuICAgIHVwZGF0ZTogKGlkOiBzdHJpbmcsIGRhdGE6IGFueSkgPT4gc3VwYWJhc2UuZnJvbSgnbGF2b3JhemlvbmknKS51cGRhdGUoZGF0YSkuZXEoJ2lkJywgaWQpLnNlbGVjdCgpLnNpbmdsZSgpLFxuICAgIGRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ2xhdm9yYXppb25pJykuZGVsZXRlKCkuZXEoJ2lkJywgaWQpXG4gIH0sXG5cbiAgLy8gVXNlcnNcbiAgdXNlcnM6IHtcbiAgICBnZXRBbGw6ICgpID0+IHN1cGFiYXNlLmZyb20oJ3VzZXJzJykuc2VsZWN0KCdpZCwgdXNlcm5hbWUsIGVtYWlsLCByb2xlLCBub21lLCBjb2dub21lLCB0ZWxlZm9ubywgYXR0aXZvLCBjcmVhdGVkX2F0LCBsYXN0X2xvZ2luLCBhcHByb3ZlZF9hdCcpLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pLFxuICAgIGNyZWF0ZTogKGRhdGE6IGFueSkgPT4gc3VwYWJhc2UuZnJvbSgndXNlcnMnKS5pbnNlcnQoW2RhdGFdKS5zZWxlY3QoJ2lkLCB1c2VybmFtZSwgZW1haWwsIHJvbGUsIG5vbWUsIGNvZ25vbWUsIHRlbGVmb25vLCBhdHRpdm8sIGNyZWF0ZWRfYXQnKS5zaW5nbGUoKSxcbiAgICBnZXRCeUlkOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgndXNlcnMnKS5zZWxlY3QoJ2lkLCB1c2VybmFtZSwgZW1haWwsIHJvbGUsIG5vbWUsIGNvZ25vbWUsIHRlbGVmb25vLCBhdHRpdm8sIGNyZWF0ZWRfYXQsIGxhc3RfbG9naW4sIGFwcHJvdmVkX2F0JykuZXEoJ2lkJywgaWQpLnNpbmdsZSgpLFxuICAgIGdldEJ5SWRGdWxsOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgndXNlcnMnKS5zZWxlY3QoJyonKS5lcSgnaWQnLCBpZCkuc2luZ2xlKCksXG4gICAgZ2V0QnlVc2VybmFtZTogKHVzZXJuYW1lOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ3VzZXJzJykuc2VsZWN0KCcqJykuZXEoJ3VzZXJuYW1lJywgdXNlcm5hbWUpLnNpbmdsZSgpLFxuICAgIGdldEJ5RW1haWw6IChlbWFpbDogc3RyaW5nKSA9PiBzdXBhYmFzZS5mcm9tKCd1c2VycycpLnNlbGVjdCgnKicpLmVxKCdlbWFpbCcsIGVtYWlsKS5zaW5nbGUoKSxcbiAgICB1cGRhdGU6IChpZDogc3RyaW5nLCBkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ3VzZXJzJykudXBkYXRlKGRhdGEpLmVxKCdpZCcsIGlkKS5zZWxlY3QoJ2lkLCB1c2VybmFtZSwgZW1haWwsIHJvbGUsIG5vbWUsIGNvZ25vbWUsIHRlbGVmb25vLCBhdHRpdm8sIGNyZWF0ZWRfYXQsIGxhc3RfbG9naW4sIGFwcHJvdmVkX2F0Jykuc2luZ2xlKCksXG4gICAgdXBkYXRlTGFzdExvZ2luOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgndXNlcnMnKS51cGRhdGUoeyBsYXN0X2xvZ2luOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSkuZXEoJ2lkJywgaWQpLFxuICAgIGRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ3VzZXJzJykuZGVsZXRlKCkuZXEoJ2lkJywgaWQpXG4gIH0sXG5cbiAgLy8gTm90ZSBQZXJzb25hbGlcbiAgbm90ZV9wZXJzb25hbGk6IHtcbiAgICBnZXRBbGw6ICgpID0+IHN1cGFiYXNlLmZyb20oJ25vdGVfcGVyc29uYWxpJykuc2VsZWN0KCcqJykub3JkZXIoJ2RhdGFfY3JlYXppb25lJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pLFxuICAgIGdldEFsbEJ5VXNlcjogKHV0ZW50ZV9pZDogc3RyaW5nKSA9PiBzdXBhYmFzZS5mcm9tKCdub3RlX3BlcnNvbmFsaScpLnNlbGVjdCgnKicpLmVxKCd1dGVudGVfaWQnLCB1dGVudGVfaWQpLm9yZGVyKCdkYXRhX2NyZWF6aW9uZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KSxcbiAgICBjcmVhdGU6IChkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ25vdGVfcGVyc29uYWxpJykuaW5zZXJ0KFtkYXRhXSkuc2VsZWN0KCkuc2luZ2xlKCksXG4gICAgZ2V0QnlJZDogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ25vdGVfcGVyc29uYWxpJykuc2VsZWN0KCcqJykuZXEoJ2lkJywgaWQpLnNpbmdsZSgpLFxuICAgIHVwZGF0ZTogKGlkOiBzdHJpbmcsIGRhdGE6IGFueSkgPT4gc3VwYWJhc2UuZnJvbSgnbm90ZV9wZXJzb25hbGknKS51cGRhdGUoZGF0YSkuZXEoJ2lkJywgaWQpLnNlbGVjdCgpLnNpbmdsZSgpLFxuICAgIGRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ25vdGVfcGVyc29uYWxpJykuZGVsZXRlKCkuZXEoJ2lkJywgaWQpXG4gIH1cbn0iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VLZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiZGJRdWVyeSIsImNvbmRvbWluaSIsImdldEFsbCIsImZyb20iLCJzZWxlY3QiLCJvcmRlciIsImFzY2VuZGluZyIsImNyZWF0ZSIsImRhdGEiLCJpbnNlcnQiLCJzaW5nbGUiLCJnZXRCeUlkIiwiaWQiLCJlcSIsInVwZGF0ZSIsImRlbGV0ZSIsInRpcG9sb2dpZSIsInZlcmlmaWNoZSIsImxhdm9yYXppb25pIiwidXNlcnMiLCJnZXRCeUlkRnVsbCIsImdldEJ5VXNlcm5hbWUiLCJ1c2VybmFtZSIsImdldEJ5RW1haWwiLCJlbWFpbCIsInVwZGF0ZUxhc3RMb2dpbiIsImxhc3RfbG9naW4iLCJEYXRlIiwidG9JU09TdHJpbmciLCJub3RlX3BlcnNvbmFsaSIsImdldEFsbEJ5VXNlciIsInV0ZW50ZV9pZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fnotifications%2Fscheduler%2Froute&page=%2Fapi%2Fnotifications%2Fscheduler%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnotifications%2Fscheduler%2Froute.ts&appDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();