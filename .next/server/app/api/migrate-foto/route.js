"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/migrate-foto/route";
exports.ids = ["app/api/migrate-foto/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmigrate-foto%2Froute&page=%2Fapi%2Fmigrate-foto%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmigrate-foto%2Froute.ts&appDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmigrate-foto%2Froute&page=%2Fapi%2Fmigrate-foto%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmigrate-foto%2Froute.ts&appDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_akirayouky_Desktop_Siti_Condomini_src_app_api_migrate_foto_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/migrate-foto/route.ts */ \"(rsc)/./src/app/api/migrate-foto/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/migrate-foto/route\",\n        pathname: \"/api/migrate-foto\",\n        filename: \"route\",\n        bundlePath: \"app/api/migrate-foto/route\"\n    },\n    resolvedPagePath: \"/Users/akirayouky/Desktop/Siti/Condomini/src/app/api/migrate-foto/route.ts\",\n    nextConfigOutput,\n    userland: _Users_akirayouky_Desktop_Siti_Condomini_src_app_api_migrate_foto_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/migrate-foto/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtaWdyYXRlLWZvdG8lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm1pZ3JhdGUtZm90byUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm1pZ3JhdGUtZm90byUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFraXJheW91a3klMkZEZXNrdG9wJTJGU2l0aSUyRkNvbmRvbWluaSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZha2lyYXlvdWt5JTJGRGVza3RvcCUyRlNpdGklMkZDb25kb21pbmkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzBCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29uZG9taW5pLXB3YS8/NGZkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvYWtpcmF5b3VreS9EZXNrdG9wL1NpdGkvQ29uZG9taW5pL3NyYy9hcHAvYXBpL21pZ3JhdGUtZm90by9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbWlncmF0ZS1mb3RvL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbWlncmF0ZS1mb3RvXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9taWdyYXRlLWZvdG8vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvYWtpcmF5b3VreS9EZXNrdG9wL1NpdGkvQ29uZG9taW5pL3NyYy9hcHAvYXBpL21pZ3JhdGUtZm90by9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvbWlncmF0ZS1mb3RvL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmigrate-foto%2Froute&page=%2Fapi%2Fmigrate-foto%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmigrate-foto%2Froute.ts&appDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/migrate-foto/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/migrate-foto/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _scripts_migrate_foto_cloudinary__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/scripts/migrate-foto-cloudinary */ \"(rsc)/./src/scripts/migrate-foto-cloudinary.ts\");\n/**\n * API Route per migrazione foto Base64 → Cloudinary\n * POST /api/migrate-foto\n * \n * ATTENZIONE: Usa solo in sviluppo con backup database!\n */ \n\nasync function POST(request) {\n    try {\n        // Security check - solo in sviluppo\n        if (false) {}\n        const { action, lavorazioneId } = await request.json();\n        console.log(\"\\uD83D\\uDD04 API Migrazione foto - Action:\", action);\n        switch(action){\n            case \"migrate-all\":\n                console.log(\"\\uD83D\\uDE80 Avvio migrazione completa...\");\n                const risultato = await (0,_scripts_migrate_foto_cloudinary__WEBPACK_IMPORTED_MODULE_1__.migrateFotoToCloudinary)();\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: \"Migrazione completata\",\n                    data: risultato\n                });\n            case \"test-single\":\n                if (!lavorazioneId) {\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        success: false,\n                        error: \"lavorazioneId richiesto per test\"\n                    }, {\n                        status: 400\n                    });\n                }\n                console.log(`🧪 Test migrazione singola lavorazione: ${lavorazioneId}`);\n                const risultatoTest = await (0,_scripts_migrate_foto_cloudinary__WEBPACK_IMPORTED_MODULE_1__.testMigrazioneLavorazione)(lavorazioneId);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    message: \"Test migrazione completato\",\n                    data: risultatoTest\n                });\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Action non valida. Usa: migrate-all o test-single\"\n                }, {\n                    status: 400\n                });\n        }\n    } catch (error) {\n        console.error(\"❌ Errore API migrazione:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Errore interno durante migrazione\",\n            details: error instanceof Error ? error.message : \"Errore sconosciuto\"\n        }, {\n            status: 500\n        });\n    }\n}\n// GET per info migrazione\nasync function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        message: \"API Migrazione Foto Base64 → Cloudinary\",\n        endpoints: {\n            \"POST /api/migrate-foto\": {\n                description: \"Esegui migrazione foto\",\n                actions: {\n                    \"migrate-all\": \"Migra tutte le lavorazioni con foto Base64\",\n                    \"test-single\": \"Test migrazione singola lavorazione (richiede lavorazioneId)\"\n                },\n                example: {\n                    \"migrate-all\": '{ \"action\": \"migrate-all\" }',\n                    \"test-single\": '{ \"action\": \"test-single\", \"lavorazioneId\": \"uuid\" }'\n                }\n            }\n        },\n        warning: \"Disponibile solo in sviluppo. Fai sempre backup prima della migrazione!\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9taWdyYXRlLWZvdG8vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7OztDQUtDLEdBRXNEO0FBQytDO0FBRS9GLGVBQWVHLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixvQ0FBb0M7UUFDcEMsSUFBSUMsS0FBeUIsRUFBYyxFQVExQztRQUVELE1BQU0sRUFBRUssTUFBTSxFQUFFQyxhQUFhLEVBQUUsR0FBRyxNQUFNUCxRQUFRRSxJQUFJO1FBRXBETSxRQUFRQyxHQUFHLENBQUMsOENBQW9DSDtRQUVoRCxPQUFRQTtZQUNOLEtBQUs7Z0JBQ0hFLFFBQVFDLEdBQUcsQ0FBQztnQkFDWixNQUFNQyxZQUFZLE1BQU1iLHlGQUF1QkE7Z0JBRS9DLE9BQU9ELHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7b0JBQ3ZCQyxTQUFTO29CQUNUUSxTQUFTO29CQUNUQyxNQUFNRjtnQkFDUjtZQUVGLEtBQUs7Z0JBQ0gsSUFBSSxDQUFDSCxlQUFlO29CQUNsQixPQUFPWCxxREFBWUEsQ0FBQ00sSUFBSSxDQUN0Qjt3QkFBRUMsU0FBUzt3QkFBT0MsT0FBTztvQkFBbUMsR0FDNUQ7d0JBQUVDLFFBQVE7b0JBQUk7Z0JBRWxCO2dCQUVBRyxRQUFRQyxHQUFHLENBQUMsQ0FBQyx3Q0FBd0MsRUFBRUYsY0FBYyxDQUFDO2dCQUN0RSxNQUFNTSxnQkFBZ0IsTUFBTWYsMkZBQXlCQSxDQUFDUztnQkFFdEQsT0FBT1gscURBQVlBLENBQUNNLElBQUksQ0FBQztvQkFDdkJDLFNBQVM7b0JBQ1RRLFNBQVM7b0JBQ1RDLE1BQU1DO2dCQUNSO1lBRUY7Z0JBQ0UsT0FBT2pCLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO29CQUFFQyxTQUFTO29CQUFPQyxPQUFPO2dCQUFvRCxHQUM3RTtvQkFBRUMsUUFBUTtnQkFBSTtRQUVwQjtJQUVGLEVBQUUsT0FBT0QsT0FBTztRQUNkSSxRQUFRSixLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPUixxREFBWUEsQ0FBQ00sSUFBSSxDQUN0QjtZQUNFQyxTQUFTO1lBQ1RDLE9BQU87WUFDUFUsU0FBU1YsaUJBQWlCVyxRQUFRWCxNQUFNTyxPQUFPLEdBQUc7UUFDcEQsR0FDQTtZQUFFTixRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLDBCQUEwQjtBQUNuQixlQUFlVztJQUNwQixPQUFPcEIscURBQVlBLENBQUNNLElBQUksQ0FBQztRQUN2QkMsU0FBUztRQUNUUSxTQUFTO1FBQ1RNLFdBQVc7WUFDVCwwQkFBMEI7Z0JBQ3hCQyxhQUFhO2dCQUNiQyxTQUFTO29CQUNQLGVBQWU7b0JBQ2YsZUFBZTtnQkFDakI7Z0JBQ0FDLFNBQVM7b0JBQ1AsZUFBZTtvQkFDZixlQUFlO2dCQUNqQjtZQUNGO1FBQ0Y7UUFDQUMsU0FBUztJQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb25kb21pbmktcHdhLy4vc3JjL2FwcC9hcGkvbWlncmF0ZS1mb3RvL3JvdXRlLnRzPzBiYzkiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBUEkgUm91dGUgcGVyIG1pZ3JhemlvbmUgZm90byBCYXNlNjQg4oaSIENsb3VkaW5hcnlcbiAqIFBPU1QgL2FwaS9taWdyYXRlLWZvdG9cbiAqIFxuICogQVRURU5aSU9ORTogVXNhIHNvbG8gaW4gc3ZpbHVwcG8gY29uIGJhY2t1cCBkYXRhYmFzZSFcbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBtaWdyYXRlRm90b1RvQ2xvdWRpbmFyeSwgdGVzdE1pZ3JhemlvbmVMYXZvcmF6aW9uZSB9IGZyb20gJ0Avc2NyaXB0cy9taWdyYXRlLWZvdG8tY2xvdWRpbmFyeSdcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBTZWN1cml0eSBjaGVjayAtIHNvbG8gaW4gc3ZpbHVwcG9cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgICBlcnJvcjogJ01pZ3JhemlvbmUgZGlzcG9uaWJpbGUgc29sbyBpbiBzdmlsdXBwbyBwZXIgc2ljdXJlenphJyBcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgeyBhY3Rpb24sIGxhdm9yYXppb25lSWQgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG5cbiAgICBjb25zb2xlLmxvZygn8J+UhCBBUEkgTWlncmF6aW9uZSBmb3RvIC0gQWN0aW9uOicsIGFjdGlvbilcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdtaWdyYXRlLWFsbCc6XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5qAIEF2dmlvIG1pZ3JhemlvbmUgY29tcGxldGEuLi4nKVxuICAgICAgICBjb25zdCByaXN1bHRhdG8gPSBhd2FpdCBtaWdyYXRlRm90b1RvQ2xvdWRpbmFyeSgpXG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogJ01pZ3JhemlvbmUgY29tcGxldGF0YScsXG4gICAgICAgICAgZGF0YTogcmlzdWx0YXRvXG4gICAgICAgIH0pXG5cbiAgICAgIGNhc2UgJ3Rlc3Qtc2luZ2xlJzpcbiAgICAgICAgaWYgKCFsYXZvcmF6aW9uZUlkKSB7XG4gICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdsYXZvcmF6aW9uZUlkIHJpY2hpZXN0byBwZXIgdGVzdCcgfSxcbiAgICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn6eqIFRlc3QgbWlncmF6aW9uZSBzaW5nb2xhIGxhdm9yYXppb25lOiAke2xhdm9yYXppb25lSWR9YClcbiAgICAgICAgY29uc3QgcmlzdWx0YXRvVGVzdCA9IGF3YWl0IHRlc3RNaWdyYXppb25lTGF2b3JhemlvbmUobGF2b3JhemlvbmVJZClcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnVGVzdCBtaWdyYXppb25lIGNvbXBsZXRhdG8nLFxuICAgICAgICAgIGRhdGE6IHJpc3VsdGF0b1Rlc3RcbiAgICAgICAgfSlcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQWN0aW9uIG5vbiB2YWxpZGEuIFVzYTogbWlncmF0ZS1hbGwgbyB0ZXN0LXNpbmdsZScgfSxcbiAgICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICAgKVxuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvcmUgQVBJIG1pZ3JhemlvbmU6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogJ0Vycm9yZSBpbnRlcm5vIGR1cmFudGUgbWlncmF6aW9uZScsXG4gICAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0Vycm9yZSBzY29ub3NjaXV0bydcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuLy8gR0VUIHBlciBpbmZvIG1pZ3JhemlvbmVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgc3VjY2VzczogdHJ1ZSxcbiAgICBtZXNzYWdlOiAnQVBJIE1pZ3JhemlvbmUgRm90byBCYXNlNjQg4oaSIENsb3VkaW5hcnknLFxuICAgIGVuZHBvaW50czoge1xuICAgICAgJ1BPU1QgL2FwaS9taWdyYXRlLWZvdG8nOiB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiAnRXNlZ3VpIG1pZ3JhemlvbmUgZm90bycsXG4gICAgICAgIGFjdGlvbnM6IHtcbiAgICAgICAgICAnbWlncmF0ZS1hbGwnOiAnTWlncmEgdHV0dGUgbGUgbGF2b3JhemlvbmkgY29uIGZvdG8gQmFzZTY0JyxcbiAgICAgICAgICAndGVzdC1zaW5nbGUnOiAnVGVzdCBtaWdyYXppb25lIHNpbmdvbGEgbGF2b3JhemlvbmUgKHJpY2hpZWRlIGxhdm9yYXppb25lSWQpJ1xuICAgICAgICB9LFxuICAgICAgICBleGFtcGxlOiB7XG4gICAgICAgICAgJ21pZ3JhdGUtYWxsJzogJ3sgXCJhY3Rpb25cIjogXCJtaWdyYXRlLWFsbFwiIH0nLFxuICAgICAgICAgICd0ZXN0LXNpbmdsZSc6ICd7IFwiYWN0aW9uXCI6IFwidGVzdC1zaW5nbGVcIiwgXCJsYXZvcmF6aW9uZUlkXCI6IFwidXVpZFwiIH0nXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHdhcm5pbmc6ICdEaXNwb25pYmlsZSBzb2xvIGluIHN2aWx1cHBvLiBGYWkgc2VtcHJlIGJhY2t1cCBwcmltYSBkZWxsYSBtaWdyYXppb25lISdcbiAgfSlcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibWlncmF0ZUZvdG9Ub0Nsb3VkaW5hcnkiLCJ0ZXN0TWlncmF6aW9uZUxhdm9yYXppb25lIiwiUE9TVCIsInJlcXVlc3QiLCJwcm9jZXNzIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsImFjdGlvbiIsImxhdm9yYXppb25lSWQiLCJjb25zb2xlIiwibG9nIiwicmlzdWx0YXRvIiwibWVzc2FnZSIsImRhdGEiLCJyaXN1bHRhdG9UZXN0IiwiZGV0YWlscyIsIkVycm9yIiwiR0VUIiwiZW5kcG9pbnRzIiwiZGVzY3JpcHRpb24iLCJhY3Rpb25zIiwiZXhhbXBsZSIsIndhcm5pbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/migrate-foto/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/cloudinary.ts":
/*!*******************************!*\
  !*** ./src/lib/cloudinary.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   deleteFotoCloudinary: () => (/* binding */ deleteFotoCloudinary),\n/* harmony export */   getFotoLavorazione: () => (/* binding */ getFotoLavorazione),\n/* harmony export */   getOptimizedImageUrl: () => (/* binding */ getOptimizedImageUrl),\n/* harmony export */   getThumbnailUrl: () => (/* binding */ getThumbnailUrl),\n/* harmony export */   uploadFotoLavorazione: () => (/* binding */ uploadFotoLavorazione)\n/* harmony export */ });\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cloudinary */ \"(rsc)/./node_modules/cloudinary/cloudinary.js\");\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(cloudinary__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * Configurazione Cloudinary per gestione foto delle lavorazioni\n */ \n// Configurazione server-side\ncloudinary__WEBPACK_IMPORTED_MODULE_0__.v2.config({\n    cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n    api_key: process.env.CLOUDINARY_API_KEY,\n    api_secret: process.env.CLOUDINARY_API_SECRET\n});\n/**\n * Upload foto su Cloudinary con organizzazione per lavorazioni\n */ const uploadFotoLavorazione = async (fotoBase64, lavorazioneId, fotoIndex)=>{\n    try {\n        // Genera public_id univoco: lavorazione-{id}/foto-{index}-{timestamp}\n        const timestamp = Date.now();\n        const publicId = `lavorazioni/${lavorazioneId}/foto-${fotoIndex}-${timestamp}`;\n        console.log(\"\\uD83D\\uDCE4 Uploading foto to Cloudinary:\", {\n            lavorazioneId,\n            fotoIndex,\n            publicId\n        });\n        // Upload su Cloudinary\n        const result = await cloudinary__WEBPACK_IMPORTED_MODULE_0__.v2.uploader.upload(fotoBase64, {\n            public_id: publicId,\n            folder: \"condomini-app/lavorazioni\",\n            resource_type: \"image\",\n            transformation: [\n                // Ottimizzazione automatica\n                {\n                    quality: \"auto\",\n                    fetch_format: \"auto\"\n                },\n                // Resize se troppo grande\n                {\n                    width: 1920,\n                    height: 1920,\n                    crop: \"limit\"\n                }\n            ],\n            // Genera anche thumbnail\n            eager: [\n                {\n                    width: 300,\n                    height: 300,\n                    crop: \"fill\",\n                    quality: \"auto\"\n                },\n                {\n                    width: 150,\n                    height: 150,\n                    crop: \"thumb\",\n                    gravity: \"face\"\n                }\n            ]\n        });\n        console.log(\"✅ Foto uploaded successfully:\", result.secure_url);\n        return {\n            url: result.secure_url,\n            publicId: result.public_id\n        };\n    } catch (error) {\n        console.error(\"❌ Errore upload Cloudinary:\", error);\n        throw new Error(\"Errore durante l'upload della foto\");\n    }\n};\n/**\n * Elimina foto da Cloudinary\n */ const deleteFotoCloudinary = async (publicId)=>{\n    try {\n        console.log(\"\\uD83D\\uDDD1️ Deleting foto from Cloudinary:\", publicId);\n        const result = await cloudinary__WEBPACK_IMPORTED_MODULE_0__.v2.uploader.destroy(publicId);\n        console.log(\"✅ Foto deleted:\", result);\n        return result.result === \"ok\";\n    } catch (error) {\n        console.error(\"❌ Errore eliminazione Cloudinary:\", error);\n        return false;\n    }\n};\n/**\n * Genera URL ottimizzato per diverse dimensioni\n */ const getOptimizedImageUrl = (publicId, options = {})=>{\n    const { width = 800, height, quality = \"auto\", crop = \"limit\" } = options;\n    return cloudinary__WEBPACK_IMPORTED_MODULE_0__.v2.url(publicId, {\n        width,\n        height,\n        quality,\n        crop,\n        fetch_format: \"auto\"\n    });\n};\n/**\n * Ottieni URL thumbnail\n */ const getThumbnailUrl = (publicId, size = 150)=>{\n    return cloudinary__WEBPACK_IMPORTED_MODULE_0__.v2.url(publicId, {\n        width: size,\n        height: size,\n        crop: \"thumb\",\n        gravity: \"face\",\n        quality: \"auto\",\n        fetch_format: \"auto\"\n    });\n};\n/**\n * Lista tutte le foto di una lavorazione\n */ const getFotoLavorazione = async (lavorazioneId)=>{\n    try {\n        const result = await cloudinary__WEBPACK_IMPORTED_MODULE_0__.v2.search.expression(`folder:condomini-app/lavorazioni/${lavorazioneId}`).sort_by(\"created_at\", \"desc\").execute();\n        return result.resources.map((resource)=>({\n                url: resource.secure_url,\n                publicId: resource.public_id,\n                createdAt: resource.created_at\n            }));\n    } catch (error) {\n        console.error(\"❌ Errore recupero foto lavorazione:\", error);\n        return [];\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (cloudinary__WEBPACK_IMPORTED_MODULE_0__.v2);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2Nsb3VkaW5hcnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7Q0FFQyxHQUU0QztBQUU3Qyw2QkFBNkI7QUFDN0JDLDBDQUFVQSxDQUFDQyxNQUFNLENBQUM7SUFDaEJDLFlBQVlDLFFBQVFDLEdBQUcsQ0FBQ0MscUJBQXFCO0lBQzdDQyxTQUFTSCxRQUFRQyxHQUFHLENBQUNHLGtCQUFrQjtJQUN2Q0MsWUFBWUwsUUFBUUMsR0FBRyxDQUFDSyxxQkFBcUI7QUFDL0M7QUFFQTs7Q0FFQyxHQUNNLE1BQU1DLHdCQUF3QixPQUNuQ0MsWUFDQUMsZUFDQUM7SUFFQSxJQUFJO1FBQ0Ysc0VBQXNFO1FBQ3RFLE1BQU1DLFlBQVlDLEtBQUtDLEdBQUc7UUFDMUIsTUFBTUMsV0FBVyxDQUFDLFlBQVksRUFBRUwsY0FBYyxNQUFNLEVBQUVDLFVBQVUsQ0FBQyxFQUFFQyxVQUFVLENBQUM7UUFFOUVJLFFBQVFDLEdBQUcsQ0FBQyw4Q0FBb0M7WUFBRVA7WUFBZUM7WUFBV0k7UUFBUztRQUVyRix1QkFBdUI7UUFDdkIsTUFBTUcsU0FBUyxNQUFNcEIsMENBQVVBLENBQUNxQixRQUFRLENBQUNDLE1BQU0sQ0FBQ1gsWUFBWTtZQUMxRFksV0FBV047WUFDWE8sUUFBUTtZQUNSQyxlQUFlO1lBQ2ZDLGdCQUFnQjtnQkFDZCw0QkFBNEI7Z0JBQzVCO29CQUFFQyxTQUFTO29CQUFRQyxjQUFjO2dCQUFPO2dCQUN4QywwQkFBMEI7Z0JBQzFCO29CQUFFQyxPQUFPO29CQUFNQyxRQUFRO29CQUFNQyxNQUFNO2dCQUFRO2FBQzVDO1lBQ0QseUJBQXlCO1lBQ3pCQyxPQUFPO2dCQUNMO29CQUFFSCxPQUFPO29CQUFLQyxRQUFRO29CQUFLQyxNQUFNO29CQUFRSixTQUFTO2dCQUFPO2dCQUN6RDtvQkFBRUUsT0FBTztvQkFBS0MsUUFBUTtvQkFBS0MsTUFBTTtvQkFBU0UsU0FBUztnQkFBTzthQUMzRDtRQUNIO1FBRUFmLFFBQVFDLEdBQUcsQ0FBQyxpQ0FBaUNDLE9BQU9jLFVBQVU7UUFFOUQsT0FBTztZQUNMQyxLQUFLZixPQUFPYyxVQUFVO1lBQ3RCakIsVUFBVUcsT0FBT0csU0FBUztRQUM1QjtJQUNGLEVBQUUsT0FBT2EsT0FBTztRQUNkbEIsUUFBUWtCLEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtBQUNGLEVBQUM7QUFFRDs7Q0FFQyxHQUNNLE1BQU1DLHVCQUF1QixPQUFPckI7SUFDekMsSUFBSTtRQUNGQyxRQUFRQyxHQUFHLENBQUMsZ0RBQXNDRjtRQUVsRCxNQUFNRyxTQUFTLE1BQU1wQiwwQ0FBVUEsQ0FBQ3FCLFFBQVEsQ0FBQ2tCLE9BQU8sQ0FBQ3RCO1FBRWpEQyxRQUFRQyxHQUFHLENBQUMsbUJBQW1CQztRQUMvQixPQUFPQSxPQUFPQSxNQUFNLEtBQUs7SUFDM0IsRUFBRSxPQUFPZ0IsT0FBTztRQUNkbEIsUUFBUWtCLEtBQUssQ0FBQyxxQ0FBcUNBO1FBQ25ELE9BQU87SUFDVDtBQUNGLEVBQUM7QUFFRDs7Q0FFQyxHQUNNLE1BQU1JLHVCQUF1QixDQUNsQ3ZCLFVBQ0F3QixVQUtJLENBQUMsQ0FBQztJQUVOLE1BQU0sRUFBRVosUUFBUSxHQUFHLEVBQUVDLE1BQU0sRUFBRUgsVUFBVSxNQUFNLEVBQUVJLE9BQU8sT0FBTyxFQUFFLEdBQUdVO0lBRWxFLE9BQU96QywwQ0FBVUEsQ0FBQ21DLEdBQUcsQ0FBQ2xCLFVBQVU7UUFDOUJZO1FBQ0FDO1FBQ0FIO1FBQ0FJO1FBQ0FILGNBQWM7SUFDaEI7QUFDRixFQUFDO0FBRUQ7O0NBRUMsR0FDTSxNQUFNYyxrQkFBa0IsQ0FBQ3pCLFVBQWtCMEIsT0FBZSxHQUFHO0lBQ2xFLE9BQU8zQywwQ0FBVUEsQ0FBQ21DLEdBQUcsQ0FBQ2xCLFVBQVU7UUFDOUJZLE9BQU9jO1FBQ1BiLFFBQVFhO1FBQ1JaLE1BQU07UUFDTkUsU0FBUztRQUNUTixTQUFTO1FBQ1RDLGNBQWM7SUFDaEI7QUFDRixFQUFDO0FBRUQ7O0NBRUMsR0FDTSxNQUFNZ0IscUJBQXFCLE9BQU9oQztJQUN2QyxJQUFJO1FBQ0YsTUFBTVEsU0FBUyxNQUFNcEIsMENBQVVBLENBQUM2QyxNQUFNLENBQ25DQyxVQUFVLENBQUMsQ0FBQyxpQ0FBaUMsRUFBRWxDLGNBQWMsQ0FBQyxFQUM5RG1DLE9BQU8sQ0FBQyxjQUFjLFFBQ3RCQyxPQUFPO1FBRVYsT0FBTzVCLE9BQU82QixTQUFTLENBQUNDLEdBQUcsQ0FBQyxDQUFDQyxXQUFtQjtnQkFDOUNoQixLQUFLZ0IsU0FBU2pCLFVBQVU7Z0JBQ3hCakIsVUFBVWtDLFNBQVM1QixTQUFTO2dCQUM1QjZCLFdBQVdELFNBQVNFLFVBQVU7WUFDaEM7SUFDRixFQUFFLE9BQU9qQixPQUFPO1FBQ2RsQixRQUFRa0IsS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsT0FBTyxFQUFFO0lBQ1g7QUFDRixFQUFDO0FBRUQsaUVBQWVwQywwQ0FBVUEsRUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL2NvbmRvbWluaS1wd2EvLi9zcmMvbGliL2Nsb3VkaW5hcnkudHM/ZTFmYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbmZpZ3VyYXppb25lIENsb3VkaW5hcnkgcGVyIGdlc3Rpb25lIGZvdG8gZGVsbGUgbGF2b3JhemlvbmlcbiAqL1xuXG5pbXBvcnQgeyB2MiBhcyBjbG91ZGluYXJ5IH0gZnJvbSAnY2xvdWRpbmFyeSdcblxuLy8gQ29uZmlndXJhemlvbmUgc2VydmVyLXNpZGVcbmNsb3VkaW5hcnkuY29uZmlnKHtcbiAgY2xvdWRfbmFtZTogcHJvY2Vzcy5lbnYuQ0xPVURJTkFSWV9DTE9VRF9OQU1FLFxuICBhcGlfa2V5OiBwcm9jZXNzLmVudi5DTE9VRElOQVJZX0FQSV9LRVksXG4gIGFwaV9zZWNyZXQ6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfQVBJX1NFQ1JFVCxcbn0pXG5cbi8qKlxuICogVXBsb2FkIGZvdG8gc3UgQ2xvdWRpbmFyeSBjb24gb3JnYW5penphemlvbmUgcGVyIGxhdm9yYXppb25pXG4gKi9cbmV4cG9ydCBjb25zdCB1cGxvYWRGb3RvTGF2b3JhemlvbmUgPSBhc3luYyAoXG4gIGZvdG9CYXNlNjQ6IHN0cmluZyxcbiAgbGF2b3JhemlvbmVJZDogc3RyaW5nLFxuICBmb3RvSW5kZXg6IG51bWJlclxuKTogUHJvbWlzZTx7IHVybDogc3RyaW5nOyBwdWJsaWNJZDogc3RyaW5nIH0+ID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBHZW5lcmEgcHVibGljX2lkIHVuaXZvY286IGxhdm9yYXppb25lLXtpZH0vZm90by17aW5kZXh9LXt0aW1lc3RhbXB9XG4gICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKVxuICAgIGNvbnN0IHB1YmxpY0lkID0gYGxhdm9yYXppb25pLyR7bGF2b3JhemlvbmVJZH0vZm90by0ke2ZvdG9JbmRleH0tJHt0aW1lc3RhbXB9YFxuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5OkIFVwbG9hZGluZyBmb3RvIHRvIENsb3VkaW5hcnk6JywgeyBsYXZvcmF6aW9uZUlkLCBmb3RvSW5kZXgsIHB1YmxpY0lkIH0pXG4gICAgXG4gICAgLy8gVXBsb2FkIHN1IENsb3VkaW5hcnlcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbG91ZGluYXJ5LnVwbG9hZGVyLnVwbG9hZChmb3RvQmFzZTY0LCB7XG4gICAgICBwdWJsaWNfaWQ6IHB1YmxpY0lkLFxuICAgICAgZm9sZGVyOiAnY29uZG9taW5pLWFwcC9sYXZvcmF6aW9uaScsXG4gICAgICByZXNvdXJjZV90eXBlOiAnaW1hZ2UnLFxuICAgICAgdHJhbnNmb3JtYXRpb246IFtcbiAgICAgICAgLy8gT3R0aW1penphemlvbmUgYXV0b21hdGljYVxuICAgICAgICB7IHF1YWxpdHk6ICdhdXRvJywgZmV0Y2hfZm9ybWF0OiAnYXV0bycgfSxcbiAgICAgICAgLy8gUmVzaXplIHNlIHRyb3BwbyBncmFuZGVcbiAgICAgICAgeyB3aWR0aDogMTkyMCwgaGVpZ2h0OiAxOTIwLCBjcm9wOiAnbGltaXQnIH0sXG4gICAgICBdLFxuICAgICAgLy8gR2VuZXJhIGFuY2hlIHRodW1ibmFpbFxuICAgICAgZWFnZXI6IFtcbiAgICAgICAgeyB3aWR0aDogMzAwLCBoZWlnaHQ6IDMwMCwgY3JvcDogJ2ZpbGwnLCBxdWFsaXR5OiAnYXV0bycgfSxcbiAgICAgICAgeyB3aWR0aDogMTUwLCBoZWlnaHQ6IDE1MCwgY3JvcDogJ3RodW1iJywgZ3Jhdml0eTogJ2ZhY2UnIH1cbiAgICAgIF0sXG4gICAgfSlcblxuICAgIGNvbnNvbGUubG9nKCfinIUgRm90byB1cGxvYWRlZCBzdWNjZXNzZnVsbHk6JywgcmVzdWx0LnNlY3VyZV91cmwpXG5cbiAgICByZXR1cm4ge1xuICAgICAgdXJsOiByZXN1bHQuc2VjdXJlX3VybCxcbiAgICAgIHB1YmxpY0lkOiByZXN1bHQucHVibGljX2lkLFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3JlIHVwbG9hZCBDbG91ZGluYXJ5OicsIGVycm9yKVxuICAgIHRocm93IG5ldyBFcnJvcignRXJyb3JlIGR1cmFudGUgbFxcJ3VwbG9hZCBkZWxsYSBmb3RvJylcbiAgfVxufVxuXG4vKipcbiAqIEVsaW1pbmEgZm90byBkYSBDbG91ZGluYXJ5XG4gKi9cbmV4cG9ydCBjb25zdCBkZWxldGVGb3RvQ2xvdWRpbmFyeSA9IGFzeW5jIChwdWJsaWNJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/Cfl5HvuI8gRGVsZXRpbmcgZm90byBmcm9tIENsb3VkaW5hcnk6JywgcHVibGljSWQpXG4gICAgXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xvdWRpbmFyeS51cGxvYWRlci5kZXN0cm95KHB1YmxpY0lkKVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCfinIUgRm90byBkZWxldGVkOicsIHJlc3VsdClcbiAgICByZXR1cm4gcmVzdWx0LnJlc3VsdCA9PT0gJ29rJ1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvcmUgZWxpbWluYXppb25lIENsb3VkaW5hcnk6JywgZXJyb3IpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmEgVVJMIG90dGltaXp6YXRvIHBlciBkaXZlcnNlIGRpbWVuc2lvbmlcbiAqL1xuZXhwb3J0IGNvbnN0IGdldE9wdGltaXplZEltYWdlVXJsID0gKFxuICBwdWJsaWNJZDogc3RyaW5nLCBcbiAgb3B0aW9uczoge1xuICAgIHdpZHRoPzogbnVtYmVyXG4gICAgaGVpZ2h0PzogbnVtYmVyXG4gICAgcXVhbGl0eT86IHN0cmluZyB8IG51bWJlclxuICAgIGNyb3A/OiBzdHJpbmdcbiAgfSA9IHt9XG4pID0+IHtcbiAgY29uc3QgeyB3aWR0aCA9IDgwMCwgaGVpZ2h0LCBxdWFsaXR5ID0gJ2F1dG8nLCBjcm9wID0gJ2xpbWl0JyB9ID0gb3B0aW9uc1xuICBcbiAgcmV0dXJuIGNsb3VkaW5hcnkudXJsKHB1YmxpY0lkLCB7XG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICAgIHF1YWxpdHksXG4gICAgY3JvcCxcbiAgICBmZXRjaF9mb3JtYXQ6ICdhdXRvJyxcbiAgfSlcbn1cblxuLyoqXG4gKiBPdHRpZW5pIFVSTCB0aHVtYm5haWxcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFRodW1ibmFpbFVybCA9IChwdWJsaWNJZDogc3RyaW5nLCBzaXplOiBudW1iZXIgPSAxNTApID0+IHtcbiAgcmV0dXJuIGNsb3VkaW5hcnkudXJsKHB1YmxpY0lkLCB7XG4gICAgd2lkdGg6IHNpemUsXG4gICAgaGVpZ2h0OiBzaXplLFxuICAgIGNyb3A6ICd0aHVtYicsXG4gICAgZ3Jhdml0eTogJ2ZhY2UnLFxuICAgIHF1YWxpdHk6ICdhdXRvJyxcbiAgICBmZXRjaF9mb3JtYXQ6ICdhdXRvJyxcbiAgfSlcbn1cblxuLyoqXG4gKiBMaXN0YSB0dXR0ZSBsZSBmb3RvIGRpIHVuYSBsYXZvcmF6aW9uZVxuICovXG5leHBvcnQgY29uc3QgZ2V0Rm90b0xhdm9yYXppb25lID0gYXN5bmMgKGxhdm9yYXppb25lSWQ6IHN0cmluZykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsb3VkaW5hcnkuc2VhcmNoXG4gICAgICAuZXhwcmVzc2lvbihgZm9sZGVyOmNvbmRvbWluaS1hcHAvbGF2b3JhemlvbmkvJHtsYXZvcmF6aW9uZUlkfWApXG4gICAgICAuc29ydF9ieSgnY3JlYXRlZF9hdCcsICdkZXNjJylcbiAgICAgIC5leGVjdXRlKClcbiAgICBcbiAgICByZXR1cm4gcmVzdWx0LnJlc291cmNlcy5tYXAoKHJlc291cmNlOiBhbnkpID0+ICh7XG4gICAgICB1cmw6IHJlc291cmNlLnNlY3VyZV91cmwsXG4gICAgICBwdWJsaWNJZDogcmVzb3VyY2UucHVibGljX2lkLFxuICAgICAgY3JlYXRlZEF0OiByZXNvdXJjZS5jcmVhdGVkX2F0LFxuICAgIH0pKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvcmUgcmVjdXBlcm8gZm90byBsYXZvcmF6aW9uZTonLCBlcnJvcilcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbG91ZGluYXJ5Il0sIm5hbWVzIjpbInYyIiwiY2xvdWRpbmFyeSIsImNvbmZpZyIsImNsb3VkX25hbWUiLCJwcm9jZXNzIiwiZW52IiwiQ0xPVURJTkFSWV9DTE9VRF9OQU1FIiwiYXBpX2tleSIsIkNMT1VESU5BUllfQVBJX0tFWSIsImFwaV9zZWNyZXQiLCJDTE9VRElOQVJZX0FQSV9TRUNSRVQiLCJ1cGxvYWRGb3RvTGF2b3JhemlvbmUiLCJmb3RvQmFzZTY0IiwibGF2b3JhemlvbmVJZCIsImZvdG9JbmRleCIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJwdWJsaWNJZCIsImNvbnNvbGUiLCJsb2ciLCJyZXN1bHQiLCJ1cGxvYWRlciIsInVwbG9hZCIsInB1YmxpY19pZCIsImZvbGRlciIsInJlc291cmNlX3R5cGUiLCJ0cmFuc2Zvcm1hdGlvbiIsInF1YWxpdHkiLCJmZXRjaF9mb3JtYXQiLCJ3aWR0aCIsImhlaWdodCIsImNyb3AiLCJlYWdlciIsImdyYXZpdHkiLCJzZWN1cmVfdXJsIiwidXJsIiwiZXJyb3IiLCJFcnJvciIsImRlbGV0ZUZvdG9DbG91ZGluYXJ5IiwiZGVzdHJveSIsImdldE9wdGltaXplZEltYWdlVXJsIiwib3B0aW9ucyIsImdldFRodW1ibmFpbFVybCIsInNpemUiLCJnZXRGb3RvTGF2b3JhemlvbmUiLCJzZWFyY2giLCJleHByZXNzaW9uIiwic29ydF9ieSIsImV4ZWN1dGUiLCJyZXNvdXJjZXMiLCJtYXAiLCJyZXNvdXJjZSIsImNyZWF0ZWRBdCIsImNyZWF0ZWRfYXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/cloudinary.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dbQuery: () => (/* binding */ dbQuery),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://ygvlcikgzkoaxlrmwsnv.supabase.co\" || 0;\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlndmxjaWtnemtvYXhscm13c252Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzOTgzMzgsImV4cCI6MjA3NDk3NDMzOH0.Zc6eihyJiTZy6WicV6MyIgZ1Oq7GwzRYR01zovQHFPs\" || 0;\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n// Funzioni helper per il database\nconst dbQuery = {\n    // Condomini\n    condomini: {\n        getAll: ()=>supabase.from(\"condomini\").select(\"*\").order(\"data_inserimento\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"condomini\").insert([\n                data\n            ]).select().single(),\n        getById: (id)=>supabase.from(\"condomini\").select(\"*\").eq(\"id\", id).single(),\n        update: (id, data)=>supabase.from(\"condomini\").update(data).eq(\"id\", id).select().single(),\n        delete: (id)=>supabase.from(\"condomini\").delete().eq(\"id\", id)\n    },\n    // Tipologie\n    tipologie: {\n        getAll: ()=>supabase.from(\"tipologie_verifiche\").select(\"*\").order(\"data_creazione\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"tipologie_verifiche\").insert([\n                data\n            ]).select().single(),\n        getById: (id)=>supabase.from(\"tipologie_verifiche\").select(\"*\").eq(\"id\", id).single(),\n        update: (id, data)=>supabase.from(\"tipologie_verifiche\").update(data).eq(\"id\", id).select().single(),\n        delete: (id)=>supabase.from(\"tipologie_verifiche\").delete().eq(\"id\", id)\n    },\n    // Verifiche\n    verifiche: {\n        getAll: ()=>supabase.from(\"verifiche\").select(\"*\").order(\"data_creazione\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"verifiche\").insert([\n                data\n            ]).select().single(),\n        getById: (id)=>supabase.from(\"verifiche\").select(\"*\").eq(\"id\", id).single(),\n        update: (id, data)=>supabase.from(\"verifiche\").update(data).eq(\"id\", id).select().single(),\n        delete: (id)=>supabase.from(\"verifiche\").delete().eq(\"id\", id)\n    },\n    // Lavorazioni\n    lavorazioni: {\n        getAll: ()=>supabase.from(\"lavorazioni\").select(\"*\").order(\"data_apertura\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"lavorazioni\").insert([\n                data\n            ]).select().single(),\n        getById: (id)=>supabase.from(\"lavorazioni\").select(\"*\").eq(\"id\", id).single(),\n        update: (id, data)=>supabase.from(\"lavorazioni\").update(data).eq(\"id\", id).select().single(),\n        delete: (id)=>supabase.from(\"lavorazioni\").delete().eq(\"id\", id)\n    },\n    // Users\n    users: {\n        getAll: ()=>supabase.from(\"users\").select(\"id, username, email, role, nome, cognome, telefono, attivo, created_at, last_login, approved_at\").order(\"created_at\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"users\").insert([\n                data\n            ]).select(\"id, username, email, role, nome, cognome, telefono, attivo, created_at\").single(),\n        getById: (id)=>supabase.from(\"users\").select(\"id, username, email, role, nome, cognome, telefono, attivo, created_at, last_login, approved_at\").eq(\"id\", id).single(),\n        getByIdFull: (id)=>supabase.from(\"users\").select(\"*\").eq(\"id\", id).single(),\n        getByUsername: (username)=>supabase.from(\"users\").select(\"*\").eq(\"username\", username).single(),\n        getByEmail: (email)=>supabase.from(\"users\").select(\"*\").eq(\"email\", email).single(),\n        update: (id, data)=>supabase.from(\"users\").update(data).eq(\"id\", id).select(\"id, username, email, role, nome, cognome, telefono, attivo, created_at, last_login, approved_at\").single(),\n        updateLastLogin: (id)=>supabase.from(\"users\").update({\n                last_login: new Date().toISOString()\n            }).eq(\"id\", id),\n        delete: (id)=>supabase.from(\"users\").delete().eq(\"id\", id)\n    },\n    // Note Personali\n    note_personali: {\n        getAll: ()=>supabase.from(\"note_personali\").select(\"*\").order(\"data_creazione\", {\n                ascending: false\n            }),\n        getAllByUser: (utente_id)=>supabase.from(\"note_personali\").select(\"*\").eq(\"utente_id\", utente_id).order(\"data_creazione\", {\n                ascending: false\n            }),\n        create: (data)=>supabase.from(\"note_personali\").insert([\n                data\n            ]).select().single(),\n        getById: (id)=>supabase.from(\"note_personali\").select(\"*\").eq(\"id\", id).single(),\n        update: (id, data)=>supabase.from(\"note_personali\").update(data).eq(\"id\", id).select().single(),\n        delete: (id)=>supabase.from(\"note_personali\").delete().eq(\"id\", id)\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTUQ7SUFDNUU7QUFDRixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29uZG9taW5pLXB3YS8uL3NyYy9saWIvc3VwYWJhc2UudHM/MDZlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICdodHRwczovL3lndmxjaWtnemtvYXhscm13c252LnN1cGFiYXNlLmNvJ1xuY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSB8fCAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlNJc0luSmxaaUk2SW5sbmRteGphV3RuZW10dllYaHNjbTEzYzI1Mklpd2ljbTlzWlNJNkltRnViMjRpTENKcFlYUWlPakUzTlRrek9UZ3pNemdzSW1WNGNDSTZNakEzTkRrM05ETXpPSDAuWmM2ZWloeUppVFp5NldpY1Y2TXlJZ1oxT3E3R3d6UllSMDF6b3ZRSEZQcydcblxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUtleSlcblxuLy8gRnVuemlvbmkgaGVscGVyIHBlciBpbCBkYXRhYmFzZVxuZXhwb3J0IGNvbnN0IGRiUXVlcnkgPSB7XG4gIC8vIENvbmRvbWluaVxuICBjb25kb21pbmk6IHtcbiAgICBnZXRBbGw6ICgpID0+IHN1cGFiYXNlLmZyb20oJ2NvbmRvbWluaScpLnNlbGVjdCgnKicpLm9yZGVyKCdkYXRhX2luc2VyaW1lbnRvJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pLFxuICAgIGNyZWF0ZTogKGRhdGE6IGFueSkgPT4gc3VwYWJhc2UuZnJvbSgnY29uZG9taW5pJykuaW5zZXJ0KFtkYXRhXSkuc2VsZWN0KCkuc2luZ2xlKCksXG4gICAgZ2V0QnlJZDogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ2NvbmRvbWluaScpLnNlbGVjdCgnKicpLmVxKCdpZCcsIGlkKS5zaW5nbGUoKSxcbiAgICB1cGRhdGU6IChpZDogc3RyaW5nLCBkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ2NvbmRvbWluaScpLnVwZGF0ZShkYXRhKS5lcSgnaWQnLCBpZCkuc2VsZWN0KCkuc2luZ2xlKCksXG4gICAgZGVsZXRlOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgnY29uZG9taW5pJykuZGVsZXRlKCkuZXEoJ2lkJywgaWQpXG4gIH0sXG5cbiAgLy8gVGlwb2xvZ2llXG4gIHRpcG9sb2dpZToge1xuICAgIGdldEFsbDogKCkgPT4gc3VwYWJhc2UuZnJvbSgndGlwb2xvZ2llX3ZlcmlmaWNoZScpLnNlbGVjdCgnKicpLm9yZGVyKCdkYXRhX2NyZWF6aW9uZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KSxcbiAgICBjcmVhdGU6IChkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ3RpcG9sb2dpZV92ZXJpZmljaGUnKS5pbnNlcnQoW2RhdGFdKS5zZWxlY3QoKS5zaW5nbGUoKSxcbiAgICBnZXRCeUlkOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgndGlwb2xvZ2llX3ZlcmlmaWNoZScpLnNlbGVjdCgnKicpLmVxKCdpZCcsIGlkKS5zaW5nbGUoKSxcbiAgICB1cGRhdGU6IChpZDogc3RyaW5nLCBkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ3RpcG9sb2dpZV92ZXJpZmljaGUnKS51cGRhdGUoZGF0YSkuZXEoJ2lkJywgaWQpLnNlbGVjdCgpLnNpbmdsZSgpLFxuICAgIGRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ3RpcG9sb2dpZV92ZXJpZmljaGUnKS5kZWxldGUoKS5lcSgnaWQnLCBpZClcbiAgfSxcblxuICAvLyBWZXJpZmljaGVcbiAgdmVyaWZpY2hlOiB7XG4gICAgZ2V0QWxsOiAoKSA9PiBzdXBhYmFzZS5mcm9tKCd2ZXJpZmljaGUnKS5zZWxlY3QoJyonKS5vcmRlcignZGF0YV9jcmVhemlvbmUnLCB7IGFzY2VuZGluZzogZmFsc2UgfSksXG4gICAgY3JlYXRlOiAoZGF0YTogYW55KSA9PiBzdXBhYmFzZS5mcm9tKCd2ZXJpZmljaGUnKS5pbnNlcnQoW2RhdGFdKS5zZWxlY3QoKS5zaW5nbGUoKSxcbiAgICBnZXRCeUlkOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgndmVyaWZpY2hlJykuc2VsZWN0KCcqJykuZXEoJ2lkJywgaWQpLnNpbmdsZSgpLFxuICAgIHVwZGF0ZTogKGlkOiBzdHJpbmcsIGRhdGE6IGFueSkgPT4gc3VwYWJhc2UuZnJvbSgndmVyaWZpY2hlJykudXBkYXRlKGRhdGEpLmVxKCdpZCcsIGlkKS5zZWxlY3QoKS5zaW5nbGUoKSxcbiAgICBkZWxldGU6IChpZDogc3RyaW5nKSA9PiBzdXBhYmFzZS5mcm9tKCd2ZXJpZmljaGUnKS5kZWxldGUoKS5lcSgnaWQnLCBpZClcbiAgfSxcblxuICAvLyBMYXZvcmF6aW9uaVxuICBsYXZvcmF6aW9uaToge1xuICAgIGdldEFsbDogKCkgPT4gc3VwYWJhc2UuZnJvbSgnbGF2b3JhemlvbmknKS5zZWxlY3QoJyonKS5vcmRlcignZGF0YV9hcGVydHVyYScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KSxcbiAgICBjcmVhdGU6IChkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ2xhdm9yYXppb25pJykuaW5zZXJ0KFtkYXRhXSkuc2VsZWN0KCkuc2luZ2xlKCksXG4gICAgZ2V0QnlJZDogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ2xhdm9yYXppb25pJykuc2VsZWN0KCcqJykuZXEoJ2lkJywgaWQpLnNpbmdsZSgpLFxuICAgIHVwZGF0ZTogKGlkOiBzdHJpbmcsIGRhdGE6IGFueSkgPT4gc3VwYWJhc2UuZnJvbSgnbGF2b3JhemlvbmknKS51cGRhdGUoZGF0YSkuZXEoJ2lkJywgaWQpLnNlbGVjdCgpLnNpbmdsZSgpLFxuICAgIGRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ2xhdm9yYXppb25pJykuZGVsZXRlKCkuZXEoJ2lkJywgaWQpXG4gIH0sXG5cbiAgLy8gVXNlcnNcbiAgdXNlcnM6IHtcbiAgICBnZXRBbGw6ICgpID0+IHN1cGFiYXNlLmZyb20oJ3VzZXJzJykuc2VsZWN0KCdpZCwgdXNlcm5hbWUsIGVtYWlsLCByb2xlLCBub21lLCBjb2dub21lLCB0ZWxlZm9ubywgYXR0aXZvLCBjcmVhdGVkX2F0LCBsYXN0X2xvZ2luLCBhcHByb3ZlZF9hdCcpLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pLFxuICAgIGNyZWF0ZTogKGRhdGE6IGFueSkgPT4gc3VwYWJhc2UuZnJvbSgndXNlcnMnKS5pbnNlcnQoW2RhdGFdKS5zZWxlY3QoJ2lkLCB1c2VybmFtZSwgZW1haWwsIHJvbGUsIG5vbWUsIGNvZ25vbWUsIHRlbGVmb25vLCBhdHRpdm8sIGNyZWF0ZWRfYXQnKS5zaW5nbGUoKSxcbiAgICBnZXRCeUlkOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgndXNlcnMnKS5zZWxlY3QoJ2lkLCB1c2VybmFtZSwgZW1haWwsIHJvbGUsIG5vbWUsIGNvZ25vbWUsIHRlbGVmb25vLCBhdHRpdm8sIGNyZWF0ZWRfYXQsIGxhc3RfbG9naW4sIGFwcHJvdmVkX2F0JykuZXEoJ2lkJywgaWQpLnNpbmdsZSgpLFxuICAgIGdldEJ5SWRGdWxsOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgndXNlcnMnKS5zZWxlY3QoJyonKS5lcSgnaWQnLCBpZCkuc2luZ2xlKCksXG4gICAgZ2V0QnlVc2VybmFtZTogKHVzZXJuYW1lOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ3VzZXJzJykuc2VsZWN0KCcqJykuZXEoJ3VzZXJuYW1lJywgdXNlcm5hbWUpLnNpbmdsZSgpLFxuICAgIGdldEJ5RW1haWw6IChlbWFpbDogc3RyaW5nKSA9PiBzdXBhYmFzZS5mcm9tKCd1c2VycycpLnNlbGVjdCgnKicpLmVxKCdlbWFpbCcsIGVtYWlsKS5zaW5nbGUoKSxcbiAgICB1cGRhdGU6IChpZDogc3RyaW5nLCBkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ3VzZXJzJykudXBkYXRlKGRhdGEpLmVxKCdpZCcsIGlkKS5zZWxlY3QoJ2lkLCB1c2VybmFtZSwgZW1haWwsIHJvbGUsIG5vbWUsIGNvZ25vbWUsIHRlbGVmb25vLCBhdHRpdm8sIGNyZWF0ZWRfYXQsIGxhc3RfbG9naW4sIGFwcHJvdmVkX2F0Jykuc2luZ2xlKCksXG4gICAgdXBkYXRlTGFzdExvZ2luOiAoaWQ6IHN0cmluZykgPT4gc3VwYWJhc2UuZnJvbSgndXNlcnMnKS51cGRhdGUoeyBsYXN0X2xvZ2luOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSkuZXEoJ2lkJywgaWQpLFxuICAgIGRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ3VzZXJzJykuZGVsZXRlKCkuZXEoJ2lkJywgaWQpXG4gIH0sXG5cbiAgLy8gTm90ZSBQZXJzb25hbGlcbiAgbm90ZV9wZXJzb25hbGk6IHtcbiAgICBnZXRBbGw6ICgpID0+IHN1cGFiYXNlLmZyb20oJ25vdGVfcGVyc29uYWxpJykuc2VsZWN0KCcqJykub3JkZXIoJ2RhdGFfY3JlYXppb25lJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pLFxuICAgIGdldEFsbEJ5VXNlcjogKHV0ZW50ZV9pZDogc3RyaW5nKSA9PiBzdXBhYmFzZS5mcm9tKCdub3RlX3BlcnNvbmFsaScpLnNlbGVjdCgnKicpLmVxKCd1dGVudGVfaWQnLCB1dGVudGVfaWQpLm9yZGVyKCdkYXRhX2NyZWF6aW9uZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KSxcbiAgICBjcmVhdGU6IChkYXRhOiBhbnkpID0+IHN1cGFiYXNlLmZyb20oJ25vdGVfcGVyc29uYWxpJykuaW5zZXJ0KFtkYXRhXSkuc2VsZWN0KCkuc2luZ2xlKCksXG4gICAgZ2V0QnlJZDogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ25vdGVfcGVyc29uYWxpJykuc2VsZWN0KCcqJykuZXEoJ2lkJywgaWQpLnNpbmdsZSgpLFxuICAgIHVwZGF0ZTogKGlkOiBzdHJpbmcsIGRhdGE6IGFueSkgPT4gc3VwYWJhc2UuZnJvbSgnbm90ZV9wZXJzb25hbGknKS51cGRhdGUoZGF0YSkuZXEoJ2lkJywgaWQpLnNlbGVjdCgpLnNpbmdsZSgpLFxuICAgIGRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IHN1cGFiYXNlLmZyb20oJ25vdGVfcGVyc29uYWxpJykuZGVsZXRlKCkuZXEoJ2lkJywgaWQpXG4gIH1cbn0iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VLZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiZGJRdWVyeSIsImNvbmRvbWluaSIsImdldEFsbCIsImZyb20iLCJzZWxlY3QiLCJvcmRlciIsImFzY2VuZGluZyIsImNyZWF0ZSIsImRhdGEiLCJpbnNlcnQiLCJzaW5nbGUiLCJnZXRCeUlkIiwiaWQiLCJlcSIsInVwZGF0ZSIsImRlbGV0ZSIsInRpcG9sb2dpZSIsInZlcmlmaWNoZSIsImxhdm9yYXppb25pIiwidXNlcnMiLCJnZXRCeUlkRnVsbCIsImdldEJ5VXNlcm5hbWUiLCJ1c2VybmFtZSIsImdldEJ5RW1haWwiLCJlbWFpbCIsInVwZGF0ZUxhc3RMb2dpbiIsImxhc3RfbG9naW4iLCJEYXRlIiwidG9JU09TdHJpbmciLCJub3RlX3BlcnNvbmFsaSIsImdldEFsbEJ5VXNlciIsInV0ZW50ZV9pZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ }),

/***/ "(rsc)/./src/scripts/migrate-foto-cloudinary.ts":
/*!************************************************!*\
  !*** ./src/scripts/migrate-foto-cloudinary.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   migrateFotoToCloudinary: () => (/* binding */ migrateFotoToCloudinary),\n/* harmony export */   testMigrazioneLavorazione: () => (/* binding */ testMigrazioneLavorazione)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n/* harmony import */ var _lib_cloudinary__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/cloudinary */ \"(rsc)/./src/lib/cloudinary.ts\");\n/**\n * Script di migrazione foto da Base64 a Cloudinary\n * \n * IMPORTANTE: Eseguire solo dopo aver configurato Cloudinary!\n * \n * Questo script:\n * 1. Query tutte le lavorazioni con foto Base64\n * 2. Upload foto su Cloudinary\n * 3. Update database con URL Cloudinary\n * 4. Backup Base64 prima di eliminare\n */ \n\n/**\n * Migrazione completa foto Base64 → Cloudinary\n */ async function migrateFotoToCloudinary() {\n    console.log(\"\\uD83D\\uDD04 Inizio migrazione foto Base64 → Cloudinary\");\n    try {\n        // 1. Query lavorazioni con foto Base64\n        const { data: lavorazioni, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"lavorazioni\").select(\"id, allegati\").not(\"allegati\", \"is\", null);\n        if (error) {\n            throw new Error(`Errore query lavorazioni: ${error.message}`);\n        }\n        if (!lavorazioni || lavorazioni.length === 0) {\n            console.log(\"✅ Nessuna lavorazione con allegati trovata\");\n            return {\n                success: true,\n                migrazioni: 0\n            };\n        }\n        console.log(`📊 Trovate ${lavorazioni.length} lavorazioni con allegati`);\n        let migrazioniSuccesso = 0;\n        let errori = [];\n        // 2. Processa ogni lavorazione\n        for (const lavorazione of lavorazioni){\n            try {\n                console.log(`🔄 Processando lavorazione ${lavorazione.id}`);\n                const risultato = await migrateLavorazioneFoto(lavorazione);\n                if (risultato.success) {\n                    migrazioniSuccesso++;\n                    console.log(`✅ Lavorazione ${lavorazione.id} migrata con successo`);\n                } else {\n                    errori.push({\n                        lavorazioneId: lavorazione.id,\n                        error: risultato.error\n                    });\n                    console.error(`❌ Errore lavorazione ${lavorazione.id}:`, risultato.error);\n                }\n                // Pausa tra le migrazioni per evitare rate limiting\n                await new Promise((resolve)=>setTimeout(resolve, 1000));\n            } catch (error) {\n                errori.push({\n                    lavorazioneId: lavorazione.id,\n                    error: error instanceof Error ? error.message : \"Errore sconosciuto\"\n                });\n                console.error(`❌ Errore critico lavorazione ${lavorazione.id}:`, error);\n            }\n        }\n        console.log(`🎉 Migrazione completata: ${migrazioniSuccesso}/${lavorazioni.length} successi`);\n        if (errori.length > 0) {\n            console.log(\"❌ Errori riscontrati:\");\n            errori.forEach((err)=>console.log(`  - ${err.lavorazioneId}: ${err.error}`));\n        }\n        return {\n            success: true,\n            totali: lavorazioni.length,\n            migrazioni: migrazioniSuccesso,\n            errori: errori\n        };\n    } catch (error) {\n        console.error(\"❌ Errore critico migrazione:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Errore sconosciuto\"\n        };\n    }\n}\n/**\n * Migra le foto di una singola lavorazione\n */ async function migrateLavorazioneFoto(lavorazione) {\n    try {\n        const allegati = lavorazione.allegati;\n        // Verifica se ci sono foto Base64 da migrare\n        const fotoBase64 = troveFotoBase64(allegati);\n        if (fotoBase64.length === 0) {\n            return {\n                success: true,\n                message: \"Nessuna foto Base64 trovata\"\n            };\n        }\n        console.log(`📸 Trovate ${fotoBase64.length} foto Base64 da migrare`);\n        // Upload foto su Cloudinary\n        const fotoCloudinary = [];\n        const erroriUpload = [];\n        for(let i = 0; i < fotoBase64.length; i++){\n            try {\n                const risultatoUpload = await (0,_lib_cloudinary__WEBPACK_IMPORTED_MODULE_1__.uploadFotoLavorazione)(fotoBase64[i], lavorazione.id, i);\n                fotoCloudinary.push({\n                    url: risultatoUpload.url,\n                    publicId: risultatoUpload.publicId,\n                    thumbnailUrl: risultatoUpload.url.replace(\"/upload/\", \"/upload/w_150,h_150,c_thumb/\"),\n                    createdAt: new Date().toISOString(),\n                    migratedFrom: \"base64\"\n                });\n                console.log(`  ✅ Foto ${i + 1} uploadata su Cloudinary`);\n            } catch (error) {\n                erroriUpload.push({\n                    index: i,\n                    error: error instanceof Error ? error.message : \"Errore upload\"\n                });\n                console.error(`  ❌ Errore upload foto ${i + 1}:`, error);\n            }\n        }\n        if (fotoCloudinary.length === 0) {\n            return {\n                success: false,\n                error: \"Nessuna foto uploadata su Cloudinary\"\n            };\n        }\n        // Backup allegati originali\n        const allegatiBackup = {\n            ...allegati,\n            _backup: {\n                originalBase64Foto: fotoBase64,\n                migratedAt: new Date().toISOString(),\n                migratedCount: fotoCloudinary.length\n            }\n        };\n        // Aggiorna allegati con foto Cloudinary\n        const nuoviAllegati = {\n            ...allegati,\n            foto: fotoCloudinary,\n            // Mantieni altri dati allegati (dati_verifica_completamento, etc.)\n            // Rimuovi le foto Base64 originali\n            _base64Foto: undefined // Rimuove le foto Base64\n        };\n        // Update database\n        const { error: updateError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"lavorazioni\").update({\n            allegati: nuoviAllegati\n        }).eq(\"id\", lavorazione.id);\n        if (updateError) {\n            throw new Error(`Errore update database: ${updateError.message}`);\n        }\n        // Log di backup per sicurezza (opzionale - salva su file)\n        console.log(`💾 Backup creato per lavorazione ${lavorazione.id}`);\n        return {\n            success: true,\n            fotoMigrate: fotoCloudinary.length,\n            erroriUpload: erroriUpload.length > 0 ? erroriUpload : undefined\n        };\n    } catch (error) {\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Errore migrazione lavorazione\"\n        };\n    }\n}\n/**\n * Trova foto Base64 negli allegati\n */ function troveFotoBase64(allegati) {\n    if (!allegati) return [];\n    const foto = [];\n    // Cerca in vari campi dove potrebbero essere le foto Base64\n    const campiPossibili = [\n        \"foto\",\n        \"immagini\",\n        \"allegati\",\n        \"dati_verifica_completamento\"\n    ];\n    for (const campo of campiPossibili){\n        if (allegati[campo]) {\n            const valore = allegati[campo];\n            // Se è un array\n            if (Array.isArray(valore)) {\n                for (const item of valore){\n                    if (typeof item === \"string\" && item.startsWith(\"data:image\")) {\n                        foto.push(item);\n                    }\n                }\n            }\n            // Se è un oggetto, cerca ricorsivamente\n            if (typeof valore === \"object\" && valore !== null) {\n                const fotoRicorsive = troveFotoBase64Ricorsivo(valore);\n                foto.push(...fotoRicorsive);\n            }\n            // Se è una stringa Base64\n            if (typeof valore === \"string\" && valore.startsWith(\"data:image\")) {\n                foto.push(valore);\n            }\n        }\n    }\n    // Rimuovi duplicati\n    const fotoUniche = [];\n    for (const f of foto){\n        if (!fotoUniche.includes(f)) {\n            fotoUniche.push(f);\n        }\n    }\n    return fotoUniche;\n}\n/**\n * Cerca foto Base64 ricorsivamente in oggetti nested\n */ function troveFotoBase64Ricorsivo(obj) {\n    const foto = [];\n    for(const chiave in obj){\n        const valore = obj[chiave];\n        if (Array.isArray(valore)) {\n            for (const item of valore){\n                if (typeof item === \"string\" && item.startsWith(\"data:image\")) {\n                    foto.push(item);\n                }\n            }\n        } else if (typeof valore === \"object\" && valore !== null) {\n            foto.push(...troveFotoBase64Ricorsivo(valore));\n        } else if (typeof valore === \"string\" && valore.startsWith(\"data:image\")) {\n            foto.push(valore);\n        }\n    }\n    return foto;\n}\n/**\n * Migrazione di test per una singola lavorazione\n */ async function testMigrazioneLavorazione(lavorazioneId) {\n    console.log(`🧪 Test migrazione per lavorazione ${lavorazioneId}`);\n    const { data: lavorazione, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"lavorazioni\").select(\"id, allegati\").eq(\"id\", lavorazioneId).single();\n    if (error || !lavorazione) {\n        console.error(\"❌ Lavorazione non trovata:\", error);\n        return {\n            success: false,\n            error: \"Lavorazione non trovata\"\n        };\n    }\n    return await migrateLavorazioneFoto(lavorazione);\n}\n// Export per uso in script CLI\nif (true) {\n    // Solo su server/CLI\n    console.log(\"\\uD83D\\uDCCB Script migrazione foto disponibile\");\n    console.log(\"Usa: migrateFotoToCloudinary() per migrazione completa\");\n    console.log(\"Usa: testMigrazioneLavorazione(id) per test singola lavorazione\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2NyaXB0cy9taWdyYXRlLWZvdG8tY2xvdWRpbmFyeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Q0FVQyxHQUV3QztBQUNlO0FBT3hEOztDQUVDLEdBQ00sZUFBZUU7SUFDcEJDLFFBQVFDLEdBQUcsQ0FBQztJQUVaLElBQUk7UUFDRix1Q0FBdUM7UUFDdkMsTUFBTSxFQUFFQyxNQUFNQyxXQUFXLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1QLG1EQUFRQSxDQUNoRFEsSUFBSSxDQUFDLGVBQ0xDLE1BQU0sQ0FBQyxnQkFDUEMsR0FBRyxDQUFDLFlBQVksTUFBTTtRQUV6QixJQUFJSCxPQUFPO1lBQ1QsTUFBTSxJQUFJSSxNQUFNLENBQUMsMEJBQTBCLEVBQUVKLE1BQU1LLE9BQU8sQ0FBQyxDQUFDO1FBQzlEO1FBRUEsSUFBSSxDQUFDTixlQUFlQSxZQUFZTyxNQUFNLEtBQUssR0FBRztZQUM1Q1YsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBTztnQkFBRVUsU0FBUztnQkFBTUMsWUFBWTtZQUFFO1FBQ3hDO1FBRUFaLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRUUsWUFBWU8sTUFBTSxDQUFDLHlCQUF5QixDQUFDO1FBRXZFLElBQUlHLHFCQUFxQjtRQUN6QixJQUFJQyxTQUFnQixFQUFFO1FBRXRCLCtCQUErQjtRQUMvQixLQUFLLE1BQU1DLGVBQWVaLFlBQWE7WUFDckMsSUFBSTtnQkFDRkgsUUFBUUMsR0FBRyxDQUFDLENBQUMsMkJBQTJCLEVBQUVjLFlBQVlDLEVBQUUsQ0FBQyxDQUFDO2dCQUUxRCxNQUFNQyxZQUFZLE1BQU1DLHVCQUF1Qkg7Z0JBRS9DLElBQUlFLFVBQVVOLE9BQU8sRUFBRTtvQkFDckJFO29CQUNBYixRQUFRQyxHQUFHLENBQUMsQ0FBQyxjQUFjLEVBQUVjLFlBQVlDLEVBQUUsQ0FBQyxxQkFBcUIsQ0FBQztnQkFDcEUsT0FBTztvQkFDTEYsT0FBT0ssSUFBSSxDQUFDO3dCQUNW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SyxNQUFNRyxRQUFRSCxPQUFRO2dCQUN6QixJQUFJLE9BQU9HLFNBQVMsWUFBWUEsS0FBS0MsVUFBVSxDQUFDLGVBQWU7b0JBQzdEYixLQUFLOUIsSUFBSSxDQUFDMEM7Z0JBQ1o7WUFDRjtRQUNGLE9BQU8sSUFBSSxPQUFPSCxXQUFXLFlBQVlBLFdBQVcsTUFBTTtZQUN4RFQsS0FBSzlCLElBQUksSUFBSTZDLHlCQUF5Qk47UUFDeEMsT0FBTyxJQUFJLE9BQU9BLFdBQVcsWUFBWUEsT0FBT0ksVUFBVSxDQUFDLGVBQWU7WUFDeEViLEtBQUs5QixJQUFJLENBQUN1QztRQUNaO0lBQ0Y7SUFFQSxPQUFPVDtBQUNUO0FBRUE7O0NBRUMsR0FDTSxlQUFlcUIsMEJBQTBCbEQsYUFBcUI7SUFDbkVwQixRQUFRQyxHQUFHLENBQUMsQ0FBQyxtQ0FBbUMsRUFBRW1CLGNBQWMsQ0FBQztJQUVqRSxNQUFNLEVBQUVsQixNQUFNYSxXQUFXLEVBQUVYLEtBQUssRUFBRSxHQUFHLE1BQU1QLG1EQUFRQSxDQUNoRFEsSUFBSSxDQUFDLGVBQ0xDLE1BQU0sQ0FBQyxnQkFDUGdELEVBQUUsQ0FBQyxNQUFNbEMsZUFDVG1ELE1BQU07SUFFVCxJQUFJbkUsU0FBUyxDQUFDVyxhQUFhO1FBQ3pCZixRQUFRSSxLQUFLLENBQUMsOEJBQThCQTtRQUM1QyxPQUFPO1lBQUVPLFNBQVM7WUFBT1AsT0FBTztRQUEwQjtJQUM1RDtJQUVBLE9BQU8sTUFBTWMsdUJBQXVCSDtBQUN0QztBQUVBLCtCQUErQjtBQUMvQixJQUFJLElBQWtCLEVBQWE7SUFDakMscUJBQXFCO0lBQ3JCZixRQUFRQyxHQUFHLENBQUM7SUFDWkQsUUFBUUMsR0FBRyxDQUFDO0lBQ1pELFFBQVFDLEdBQUcsQ0FBQztBQUNkIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29uZG9taW5pLXB3YS8uL3NyYy9zY3JpcHRzL21pZ3JhdGUtZm90by1jbG91ZGluYXJ5LnRzP2FiYmMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTY3JpcHQgZGkgbWlncmF6aW9uZSBmb3RvIGRhIEJhc2U2NCBhIENsb3VkaW5hcnlcbiAqIFxuICogSU1QT1JUQU5URTogRXNlZ3VpcmUgc29sbyBkb3BvIGF2ZXIgY29uZmlndXJhdG8gQ2xvdWRpbmFyeSFcbiAqIFxuICogUXVlc3RvIHNjcmlwdDpcbiAqIDEuIFF1ZXJ5IHR1dHRlIGxlIGxhdm9yYXppb25pIGNvbiBmb3RvIEJhc2U2NFxuICogMi4gVXBsb2FkIGZvdG8gc3UgQ2xvdWRpbmFyeVxuICogMy4gVXBkYXRlIGRhdGFiYXNlIGNvbiBVUkwgQ2xvdWRpbmFyeVxuICogNC4gQmFja3VwIEJhc2U2NCBwcmltYSBkaSBlbGltaW5hcmVcbiAqL1xuXG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJ1xuaW1wb3J0IHsgdXBsb2FkRm90b0xhdm9yYXppb25lIH0gZnJvbSAnQC9saWIvY2xvdWRpbmFyeSdcblxuaW50ZXJmYWNlIExhdm9yYXppb25lQ29uRm90byB7XG4gIGlkOiBzdHJpbmdcbiAgYWxsZWdhdGk6IGFueVxufVxuXG4vKipcbiAqIE1pZ3JhemlvbmUgY29tcGxldGEgZm90byBCYXNlNjQg4oaSIENsb3VkaW5hcnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZ3JhdGVGb3RvVG9DbG91ZGluYXJ5KCkge1xuICBjb25zb2xlLmxvZygn8J+UhCBJbml6aW8gbWlncmF6aW9uZSBmb3RvIEJhc2U2NCDihpIgQ2xvdWRpbmFyeScpXG4gIFxuICB0cnkge1xuICAgIC8vIDEuIFF1ZXJ5IGxhdm9yYXppb25pIGNvbiBmb3RvIEJhc2U2NFxuICAgIGNvbnN0IHsgZGF0YTogbGF2b3JhemlvbmksIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2xhdm9yYXppb25pJylcbiAgICAgIC5zZWxlY3QoJ2lkLCBhbGxlZ2F0aScpXG4gICAgICAubm90KCdhbGxlZ2F0aScsICdpcycsIG51bGwpXG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yZSBxdWVyeSBsYXZvcmF6aW9uaTogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgfVxuXG4gICAgaWYgKCFsYXZvcmF6aW9uaSB8fCBsYXZvcmF6aW9uaS5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgTmVzc3VuYSBsYXZvcmF6aW9uZSBjb24gYWxsZWdhdGkgdHJvdmF0YScpXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtaWdyYXppb25pOiAwIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg8J+TiiBUcm92YXRlICR7bGF2b3JhemlvbmkubGVuZ3RofSBsYXZvcmF6aW9uaSBjb24gYWxsZWdhdGlgKVxuXG4gICAgbGV0IG1pZ3JhemlvbmlTdWNjZXNzbyA9IDBcbiAgICBsZXQgZXJyb3JpOiBhbnlbXSA9IFtdXG5cbiAgICAvLyAyLiBQcm9jZXNzYSBvZ25pIGxhdm9yYXppb25lXG4gICAgZm9yIChjb25zdCBsYXZvcmF6aW9uZSBvZiBsYXZvcmF6aW9uaSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coYPCflIQgUHJvY2Vzc2FuZG8gbGF2b3JhemlvbmUgJHtsYXZvcmF6aW9uZS5pZH1gKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmlzdWx0YXRvID0gYXdhaXQgbWlncmF0ZUxhdm9yYXppb25lRm90byhsYXZvcmF6aW9uZSlcbiAgICAgICAgXG4gICAgICAgIGlmIChyaXN1bHRhdG8uc3VjY2Vzcykge1xuICAgICAgICAgIG1pZ3JhemlvbmlTdWNjZXNzbysrXG4gICAgICAgICAgY29uc29sZS5sb2coYOKchSBMYXZvcmF6aW9uZSAke2xhdm9yYXppb25lLmlkfSBtaWdyYXRhIGNvbiBzdWNjZXNzb2ApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZXJyb3JpLnB1c2goe1xuICAgICAgICAgICAgbGF2b3JhemlvbmVJZDogbGF2b3JhemlvbmUuaWQsXG4gICAgICAgICAgICBlcnJvcjogcmlzdWx0YXRvLmVycm9yXG4gICAgICAgICAgfSlcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgRXJyb3JlIGxhdm9yYXppb25lICR7bGF2b3JhemlvbmUuaWR9OmAsIHJpc3VsdGF0by5lcnJvcilcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBhdXNhIHRyYSBsZSBtaWdyYXppb25pIHBlciBldml0YXJlIHJhdGUgbGltaXRpbmdcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKVxuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBlcnJvcmkucHVzaCh7XG4gICAgICAgICAgbGF2b3JhemlvbmVJZDogbGF2b3JhemlvbmUuaWQsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0Vycm9yZSBzY29ub3NjaXV0bydcbiAgICAgICAgfSlcbiAgICAgICAgY29uc29sZS5lcnJvcihg4p2MIEVycm9yZSBjcml0aWNvIGxhdm9yYXppb25lICR7bGF2b3JhemlvbmUuaWR9OmAsIGVycm9yKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDwn46JIE1pZ3JhemlvbmUgY29tcGxldGF0YTogJHttaWdyYXppb25pU3VjY2Vzc299LyR7bGF2b3JhemlvbmkubGVuZ3RofSBzdWNjZXNzaWApXG4gICAgXG4gICAgaWYgKGVycm9yaS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZygn4p2MIEVycm9yaSByaXNjb250cmF0aTonKVxuICAgICAgZXJyb3JpLmZvckVhY2goZXJyID0+IGNvbnNvbGUubG9nKGAgIC0gJHtlcnIubGF2b3JhemlvbmVJZH06ICR7ZXJyLmVycm9yfWApKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgdG90YWxpOiBsYXZvcmF6aW9uaS5sZW5ndGgsXG4gICAgICBtaWdyYXppb25pOiBtaWdyYXppb25pU3VjY2Vzc28sXG4gICAgICBlcnJvcmk6IGVycm9yaVxuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvcmUgY3JpdGljbyBtaWdyYXppb25lOicsIGVycm9yKVxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdFcnJvcmUgc2Nvbm9zY2l1dG8nXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogTWlncmEgbGUgZm90byBkaSB1bmEgc2luZ29sYSBsYXZvcmF6aW9uZVxuICovXG5hc3luYyBmdW5jdGlvbiBtaWdyYXRlTGF2b3JhemlvbmVGb3RvKGxhdm9yYXppb25lOiBMYXZvcmF6aW9uZUNvbkZvdG8pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhbGxlZ2F0aSA9IGxhdm9yYXppb25lLmFsbGVnYXRpXG5cbiAgICAvLyBWZXJpZmljYSBzZSBjaSBzb25vIGZvdG8gQmFzZTY0IGRhIG1pZ3JhcmVcbiAgICBjb25zdCBmb3RvQmFzZTY0ID0gdHJvdmVGb3RvQmFzZTY0KGFsbGVnYXRpKVxuICAgIFxuICAgIGlmIChmb3RvQmFzZTY0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogJ05lc3N1bmEgZm90byBCYXNlNjQgdHJvdmF0YScgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDwn5O4IFRyb3ZhdGUgJHtmb3RvQmFzZTY0Lmxlbmd0aH0gZm90byBCYXNlNjQgZGEgbWlncmFyZWApXG5cbiAgICAvLyBVcGxvYWQgZm90byBzdSBDbG91ZGluYXJ5XG4gICAgY29uc3QgZm90b0Nsb3VkaW5hcnkgPSBbXVxuICAgIGNvbnN0IGVycm9yaVVwbG9hZCA9IFtdXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvdG9CYXNlNjQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJpc3VsdGF0b1VwbG9hZCA9IGF3YWl0IHVwbG9hZEZvdG9MYXZvcmF6aW9uZShcbiAgICAgICAgICBmb3RvQmFzZTY0W2ldLCBcbiAgICAgICAgICBsYXZvcmF6aW9uZS5pZCwgXG4gICAgICAgICAgaVxuICAgICAgICApXG4gICAgICAgIFxuICAgICAgICBmb3RvQ2xvdWRpbmFyeS5wdXNoKHtcbiAgICAgICAgICB1cmw6IHJpc3VsdGF0b1VwbG9hZC51cmwsXG4gICAgICAgICAgcHVibGljSWQ6IHJpc3VsdGF0b1VwbG9hZC5wdWJsaWNJZCxcbiAgICAgICAgICB0aHVtYm5haWxVcmw6IHJpc3VsdGF0b1VwbG9hZC51cmwucmVwbGFjZSgnL3VwbG9hZC8nLCAnL3VwbG9hZC93XzE1MCxoXzE1MCxjX3RodW1iLycpLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIG1pZ3JhdGVkRnJvbTogJ2Jhc2U2NCdcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zb2xlLmxvZyhgICDinIUgRm90byAke2kgKyAxfSB1cGxvYWRhdGEgc3UgQ2xvdWRpbmFyeWApXG5cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGVycm9yaVVwbG9hZC5wdXNoKHtcbiAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyb3JlIHVwbG9hZCdcbiAgICAgICAgfSlcbiAgICAgICAgY29uc29sZS5lcnJvcihgICDinYwgRXJyb3JlIHVwbG9hZCBmb3RvICR7aSArIDF9OmAsIGVycm9yKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChmb3RvQ2xvdWRpbmFyeS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ05lc3N1bmEgZm90byB1cGxvYWRhdGEgc3UgQ2xvdWRpbmFyeSdcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBCYWNrdXAgYWxsZWdhdGkgb3JpZ2luYWxpXG4gICAgY29uc3QgYWxsZWdhdGlCYWNrdXAgPSB7XG4gICAgICAuLi5hbGxlZ2F0aSxcbiAgICAgIF9iYWNrdXA6IHtcbiAgICAgICAgb3JpZ2luYWxCYXNlNjRGb3RvOiBmb3RvQmFzZTY0LFxuICAgICAgICBtaWdyYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG1pZ3JhdGVkQ291bnQ6IGZvdG9DbG91ZGluYXJ5Lmxlbmd0aFxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFnZ2lvcm5hIGFsbGVnYXRpIGNvbiBmb3RvIENsb3VkaW5hcnlcbiAgICBjb25zdCBudW92aUFsbGVnYXRpID0ge1xuICAgICAgLi4uYWxsZWdhdGksXG4gICAgICBmb3RvOiBmb3RvQ2xvdWRpbmFyeSxcbiAgICAgIC8vIE1hbnRpZW5pIGFsdHJpIGRhdGkgYWxsZWdhdGkgKGRhdGlfdmVyaWZpY2FfY29tcGxldGFtZW50bywgZXRjLilcbiAgICAgIC8vIFJpbXVvdmkgbGUgZm90byBCYXNlNjQgb3JpZ2luYWxpXG4gICAgICBfYmFzZTY0Rm90bzogdW5kZWZpbmVkIC8vIFJpbXVvdmUgbGUgZm90byBCYXNlNjRcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgZGF0YWJhc2VcbiAgICBjb25zdCB7IGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdsYXZvcmF6aW9uaScpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgYWxsZWdhdGk6IG51b3ZpQWxsZWdhdGlcbiAgICAgIH0pXG4gICAgICAuZXEoJ2lkJywgbGF2b3JhemlvbmUuaWQpXG5cbiAgICBpZiAodXBkYXRlRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3JlIHVwZGF0ZSBkYXRhYmFzZTogJHt1cGRhdGVFcnJvci5tZXNzYWdlfWApXG4gICAgfVxuXG4gICAgLy8gTG9nIGRpIGJhY2t1cCBwZXIgc2ljdXJlenphIChvcHppb25hbGUgLSBzYWx2YSBzdSBmaWxlKVxuICAgIGNvbnNvbGUubG9nKGDwn5K+IEJhY2t1cCBjcmVhdG8gcGVyIGxhdm9yYXppb25lICR7bGF2b3JhemlvbmUuaWR9YClcblxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZm90b01pZ3JhdGU6IGZvdG9DbG91ZGluYXJ5Lmxlbmd0aCxcbiAgICAgIGVycm9yaVVwbG9hZDogZXJyb3JpVXBsb2FkLmxlbmd0aCA+IDAgPyBlcnJvcmlVcGxvYWQgOiB1bmRlZmluZWRcbiAgICB9XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRXJyb3JlIG1pZ3JhemlvbmUgbGF2b3JhemlvbmUnXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVHJvdmEgZm90byBCYXNlNjQgbmVnbGkgYWxsZWdhdGlcbiAqL1xuZnVuY3Rpb24gdHJvdmVGb3RvQmFzZTY0KGFsbGVnYXRpOiBhbnkpOiBzdHJpbmdbXSB7XG4gIGlmICghYWxsZWdhdGkpIHJldHVybiBbXVxuXG4gIGNvbnN0IGZvdG86IHN0cmluZ1tdID0gW11cblxuICAvLyBDZXJjYSBpbiB2YXJpIGNhbXBpIGRvdmUgcG90cmViYmVybyBlc3NlcmUgbGUgZm90byBCYXNlNjRcbiAgY29uc3QgY2FtcGlQb3NzaWJpbGkgPSBbXG4gICAgJ2ZvdG8nLFxuICAgICdpbW1hZ2luaScsIFxuICAgICdhbGxlZ2F0aScsXG4gICAgJ2RhdGlfdmVyaWZpY2FfY29tcGxldGFtZW50bydcbiAgXVxuXG4gIGZvciAoY29uc3QgY2FtcG8gb2YgY2FtcGlQb3NzaWJpbGkpIHtcbiAgICBpZiAoYWxsZWdhdGlbY2FtcG9dKSB7XG4gICAgICBjb25zdCB2YWxvcmUgPSBhbGxlZ2F0aVtjYW1wb11cbiAgICAgIFxuICAgICAgLy8gU2Ugw6ggdW4gYXJyYXlcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbG9yZSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHZhbG9yZSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgJiYgaXRlbS5zdGFydHNXaXRoKCdkYXRhOmltYWdlJykpIHtcbiAgICAgICAgICAgIGZvdG8ucHVzaChpdGVtKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTZSDDqCB1biBvZ2dldHRvLCBjZXJjYSByaWNvcnNpdmFtZW50ZVxuICAgICAgaWYgKHR5cGVvZiB2YWxvcmUgPT09ICdvYmplY3QnICYmIHZhbG9yZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBmb3RvUmljb3JzaXZlID0gdHJvdmVGb3RvQmFzZTY0Umljb3JzaXZvKHZhbG9yZSlcbiAgICAgICAgZm90by5wdXNoKC4uLmZvdG9SaWNvcnNpdmUpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNlIMOoIHVuYSBzdHJpbmdhIEJhc2U2NFxuICAgICAgaWYgKHR5cGVvZiB2YWxvcmUgPT09ICdzdHJpbmcnICYmIHZhbG9yZS5zdGFydHNXaXRoKCdkYXRhOmltYWdlJykpIHtcbiAgICAgICAgZm90by5wdXNoKHZhbG9yZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSaW11b3ZpIGR1cGxpY2F0aVxuICBjb25zdCBmb3RvVW5pY2hlOiBzdHJpbmdbXSA9IFtdXG4gIGZvciAoY29uc3QgZiBvZiBmb3RvKSB7XG4gICAgaWYgKCFmb3RvVW5pY2hlLmluY2x1ZGVzKGYpKSB7XG4gICAgICBmb3RvVW5pY2hlLnB1c2goZilcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZvdG9VbmljaGVcbn1cblxuLyoqXG4gKiBDZXJjYSBmb3RvIEJhc2U2NCByaWNvcnNpdmFtZW50ZSBpbiBvZ2dldHRpIG5lc3RlZFxuICovXG5mdW5jdGlvbiB0cm92ZUZvdG9CYXNlNjRSaWNvcnNpdm8ob2JqOiBhbnkpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGZvdG86IHN0cmluZ1tdID0gW11cblxuICBmb3IgKGNvbnN0IGNoaWF2ZSBpbiBvYmopIHtcbiAgICBjb25zdCB2YWxvcmUgPSBvYmpbY2hpYXZlXVxuICAgIFxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbG9yZSkpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB2YWxvcmUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyAmJiBpdGVtLnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UnKSkge1xuICAgICAgICAgIGZvdG8ucHVzaChpdGVtKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsb3JlID09PSAnb2JqZWN0JyAmJiB2YWxvcmUgIT09IG51bGwpIHtcbiAgICAgIGZvdG8ucHVzaCguLi50cm92ZUZvdG9CYXNlNjRSaWNvcnNpdm8odmFsb3JlKSlcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWxvcmUgPT09ICdzdHJpbmcnICYmIHZhbG9yZS5zdGFydHNXaXRoKCdkYXRhOmltYWdlJykpIHtcbiAgICAgIGZvdG8ucHVzaCh2YWxvcmUpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZvdG9cbn1cblxuLyoqXG4gKiBNaWdyYXppb25lIGRpIHRlc3QgcGVyIHVuYSBzaW5nb2xhIGxhdm9yYXppb25lXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0ZXN0TWlncmF6aW9uZUxhdm9yYXppb25lKGxhdm9yYXppb25lSWQ6IHN0cmluZykge1xuICBjb25zb2xlLmxvZyhg8J+nqiBUZXN0IG1pZ3JhemlvbmUgcGVyIGxhdm9yYXppb25lICR7bGF2b3JhemlvbmVJZH1gKVxuICBcbiAgY29uc3QgeyBkYXRhOiBsYXZvcmF6aW9uZSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2xhdm9yYXppb25pJylcbiAgICAuc2VsZWN0KCdpZCwgYWxsZWdhdGknKVxuICAgIC5lcSgnaWQnLCBsYXZvcmF6aW9uZUlkKVxuICAgIC5zaW5nbGUoKVxuXG4gIGlmIChlcnJvciB8fCAhbGF2b3JhemlvbmUpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgTGF2b3JhemlvbmUgbm9uIHRyb3ZhdGE6JywgZXJyb3IpXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTGF2b3JhemlvbmUgbm9uIHRyb3ZhdGEnIH1cbiAgfVxuXG4gIHJldHVybiBhd2FpdCBtaWdyYXRlTGF2b3JhemlvbmVGb3RvKGxhdm9yYXppb25lKVxufVxuXG4vLyBFeHBvcnQgcGVyIHVzbyBpbiBzY3JpcHQgQ0xJXG5pZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgLy8gU29sbyBzdSBzZXJ2ZXIvQ0xJXG4gIGNvbnNvbGUubG9nKCfwn5OLIFNjcmlwdCBtaWdyYXppb25lIGZvdG8gZGlzcG9uaWJpbGUnKVxuICBjb25zb2xlLmxvZygnVXNhOiBtaWdyYXRlRm90b1RvQ2xvdWRpbmFyeSgpIHBlciBtaWdyYXppb25lIGNvbXBsZXRhJylcbiAgY29uc29sZS5sb2coJ1VzYTogdGVzdE1pZ3JhemlvbmVMYXZvcmF6aW9uZShpZCkgcGVyIHRlc3Qgc2luZ29sYSBsYXZvcmF6aW9uZScpXG59Il0sIm5hbWVzIjpbInN1cGFiYXNlIiwidXBsb2FkRm90b0xhdm9yYXppb25lIiwibWlncmF0ZUZvdG9Ub0Nsb3VkaW5hcnkiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsImxhdm9yYXppb25pIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0Iiwibm90IiwiRXJyb3IiLCJtZXNzYWdlIiwibGVuZ3RoIiwic3VjY2VzcyIsIm1pZ3JhemlvbmkiLCJtaWdyYXppb25pU3VjY2Vzc28iLCJlcnJvcmkiLCJsYXZvcmF6aW9uZSIsImlkIiwicmlzdWx0YXRvIiwibWlncmF0ZUxhdm9yYXppb25lRm90byIsInB1c2giLCJsYXZvcmF6aW9uZUlkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZm9yRWFjaCIsImVyciIsInRvdGFsaSIsImFsbGVnYXRpIiwiZm90b0Jhc2U2NCIsInRyb3ZlRm90b0Jhc2U2NCIsImZvdG9DbG91ZGluYXJ5IiwiZXJyb3JpVXBsb2FkIiwiaSIsInJpc3VsdGF0b1VwbG9hZCIsInVybCIsInB1YmxpY0lkIiwidGh1bWJuYWlsVXJsIiwicmVwbGFjZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm1pZ3JhdGVkRnJvbSIsImluZGV4IiwiYWxsZWdhdGlCYWNrdXAiLCJfYmFja3VwIiwib3JpZ2luYWxCYXNlNjRGb3RvIiwibWlncmF0ZWRBdCIsIm1pZ3JhdGVkQ291bnQiLCJudW92aUFsbGVnYXRpIiwiZm90byIsIl9iYXNlNjRGb3RvIiwidW5kZWZpbmVkIiwidXBkYXRlRXJyb3IiLCJ1cGRhdGUiLCJlcSIsImZvdG9NaWdyYXRlIiwiY2FtcGlQb3NzaWJpbGkiLCJjYW1wbyIsInZhbG9yZSIsIkFycmF5IiwiaXNBcnJheSIsIml0ZW0iLCJzdGFydHNXaXRoIiwiZm90b1JpY29yc2l2ZSIsInRyb3ZlRm90b0Jhc2U2NFJpY29yc2l2byIsImZvdG9VbmljaGUiLCJmIiwiaW5jbHVkZXMiLCJvYmoiLCJjaGlhdmUiLCJ0ZXN0TWlncmF6aW9uZUxhdm9yYXppb25lIiwic2luZ2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/scripts/migrate-foto-cloudinary.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/lodash","vendor-chunks/cloudinary","vendor-chunks/q"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmigrate-foto%2Froute&page=%2Fapi%2Fmigrate-foto%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmigrate-foto%2Froute.ts&appDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fakirayouky%2FDesktop%2FSiti%2FCondomini&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();