(()=>{var e={};e.id=8311,e.ids=[8311],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},17235:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>l}),s(44262),s(53733),s(90996);var i=s(30170),a=s(45002),r=s(83876),o=s.n(r),n=s(66299),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let l=["",{children:["test-notifiche",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,44262)),"/Users/akirayouky/Desktop/Siti/Condomini/src/app/test-notifiche/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,53733)),"/Users/akirayouky/Desktop/Siti/Condomini/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/akirayouky/Desktop/Siti/Condomini/src/app/test-notifiche/page.tsx"],u="/test-notifiche/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/test-notifiche/page",pathname:"/test-notifiche",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},91663:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,63642,23)),Promise.resolve().then(s.t.bind(s,87586,23)),Promise.resolve().then(s.t.bind(s,47838,23)),Promise.resolve().then(s.t.bind(s,58057,23)),Promise.resolve().then(s.t.bind(s,77741,23)),Promise.resolve().then(s.t.bind(s,13118,23))},85753:()=>{},1736:(e,t,s)=>{Promise.resolve().then(s.bind(s,96e3))},96e3:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var i=s(97247),a=s(28964),r=s(8013);function o(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)(!1),n=e=>{t(t=>[e,...t])},c=async()=>{o(!0);try{let{data:e,error:t}=await r.O.from("notifiche").select("count").limit(1);t?n({success:!1,message:`❌ Errore connessione DB: ${t.message}`}):n({success:!0,message:"✅ Connessione database OK"})}catch(e){n({success:!1,message:`❌ Errore: ${e instanceof Error?e.message:"Sconosciuto"}`})}o(!1)},l=async()=>{o(!0);try{let e={tipo:"nuova_assegnazione",titolo:"Test Notifica da UI",messaggio:"Test creazione notifica dall'interfaccia",utente_id:crypto.randomUUID(),priorita:"media",letta:!1},{data:t,error:s}=await r.O.from("notifiche").insert(e).select().single();s?n({success:!1,message:`❌ Errore creazione notifica: ${s.message}`}):n({success:!0,message:"✅ Notifica creata con successo",data:{id:t.id,tipo:t.tipo,titolo:t.titolo}})}catch(e){n({success:!1,message:`❌ Errore: ${e instanceof Error?e.message:"Sconosciuto"}`})}o(!1)},d=async()=>{o(!0);try{let{data:e,error:t}=await r.O.from("notifiche").select("id, tipo, titolo, priorita, letta, data_creazione").order("data_creazione",{ascending:!1}).limit(5);t?n({success:!1,message:`❌ Errore lettura notifiche: ${t.message}`}):n({success:!0,message:`✅ Lette ${e.length} notifiche`,data:e})}catch(e){n({success:!1,message:`❌ Errore: ${e instanceof Error?e.message:"Sconosciuto"}`})}o(!1)},u=async()=>{o(!0);try{let{data:e,error:t}=await r.O.from("notifiche").select("id").eq("letta",!1).limit(1);if(t||!e||0===e.length){n({success:!1,message:"❌ Nessuna notifica non letta trovata per il test update"}),o(!1);return}let{data:s,error:i}=await r.O.from("notifiche").update({letta:!0}).eq("id",e[0].id).select().single();i?n({success:!1,message:`❌ Errore update notifica: ${i.message}`}):n({success:!0,message:"✅ Notifica marcata come letta",data:{id:s.id,letta:s.letta}})}catch(e){n({success:!1,message:`❌ Errore: ${e instanceof Error?e.message:"Sconosciuto"}`})}o(!1)},p=async()=>{t([]),await c(),await new Promise(e=>setTimeout(e,500)),await l(),await new Promise(e=>setTimeout(e,500)),await d(),await new Promise(e=>setTimeout(e,500)),await u()};return i.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"\uD83E\uDDEA Test Sistema Notifiche"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[i.jsx("button",{onClick:c,disabled:s,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-50",children:"\uD83D\uDD0C Test DB"}),i.jsx("button",{onClick:l,disabled:s,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded disabled:opacity-50",children:"➕ Crea Notifica"}),i.jsx("button",{onClick:d,disabled:s,className:"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded disabled:opacity-50",children:"\uD83D\uDCD6 Leggi Notifiche"}),i.jsx("button",{onClick:u,disabled:s,className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded disabled:opacity-50",children:"✏️ Update Notifica"})]}),(0,i.jsxs)("div",{className:"flex gap-4 mb-6",children:[i.jsx("button",{onClick:p,disabled:s,className:"bg-indigo-500 hover:bg-indigo-600 text-white px-6 py-3 rounded font-medium disabled:opacity-50",children:"\uD83D\uDE80 Test Completo"}),i.jsx("button",{onClick:()=>{t([])},disabled:s,className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded disabled:opacity-50",children:"\uD83D\uDDD1️ Pulisci Risultati"})]}),s&&i.jsx("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-4",children:i.jsx("p",{className:"text-yellow-700",children:"⏳ Test in corso..."})}),i.jsx("div",{className:"space-y-4",children:e.map((e,t)=>(0,i.jsxs)("div",{className:`border-l-4 p-4 ${e.success?"bg-green-100 border-green-500":"bg-red-100 border-red-500"}`,children:[i.jsx("p",{className:e.success?"text-green-700":"text-red-700",children:e.message}),e.data&&i.jsx("pre",{className:"mt-2 text-sm bg-gray-100 p-2 rounded overflow-auto",children:JSON.stringify(e.data,null,2)})]},t))}),0===e.length&&i.jsx("div",{className:"text-center text-gray-500 py-8",children:"Clicca sui pulsanti per testare il sistema notifiche"})]})})})}},8013:(e,t,s)=>{"use strict";s.d(t,{O:()=>i});let i=(0,s(56323).eI)("https://ygvlcikgzkoaxlrmwsnv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlndmxjaWtnemtvYXhscm13c252Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzOTgzMzgsImV4cCI6MjA3NDk3NDMzOH0.Zc6eihyJiTZy6WicV6MyIgZ1Oq7GwzRYR01zovQHFPs")},53733:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>r,viewport:()=>o});var i=s(72051);s(5023);let a="Verifiche Condominiali",r={title:a,description:"App PWA per gestione verifiche condominiali",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:a},formatDetection:{telephone:!1},icons:{icon:"/icon-192.png",apple:"/apple-icon.png"}},o={themeColor:"#3b82f6"};function n({children:e}){return i.jsx("html",{lang:"it",children:i.jsx("body",{className:"min-h-screen bg-gray-50",children:e})})}},44262:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});let i=(0,s(45347).createProxy)(String.raw`/Users/akirayouky/Desktop/Siti/Condomini/src/app/test-notifiche/page.tsx#default`)},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[9379,3039,6323],()=>s(17235));module.exports=i})();