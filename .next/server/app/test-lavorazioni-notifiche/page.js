(()=>{var e={};e.id=4619,e.ids=[4619],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},41479:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),t(27590),t(53733),t(90996);var s=t(30170),i=t(45002),r=t(83876),o=t.n(r),n=t(66299),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(a,l);let c=["",{children:["test-lavorazioni-notifiche",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,27590)),"/Users/akirayouky/Desktop/Siti/Condomini/src/app/test-lavorazioni-notifiche/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,53733)),"/Users/akirayouky/Desktop/Siti/Condomini/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,90996,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/akirayouky/Desktop/Siti/Condomini/src/app/test-lavorazioni-notifiche/page.tsx"],m="/test-lavorazioni-notifiche/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/test-lavorazioni-notifiche/page",pathname:"/test-lavorazioni-notifiche",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},91663:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,63642,23)),Promise.resolve().then(t.t.bind(t,87586,23)),Promise.resolve().then(t.t.bind(t,47838,23)),Promise.resolve().then(t.t.bind(t,58057,23)),Promise.resolve().then(t.t.bind(t,77741,23)),Promise.resolve().then(t.t.bind(t,13118,23))},85753:()=>{},31217:(e,a,t)=>{Promise.resolve().then(t.bind(t,4066))},4066:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});var s=t(97247),i=t(28964);function r(){let[e,a]=(0,i.useState)(!1),[t,r]=(0,i.useState)([]),[o,n]=(0,i.useState)({condominio_id:"00000000-1111-2222-3333-444444444444",tipologia_id:crypto.randomUUID(),descrizione:"Test lavorazione per notifica sopralluoghista",sopralluoghista_id:"0a534c3a-daf0-41a2-8821-9aa003c9e423",data_scadenza:"2025-10-15",note:"Test automatico per verificare notifiche"}),l=async()=>{a(!0);try{let e=await fetch("/api/test-lavorazioni",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),a=await e.json();if(e.ok){let e="0a534c3a-daf0-41a2-8821-9aa003c9e423"===o.sopralluoghista_id?"Monica Canavese":"e1017f5d-83e1-4da3-ac81-4924a0dfd010"===o.sopralluoghista_id?"Diego Marruchi":"Utente Test";r(t=>[{success:!0,message:`✅ Lavorazione creata! Notifica inviata a: ${e}. Verifica nel NotificationCenter dell'app.`,data:a,timestamp:new Date().toISOString()},...t])}else r(e=>[{success:!1,message:`❌ Errore creazione lavorazione: ${a.error||"Errore sconosciuto"}`,data:a,timestamp:new Date().toISOString()},...e])}catch(e){r(a=>[{success:!1,message:`❌ Errore rete: ${e instanceof Error?e.message:"Sconosciuto"}`,timestamp:new Date().toISOString()},...a])}a(!1)},c=async()=>{a(!0);try{let e={tipo:"nuova_assegnazione",titolo:"Test API Notifica",messaggio:"Test diretto API notifiche",utente_id:o.sopralluoghista_id,priorita:"alta"},a=await fetch("/api/notifications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await a.json();a.ok?r(e=>[{success:!0,message:"✅ Notifica creata direttamente tramite API",data:t,timestamp:new Date().toISOString()},...e]):r(e=>[{success:!1,message:`❌ Errore API notifica: ${t.error||"Errore sconosciuto"}`,data:t,timestamp:new Date().toISOString()},...e])}catch(e){r(a=>[{success:!1,message:`❌ Errore API: ${e instanceof Error?e.message:"Sconosciuto"}`,timestamp:new Date().toISOString()},...a])}a(!1)};return s.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"\uD83D\uDD04 Test Integrazione Lavorazioni → Notifiche"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCCB Dati Test Lavorazione"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sopralluoghista (ricever\xe0 la notifica)"}),(0,s.jsxs)("select",{value:o.sopralluoghista_id,onChange:e=>n(a=>({...a,sopralluoghista_id:e.target.value})),title:"Seleziona sopralluoghista per il test",className:"w-full p-2 border border-gray-300 rounded text-sm",children:[s.jsx("option",{value:"0a534c3a-daf0-41a2-8821-9aa003c9e423",children:"Monica Canavese"}),s.jsx("option",{value:"e1017f5d-83e1-4da3-ac81-4924a0dfd010",children:"Diego Marruchi"}),s.jsx("option",{value:crypto.randomUUID(),children:"UUID Casuale (per test)"})]}),(0,s.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["ID selezionato: ",o.sopralluoghista_id]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrizione"}),s.jsx("input",{type:"text",value:o.descrizione,onChange:e=>n(a=>({...a,descrizione:e.target.value})),placeholder:"Descrizione della lavorazione",className:"w-full p-2 border border-gray-300 rounded"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Scadenza"}),s.jsx("input",{type:"date",value:o.data_scadenza,onChange:e=>n(a=>({...a,data_scadenza:e.target.value})),title:"Data di scadenza della lavorazione",className:"w-full p-2 border border-gray-300 rounded"})]}),s.jsx("button",{onClick:()=>{n(e=>({...e,condominio_id:crypto.randomUUID(),tipologia_id:crypto.randomUUID(),sopralluoghista_id:crypto.randomUUID()}))},className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-2 rounded text-sm",children:"\uD83C\uDFB2 Genera Nuovi ID"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"\uD83D\uDE80 Test Operazioni"}),s.jsx("button",{onClick:l,disabled:e,className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded font-medium disabled:opacity-50",children:"\uD83D\uDCDD Test Lavorazione (API semplificata)"}),s.jsx("button",{onClick:async()=>{a(!0);try{let e=await fetch("/api/lavorazioni",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),a=await e.json();r(t=>[{success:e.ok,message:e.ok?"✅ Lavorazione API normale creata!":`❌ Errore API normale: ${a.error}`,data:a,timestamp:new Date().toISOString()},...t])}catch(e){r(a=>[{success:!1,message:`❌ Errore API normale: ${e instanceof Error?e.message:"Sconosciuto"}`,timestamp:new Date().toISOString()},...a])}a(!1)},disabled:e,className:"w-full bg-purple-500 hover:bg-purple-600 text-white py-3 px-4 rounded font-medium disabled:opacity-50",children:"\uD83D\uDCCB Test API Lavorazioni Normale"}),s.jsx("button",{onClick:c,disabled:e,className:"w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded font-medium disabled:opacity-50",children:"\uD83D\uDD14 Test API Notifiche Diretto"}),s.jsx("button",{onClick:()=>r([]),className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded disabled:opacity-50",children:"\uD83D\uDDD1️ Pulisci Risultati"}),e&&s.jsx("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 p-4",children:s.jsx("p",{className:"text-yellow-700",children:"⏳ Test in corso..."})})]})]}),(0,s.jsxs)("div",{className:"mt-8",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCCA Risultati Test"}),0===t.length&&s.jsx("div",{className:"text-center text-gray-500 py-8 bg-gray-50 rounded-lg",children:"Nessun test eseguito ancora. Clicca sui pulsanti sopra per iniziare."}),s.jsx("div",{className:"space-y-4",children:t.map((e,a)=>(0,s.jsxs)("div",{className:`border-l-4 p-4 rounded ${e.success?"bg-green-100 border-green-500":"bg-red-100 border-red-500"}`,children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("p",{className:`font-medium ${e.success?"text-green-700":"text-red-700"}`,children:e.message}),s.jsx("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleTimeString()})]}),e.data&&(0,s.jsxs)("details",{className:"mt-2",children:[s.jsx("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:"\uD83D\uDCCB Mostra dettagli risposta"}),s.jsx("pre",{className:"mt-2 text-xs bg-gray-100 p-3 rounded overflow-auto max-h-40",children:JSON.stringify(e.data,null,2)})]})]},a))})]})]})})})}},53733:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n,metadata:()=>r,viewport:()=>o});var s=t(72051);t(5023);let i="Verifiche Condominiali",r={title:i,description:"App PWA per gestione verifiche condominiali",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:i},formatDetection:{telephone:!1},icons:{icon:"/icon-192.png",apple:"/apple-icon.png"}},o={themeColor:"#3b82f6"};function n({children:e}){return s.jsx("html",{lang:"it",children:s.jsx("body",{className:"min-h-screen bg-gray-50",children:e})})}},27590:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(45347).createProxy)(String.raw`/Users/akirayouky/Desktop/Siti/Condomini/src/app/test-lavorazioni-notifiche/page.tsx#default`)},5023:()=>{}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[9379,3039],()=>t(41479));module.exports=s})();