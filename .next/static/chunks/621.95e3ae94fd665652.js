"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{1621:function(e,r,s){s.r(r),s.d(r,{default:function(){return c}});var t=s(7437),a=s(2265),n=s(791);function c(e){let{onScan:r,onError:s,onClose:c}=e,[l,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(null),u=(0,a.useRef)(null),x="qr-reader";(0,a.useEffect)(()=>(h(),()=>{m()}),[]);let h=async()=>{try{d(null),i(!0);let e=new n.t2(x);u.current=e,await e.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},e=>{console.log("\uD83D\uDCF7 QR Code scansionato:",e),r(e),m()},e=>{}),console.log("✅ Scanner QR attivato")}catch(r){let e=r instanceof Error?r.message:"Impossibile accedere alla fotocamera";console.error("❌ Errore avvio scanner:",r),d(e),i(!1),s&&s(e)}},m=async()=>{if(u.current)try{await u.current.stop(),u.current.clear(),console.log("\uD83D\uDED1 Scanner QR fermato")}catch(e){console.error("Errore stop scanner:",e)}i(!1)},b=async()=>{await m(),c()};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full",children:[(0,t.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"\uD83D\uDCF7 Scansiona QR Code"}),(0,t.jsx)("button",{onClick:b,className:"text-gray-500 hover:text-gray-700","aria-label":"Chiudi scanner",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"p-4",children:o?(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[(0,t.jsx)("p",{className:"text-red-700 mb-3",children:o}),(0,t.jsx)("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Riprova"})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{id:x,className:"rounded-lg overflow-hidden"}),l&&(0,t.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-600",children:[(0,t.jsx)("p",{className:"mb-2",children:"\uD83D\uDCF1 Inquadra il QR code del condominio"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Assicurati che ci sia abbastanza luce"})]})]})})]})})}}}]);