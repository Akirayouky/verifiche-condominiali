(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3210:function(e,t,s){Promise.resolve().then(s.bind(s,735))},735:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var i=s(7437),a=s(2265);let l="/api";class n{static async getAll(){try{let e=await fetch("".concat(l,"/condomini"));return await e.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async getById(e){try{let t=await fetch("".concat(l,"/condomini/").concat(e));return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async create(e){try{let t=await fetch("".concat(l,"/condomini"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async update(e,t){try{let s=await fetch("".concat(l,"/condomini/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await s.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async delete(e){try{let t=await fetch("".concat(l,"/condomini/").concat(e),{method:"DELETE"});return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static validateCondominio(e){let t=[];return e.nome&&""!==e.nome.trim()||t.push("Il nome del condominio \xe8 obbligatorio"),e.nome&&e.nome.length<2&&t.push("Il nome deve essere di almeno 2 caratteri"),e.nome&&e.nome.length>100&&t.push("Il nome non pu\xf2 superare i 100 caratteri"),t}}function r(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[l,r]=(0,a.useState)(null),o=async()=>{i(!0),r(null);let e=await n.getAll();e.success&&e.data?t(e.data):r(e.error||"Errore nel caricamento dei condomini"),i(!1)},c=async e=>{let s=n.validateCondominio(e);if(s.length>0)return r(s.join(", ")),!1;let i=await n.create(e);return i.success&&i.data?(t(e=>[...e,i.data]),r(null),!0):(r(i.error||"Errore nella creazione del condominio"),!1)},d=async(e,s)=>{let i=n.validateCondominio(s);if(i.length>0)return r(i.join(", ")),!1;let a=await n.update(e,s);return a.success&&a.data?(t(t=>t.map(t=>t.id===e?a.data:t)),r(null),!0):(r(a.error||"Errore nell'aggiornamento del condominio"),!1)},m=async e=>{let s=await n.delete(e);return s.success?(t(t=>t.filter(t=>t.id!==e)),r(null),!0):(r(s.error||"Errore nell'eliminazione del condominio"),!1)};return(0,a.useEffect)(()=>{o()},[]),{condomini:e,loading:s,error:l,loadCondomini:o,createCondominio:c,updateCondominio:d,deleteCondominio:m,getCondominio:t=>e.find(e=>e.id===t||e.token===t),clearError:()=>r(null)}}function o(e){let{onSubmit:t,onCancel:s,loading:l=!1,initialData:n,isEdit:r=!1}=e,[o,c]=(0,a.useState)({nome:(null==n?void 0:n.nome)||""}),[d,m]=(0,a.useState)([]),x=async e=>{e.preventDefault(),m([]);let s=[];if(o.nome.trim()?o.nome.length<2?s.push("Il nome deve essere di almeno 2 caratteri"):o.nome.length>100&&s.push("Il nome non pu\xf2 superare i 100 caratteri"):s.push("Il nome del condominio \xe8 obbligatorio"),s.length>0){m(s);return}await t(o)&&!r&&c({nome:""})};return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:r?"Modifica Condominio":"Nuovo Condominio"}),s&&(0,i.jsx)("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]}),d.length>0&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,i.jsx)("div",{className:"text-red-600 text-sm",children:d.map((e,t)=>(0,i.jsxs)("div",{children:["• ",e]},t))})}),(0,i.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Condominio *"}),(0,i.jsx)("input",{type:"text",id:"nome",name:"nome",value:o.nome,onChange:e=>{let{name:t,value:s}=e.target;c(e=>({...e,[t]:s})),d.length>0&&m([])},placeholder:"Es: Condominio Via Roma 123",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:l,maxLength:100}),(0,i.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[o.nome.length,"/100 caratteri"]})]}),(0,i.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,i.jsx)("button",{type:"submit",disabled:l||!o.nome.trim(),className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:l?(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),r?"Aggiornamento...":"Creazione..."]}):r?"Aggiorna Condominio":"Crea Condominio"}),s&&(0,i.jsx)("button",{type:"button",onClick:s,disabled:l,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Annulla"})]})]})]})}function c(e){let{condomini:t,loading:s=!1,onEdit:l,onDelete:n,onView:r}=e,[o,c]=(0,a.useState)(null),[d,m]=(0,a.useState)(null),x=async e=>{c(e);let t=await n(e);c(null),t&&m(null)},u=e=>new Date(e).toLocaleString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),h=async e=>{try{await navigator.clipboard.writeText(e)}catch(e){console.error("Errore nel copiare il token:",e)}};return s?(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"}),(0,i.jsx)("span",{className:"ml-3 text-gray-600",children:"Caricamento condomini..."})]})}):0===t.length?(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83C\uDFE2"}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun condominio trovato"}),(0,i.jsx)("p",{className:"text-gray-500",children:"Inizia creando il tuo primo condominio"})]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[(0,i.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Condomini (",t.length,")"]})}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome Condominio"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Creazione"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ultima Modifica"}),(0,i.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Azioni"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-blue-600 font-medium text-sm",children:e.nome.charAt(0).toUpperCase()})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.nome}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u(e.data_inserimento)}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u(e.data_ultima_modifica)}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,i.jsxs)("div",{className:"flex justify-end gap-2",children:[r&&(0,i.jsx)("button",{onClick:()=>r(e),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Visualizza dettagli",children:"\uD83D\uDC41️"}),(0,i.jsx)("button",{onClick:()=>h(e.token),className:"text-green-600 hover:text-green-900 transition-colors",title:"Copia Token",children:"\uD83D\uDD11"}),(0,i.jsx)("button",{onClick:()=>l(e),className:"text-indigo-600 hover:text-indigo-900 transition-colors",title:"Modifica",children:"✏️"}),(0,i.jsx)("button",{onClick:()=>m(e.id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Elimina",children:"\uD83D\uDDD1️"})]})})]},e.id))})]})})]}),d&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 mx-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Conferma eliminazione"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Sei sicuro di voler eliminare questo condominio? Questa azione non pu\xf2 essere annullata."}),(0,i.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,i.jsx)("button",{onClick:()=>m(null),disabled:o===d,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Annulla"}),(0,i.jsx)("button",{onClick:()=>x(d),disabled:o===d,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors disabled:bg-red-300 disabled:cursor-not-allowed",children:o===d?(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Eliminazione..."]}):"Elimina"})]})]})})]})}function d(){let{condomini:e,loading:t,error:s,createCondominio:l,updateCondominio:n,deleteCondominio:d,clearError:m}=r(),[x,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[p,b]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(j){let e=setTimeout(()=>v(null),5e3);return()=>clearTimeout(e)}},[j]),(0,a.useEffect)(()=>{if(s){let e=setTimeout(()=>m(),8e3);return()=>clearTimeout(e)}},[s,m]);let f=async e=>{b(!0);let t=await l(e);return b(!1),t&&(u(!1),v("Condominio creato con successo!")),t},N=async e=>{if(!h)return!1;b(!0);let t=await n(h.id,e);return b(!1),t&&(g(null),v("Condominio aggiornato con successo!")),t},y=async e=>{let t=await d(e);return t&&v("Condominio eliminato con successo!"),t},w={totale:e.length,recenti:e.filter(e=>{let t=new Date(e.data_inserimento),s=new Date;return s.setDate(s.getDate()-7),t>=s}).length};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"Gestione Condomini"}),(0,i.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestisci l'anagrafica dei condomini e i relativi token di accesso"})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsxs)("div",{className:"bg-blue-50 px-4 py-3 rounded-lg text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:w.totale}),(0,i.jsx)("div",{className:"text-sm text-blue-800",children:"Totale"})]}),(0,i.jsxs)("div",{className:"bg-green-50 px-4 py-3 rounded-lg text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-600",children:w.recenti}),(0,i.jsx)("div",{className:"text-sm text-green-800",children:"Ultimi 7gg"})]})]})]}),s&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-red-400 mr-3",children:"❌"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-red-800 font-medium",children:"Errore"}),(0,i.jsx)("p",{className:"text-red-700 text-sm mt-1",children:s})]}),(0,i.jsx)("button",{onClick:m,className:"ml-auto text-red-400 hover:text-red-600",children:"✕"})]})}),j&&(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-green-400 mr-3",children:"✅"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-green-800 font-medium",children:"Successo"}),(0,i.jsx)("p",{className:"text-green-700 text-sm mt-1",children:j})]}),(0,i.jsx)("button",{onClick:()=>v(null),className:"ml-auto text-green-400 hover:text-green-600",children:"✕"})]})}),(0,i.jsx)("div",{className:"flex justify-between items-center",children:(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsxs)("button",{onClick:()=>{u(!0),g(null)},className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[(0,i.jsx)("span",{children:"➕"}),"Nuovo Condominio"]}),(0,i.jsxs)("button",{onClick:()=>window.location.reload(),className:"bg-gray-100 text-gray-600 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[(0,i.jsx)("span",{children:"\uD83D\uDD04"}),"Ricarica"]})]})}),x&&(0,i.jsx)(o,{onSubmit:f,onCancel:()=>u(!1),loading:p}),h&&(0,i.jsx)(o,{onSubmit:N,onCancel:()=>{g(null)},loading:p,initialData:{nome:h.nome},isEdit:!0}),(0,i.jsx)(c,{condomini:e,loading:t,onEdit:e=>{g(e),u(!1)},onDelete:y})]})}class m{static async getAll(){try{let e=await fetch(this.API_BASE);return await e.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async getById(e){try{let t=await fetch("".concat(this.API_BASE,"/").concat(e));return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async create(e){try{let t=await fetch(this.API_BASE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async update(e,t){try{let s=await fetch("".concat(this.API_BASE,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await s.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static async delete(e){try{let t=await fetch("".concat(this.API_BASE,"/").concat(e),{method:"DELETE"});return await t.json()}catch(e){return{success:!1,error:"Errore di connessione"}}}static validate(e){let t=[];return e.nome&&""!==e.nome.trim()||t.push("Il nome della tipologia \xe8 obbligatorio"),e.nome&&e.nome.length<2&&t.push("Il nome deve essere di almeno 2 caratteri"),t}}function x(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[l,n]=(0,a.useState)(null),r=async()=>{i(!0),n(null);let e=await m.getAll();e.success&&e.data?t(e.data):n(e.error||"Errore nel caricamento delle tipologie"),i(!1)},o=async e=>{let s=m.validate(e);if(s.length>0)return n(s.join(", ")),!1;let i=await m.create(e);return i.success&&i.data?(t(e=>[...e,i.data]),n(null),!0):(n(i.error||"Errore nella creazione della tipologia"),!1)},c=async(e,s)=>{let i=m.validate(s);if(i.length>0)return n(i.join(", ")),!1;let a=await m.update(e,s);return a.success&&a.data?(t(t=>t.map(t=>t.id===e?a.data:t)),n(null),!0):(n(a.error||"Errore nell'aggiornamento della tipologia"),!1)},d=async e=>{let s=await m.delete(e);return s.success?(t(t=>t.filter(t=>t.id!==e)),n(null),!0):(n(s.error||"Errore nell'eliminazione della tipologia"),!1)};return(0,a.useEffect)(()=>{r()},[]),{tipologie:e,loading:s,error:l,loadTipologie:r,createTipologia:o,updateTipologia:c,deleteTipologia:d,getTipologia:t=>e.find(e=>e.id===t),getTipologieAttive:()=>e.filter(e=>e.attiva),clearError:()=>n(null)}}function u(e){let{onSubmit:t,onCancel:s,loading:l=!1,initialData:n,isEdit:r=!1}=e,[o,c]=(0,a.useState)({nome:(null==n?void 0:n.nome)||"",descrizione:(null==n?void 0:n.descrizione)||"",campi_personalizzati:(null==n?void 0:n.campi_personalizzati)||[]}),[d,m]=(0,a.useState)([]),x=[{value:"testo",label:"Testo"},{value:"numero",label:"Numero"},{value:"data",label:"Data"},{value:"checkbox",label:"Checkbox"},{value:"select",label:"Lista selezione"},{value:"textarea",label:"Testo lungo"}],u=async e=>{e.preventDefault(),m([]);let s=[];if(o.nome.trim()||s.push("Il nome della tipologia \xe8 obbligatorio"),s.length>0){m(s);return}await t(o)&&!r&&c({nome:"",descrizione:"",campi_personalizzati:[]})},h=e=>{let{name:t,value:s}=e.target;c(e=>({...e,[t]:s})),d.length>0&&m([])},g=e=>{c(t=>({...t,campi_personalizzati:t.campi_personalizzati.filter((t,s)=>s!==e)}))},p=(e,t)=>{c(s=>({...s,campi_personalizzati:s.campi_personalizzati.map((s,i)=>i===e?{...s,...t}:s)}))};return(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:r?"Modifica Tipologia":"Nuova Tipologia"}),s&&(0,i.jsx)("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]}),d.length>0&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,i.jsx)("div",{className:"text-red-600 text-sm",children:d.map((e,t)=>(0,i.jsxs)("div",{children:["• ",e]},t))})}),(0,i.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Tipologia *"}),(0,i.jsx)("input",{type:"text",name:"nome",value:o.nome,onChange:h,placeholder:"Es: Verifica Antincendio",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:l})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrizione"}),(0,i.jsx)("textarea",{name:"descrizione",value:o.descrizione,onChange:h,placeholder:"Descrivi brevemente questa tipologia di verifica...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:l})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("h4",{className:"text-md font-medium text-gray-800",children:"Campi Personalizzati"}),(0,i.jsx)("button",{type:"button",onClick:()=>{let e={nome:"",tipo:"testo",obbligatorio:!1};c(t=>({...t,campi_personalizzati:[...t.campi_personalizzati,e]}))},disabled:l,className:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600 transition-colors",children:"+ Aggiungi Campo"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[o.campi_personalizzati.map((e,t)=>{var s;return(0,i.jsxs)("div",{className:"border border-gray-200 p-4 rounded-md",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,i.jsxs)("h5",{className:"font-medium text-gray-700",children:["Campo #",t+1]}),(0,i.jsx)("button",{type:"button",onClick:()=>g(t),className:"text-red-500 hover:text-red-700",children:"\uD83D\uDDD1️"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Nome Campo"}),(0,i.jsx)("input",{type:"text",value:e.nome,onChange:e=>p(t,{nome:e.target.value}),placeholder:"Es: Numero estintori",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Tipo"}),(0,i.jsx)("select",{value:e.tipo,onChange:e=>p(t,{tipo:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded text-sm",children:x.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Placeholder"}),(0,i.jsx)("input",{type:"text",value:e.placeholder||"",onChange:e=>p(t,{placeholder:e.target.value}),placeholder:"Testo di aiuto...",className:"w-full px-3 py-2 border border-gray-300 rounded text-sm"})]}),(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsxs)("label",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",checked:e.obbligatorio,onChange:e=>p(t,{obbligatorio:e.target.checked}),className:"mr-2"}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Campo obbligatorio"})]})}),"select"===e.tipo&&(0,i.jsxs)("div",{className:"md:col-span-2",children:[(0,i.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Opzioni (una per riga)"}),(0,i.jsx)("textarea",{value:(null===(s=e.opzioni)||void 0===s?void 0:s.join("\n"))||"",onChange:e=>p(t,{opzioni:e.target.value.split("\n").filter(e=>""!==e.trim())}),placeholder:"Opzione 1\\nOpzione 2\\nOpzione 3",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded text-sm"})]})]})]},t)}),0===o.campi_personalizzati.length&&(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,i.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCDD"}),(0,i.jsx)("p",{children:"Nessun campo personalizzato configurato"}),(0,i.jsxs)("p",{className:"text-sm",children:["                ",(0,i.jsx)("p",{children:'Clicca su "Aggiungi Campo" per iniziare'})]})]})]})]}),(0,i.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,i.jsx)("button",{type:"submit",disabled:l||!o.nome.trim(),className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:l?(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),r?"Aggiornamento...":"Creazione..."]}):r?"Aggiorna Tipologia":"Crea Tipologia"}),s&&(0,i.jsx)("button",{type:"button",onClick:s,disabled:l,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Annulla"})]})]})]})}function h(e){let{tipologie:t,loading:s=!1,onEdit:l,onDelete:n,onToggleActive:r}=e,[o,c]=(0,a.useState)(null),[d,m]=(0,a.useState)(null),x=async e=>{c(e);let t=await n(e);c(null),t&&m(null)},u=e=>new Date(e).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"});return s?(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"}),(0,i.jsx)("span",{className:"ml-3 text-gray-600",children:"Caricamento tipologie..."})]})}):0===t.length?(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCCB"}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessuna tipologia trovata"}),(0,i.jsx)("p",{className:"text-gray-500",children:"Inizia creando la tua prima tipologia di verifica"})]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[(0,i.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Tipologie Verifiche (",t.length,")"]})}),(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipologia"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campi Configurati"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stato"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Creazione"}),(0,i.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Azioni"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,i.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-purple-600 font-medium",children:e.nome.charAt(0).toUpperCase()})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.nome}),(0,i.jsx)("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:e.descrizione||"Nessuna descrizione"})]})]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.campi_personalizzati.length}),(0,i.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"campi"}),e.campi_personalizzati.some(e=>e.obbligatorio)&&(0,i.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-600 px-2 py-1 rounded",children:"obbligatori"})]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.attiva?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.attiva?"✓ Attiva":"○ Disattiva"})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u(e.data_creazione)}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,i.jsxs)("div",{className:"flex justify-end gap-2",children:[r&&(0,i.jsx)("button",{onClick:()=>r(e.id,!e.attiva),className:"text-sm px-2 py-1 rounded transition-colors ".concat(e.attiva?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900"),title:e.attiva?"Disattiva":"Attiva",children:e.attiva?"⏸️":"▶️"}),(0,i.jsx)("button",{onClick:()=>l(e),className:"text-indigo-600 hover:text-indigo-900 transition-colors",title:"Modifica",children:"✏️"}),(0,i.jsx)("button",{onClick:()=>m(e.id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Elimina",children:"\uD83D\uDDD1️"})]})})]},e.id))})]})})]}),d&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 mx-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Conferma eliminazione"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Sei sicuro di voler eliminare questa tipologia? Questa azione non pu\xf2 essere annullata."}),(0,i.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,i.jsx)("button",{onClick:()=>m(null),disabled:o===d,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Annulla"}),(0,i.jsx)("button",{onClick:()=>x(d),disabled:o===d,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors disabled:bg-red-300 disabled:cursor-not-allowed",children:o===d?(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Eliminazione..."]}):"Elimina"})]})]})})]})}function g(){let{tipologie:e,loading:t,error:s,createTipologia:l,updateTipologia:n,deleteTipologia:r,clearError:o}=x(),[c,d]=(0,a.useState)(!1),[m,g]=(0,a.useState)(null),[p,b]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(j){let e=setTimeout(()=>v(null),5e3);return()=>clearTimeout(e)}},[j]),(0,a.useEffect)(()=>{if(s){let e=setTimeout(()=>o(),8e3);return()=>clearTimeout(e)}},[s,o]);let f=async e=>{b(!0);let t=await l(e);return b(!1),t&&(d(!1),v("Tipologia creata con successo!")),t},N=async e=>{if(!m)return!1;let t={...e,attiva:m.attiva};b(!0);let s=await n(m.id,t);return b(!1),s&&(g(null),v("Tipologia aggiornata con successo!")),s},y=async e=>{let t=await r(e);return t&&v("Tipologia eliminata con successo!"),t},w=async(t,s)=>{let i=e.find(e=>e.id===t);if(!i)return!1;let a={nome:i.nome,descrizione:i.descrizione,campi_personalizzati:i.campi_personalizzati,attiva:s},l=await n(t,a);return l&&v("Tipologia ".concat(s?"attivata":"disattivata"," con successo!")),l},C={totale:e.length,attive:e.filter(e=>e.attiva).length,conCampi:e.filter(e=>e.campi_personalizzati.length>0).length};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"Tipologie Verifiche"}),(0,i.jsx)("p",{className:"text-gray-600 mt-1",children:"Configura le diverse tipologie di verifiche e i relativi campi personalizzati"})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsxs)("div",{className:"bg-purple-50 px-4 py-3 rounded-lg text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:C.totale}),(0,i.jsx)("div",{className:"text-sm text-purple-800",children:"Totale"})]}),(0,i.jsxs)("div",{className:"bg-green-50 px-4 py-3 rounded-lg text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-600",children:C.attive}),(0,i.jsx)("div",{className:"text-sm text-green-800",children:"Attive"})]}),(0,i.jsxs)("div",{className:"bg-blue-50 px-4 py-3 rounded-lg text-center",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:C.conCampi}),(0,i.jsx)("div",{className:"text-sm text-blue-800",children:"Con Campi"})]})]})]}),s&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-red-400 mr-3",children:"❌"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-red-800 font-medium",children:"Errore"}),(0,i.jsx)("p",{className:"text-red-700 text-sm mt-1",children:s})]}),(0,i.jsx)("button",{onClick:o,className:"ml-auto text-red-400 hover:text-red-600",children:"✕"})]})}),j&&(0,i.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-green-400 mr-3",children:"✅"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{className:"text-green-800 font-medium",children:"Successo"}),(0,i.jsx)("p",{className:"text-green-700 text-sm mt-1",children:j})]}),(0,i.jsx)("button",{onClick:()=>v(null),className:"ml-auto text-green-400 hover:text-green-600",children:"✕"})]})}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsxs)("button",{onClick:()=>{d(!0),g(null)},className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center gap-2",children:[(0,i.jsx)("span",{children:"➕"}),"Nuova Tipologia"]}),(0,i.jsxs)("button",{onClick:()=>window.location.reload(),className:"bg-gray-100 text-gray-600 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[(0,i.jsx)("span",{children:"\uD83D\uDD04"}),"Ricarica"]})]}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"\uD83D\uDCA1 Le tipologie disattive non appariranno nel wizard verifiche"})]}),c&&(0,i.jsx)(u,{onSubmit:f,onCancel:()=>d(!1),loading:p}),m&&(0,i.jsx)(u,{onSubmit:N,onCancel:()=>{g(null)},loading:p,initialData:{nome:m.nome,descrizione:m.descrizione,campi_personalizzati:m.campi_personalizzati,attiva:m.attiva},isEdit:!0}),(0,i.jsx)(h,{tipologie:e,loading:t,onEdit:e=>{g(e),d(!1)},onDelete:y,onToggleActive:w})]})}function p(e){let{selectedCondominio:t,selectedTipologia:s,onCondominioChange:a,onTipologiaChange:l,onNext:n,canProceed:o}=e,{condomini:c,loading:d}=r(),{tipologie:m,loading:u}=x(),h=m.filter(e=>e.attiva);return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Step 1: Selezione Condominio e Tipologia"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Seleziona il condominio da verificare e il tipo di verifica da eseguire"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Seleziona Condominio *"}),d?(0,i.jsx)("div",{className:"animate-pulse",children:(0,i.jsx)("div",{className:"h-12 bg-gray-200 rounded-md"})}):c.length>0?(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("select",{value:(null==t?void 0:t.id)||"",onChange:e=>{let t=c.find(t=>t.id===e.target.value);t&&a(t)},title:"Seleziona un condominio",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 appearance-none cursor-pointer",children:[(0,i.jsx)("option",{value:"",disabled:!0,children:"\uD83C\uDFE2 Seleziona un condominio..."}),c.map(e=>(0,i.jsx)("option",{value:e.id,children:e.nome},e.id))]}),t&&(0,i.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4",children:(0,i.jsx)("span",{className:"text-blue-600 font-bold text-lg",children:t.nome.charAt(0).toUpperCase()})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h4",{className:"font-semibold text-blue-900",children:t.nome}),(0,i.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:["Aggiunto il ",new Date(t.data_inserimento).toLocaleDateString("it-IT")]})]}),(0,i.jsx)("div",{className:"text-blue-500 text-2xl",children:"✓"})]})})]}):null,!d&&0===c.length&&(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,i.jsx)("div",{className:"text-4xl mb-2",children:"\uD83C\uDFE2"}),(0,i.jsx)("p",{children:"Nessun condominio disponibile"}),(0,i.jsx)("p",{className:"text-sm",children:"Aggiungi prima un condominio nella sezione apposita"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Seleziona Tipologia Verifica *"}),u?(0,i.jsx)("div",{className:"animate-pulse",children:(0,i.jsx)("div",{className:"h-10 bg-gray-200 rounded-md"})}):(0,i.jsx)("div",{className:"grid grid-cols-1 gap-3",children:h.map(e=>(0,i.jsx)("button",{onClick:()=>l(e),className:"p-4 border-2 rounded-lg text-left transition-all ".concat((null==s?void 0:s.id)===e.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300"),children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3 mt-1",children:(0,i.jsx)("span",{className:"text-green-600 font-medium",children:e.nome.charAt(0).toUpperCase()})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:e.nome}),(0,i.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:e.descrizione}),(0,i.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:[e.campi_personalizzati.length," campi configurati"]})]})]}),(null==s?void 0:s.id)===e.id&&(0,i.jsx)("div",{className:"text-green-500 text-xl",children:"✓"})]})},e.id))}),!u&&0===h.length&&(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,i.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCB"}),(0,i.jsx)("p",{children:"Nessuna tipologia di verifica attiva"}),(0,i.jsx)("p",{className:"text-sm",children:"Configura prima le tipologie nella sezione apposita"})]})]}),t&&s&&(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,i.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Riepilogo Selezioni:"}),(0,i.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Condominio:"})," ",t.nome]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Tipologia:"})," ",s.nome]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Campi da compilare:"})," ",s.campi_personalizzati.length]})]})]}),(0,i.jsx)("div",{className:"flex justify-end pt-4",children:(0,i.jsxs)("button",{onClick:n,disabled:!o,className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2",children:["Continua",(0,i.jsx)("span",{children:"→"})]})})]})}function b(e){let{tipologia:t,datiVerifica:s,onDatiChange:l,onNext:n,onPrevious:r,canProceed:o}=e,[c,d]=(0,a.useState)({}),m=(e,t)=>{if(l({...s,[e.nome]:t}),c[e.nome]){let t={...c};delete t[e.nome],d(t)}},x=()=>{let e={};return t.campi_personalizzati.forEach(t=>{if(t.obbligatorio){let i=s[t.nome];i&&("string"!=typeof i||""!==i.trim())||(e[t.nome]="Questo campo \xe8 obbligatorio")}}),d(e),0===Object.keys(e).length},u=e=>{let t=s[e.nome]||"",a=c[e.nome];switch(e.tipo){case"testo":return(0,i.jsx)("input",{type:"text",value:t,onChange:t=>m(e,t.target.value),placeholder:e.placeholder,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(a?"border-red-500":"border-gray-300")});case"numero":return(0,i.jsx)("input",{type:"number",value:t,onChange:t=>m(e,parseFloat(t.target.value)||""),placeholder:e.placeholder,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(a?"border-red-500":"border-gray-300")});case"data":return(0,i.jsx)("input",{type:"date",value:t,onChange:t=>m(e,t.target.value),title:e.nome,placeholder:e.placeholder,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(a?"border-red-500":"border-gray-300")});case"checkbox":return(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",checked:!0===t,onChange:t=>m(e,t.target.checked),title:e.nome,placeholder:e.placeholder,className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,i.jsx)("span",{className:"text-sm text-gray-700",children:e.placeholder||"Seleziona se applicabile"})]});case"select":var l;return(0,i.jsxs)("select",{value:t,onChange:t=>m(e,t.target.value),title:e.nome,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(a?"border-red-500":"border-gray-300"),children:[(0,i.jsx)("option",{value:"",children:"Seleziona..."}),null===(l=e.opzioni)||void 0===l?void 0:l.map((e,t)=>(0,i.jsx)("option",{value:e,children:e},t))]});case"textarea":return(0,i.jsx)("textarea",{value:t,onChange:t=>m(e,t.target.value),placeholder:e.placeholder,rows:4,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(a?"border-red-500":"border-gray-300")});default:return null}};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Step 2: Compilazione Dati Verifica"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-4",children:["Compila i campi richiesti per la verifica: ",(0,i.jsx)("strong",{children:t.nome})]}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"Campi obbligatori contrassegnati con *"})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[t.campi_personalizzati.map(e=>(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.nome,e.obbligatorio&&(0,i.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),u(e),c[e.nome]&&(0,i.jsx)("div",{className:"text-red-500 text-sm mt-1",children:c[e.nome]})]},e.id)),0===t.campi_personalizzati.length&&(0,i.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,i.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCDD"}),(0,i.jsx)("p",{children:"Nessun campo configurato per questa tipologia"}),(0,i.jsx)("p",{className:"text-sm",children:"Puoi procedere direttamente al passo successivo"})]})]}),(0,i.jsxs)("div",{className:"flex justify-between pt-6",children:[(0,i.jsxs)("button",{onClick:r,className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors flex items-center gap-2",children:[(0,i.jsx)("span",{children:"←"}),"Indietro"]}),(0,i.jsxs)("button",{onClick:()=>{x()&&n()},disabled:!o,className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2",children:["Continua",(0,i.jsx)("span",{children:"→"})]})]})]})}function j(e){let{condominio:t,tipologia:s,datiVerifica:a,note:l,onNoteChange:n,onComplete:r,onPrevious:o,loading:c=!1}=e;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Step 3: Riepilogo e Completamento"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Verifica i dati inseriti e completa la verifica"})]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-800 mb-4",children:"Riepilogo Verifica"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Informazioni Generali"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Condominio:"})," ",t.nome]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Tipologia:"})," ",s.nome]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Data:"})," ",new Date().toLocaleDateString("it-IT")]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h5",{className:"font-medium text-gray-700 mb-2",children:"Dati Raccolti"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[Object.entries(a).map(e=>{let[t,s]=e;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("strong",{children:[t,":"]})," ","boolean"==typeof s?s?"S\xec":"No":String(s)]},t)}),0===Object.keys(a).length&&(0,i.jsx)("div",{className:"text-gray-500 italic",children:"Nessun dato raccolto"})]})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Note Aggiuntive"}),(0,i.jsx)("textarea",{value:l,onChange:e=>n(e.target.value),placeholder:"Inserisci eventuali note, osservazioni o commenti sulla verifica...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:c})]}),(0,i.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,i.jsx)("h5",{className:"font-medium text-blue-800 mb-2",children:"Opzioni di Completamento"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm text-blue-700",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"mr-2",children:"\uD83D\uDCE7"}),"Email di notifica sar\xe0 inviata automaticamente"]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"mr-2",children:"\uD83D\uDCBE"}),"I dati verranno salvati nel sistema"]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"mr-2",children:"\uD83D\uDCCB"}),"La verifica sar\xe0 disponibile nel pannello amministratore"]})]})]}),(0,i.jsxs)("div",{className:"flex justify-between pt-6",children:[(0,i.jsxs)("button",{onClick:o,disabled:c,className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50 flex items-center gap-2",children:[(0,i.jsx)("span",{children:"←"}),"Indietro"]}),(0,i.jsx)("button",{onClick:r,disabled:c,className:"bg-green-500 text-white px-8 py-3 rounded-lg hover:bg-green-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center gap-2",children:c?(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Completamento..."]}):(0,i.jsx)(i.Fragment,{children:"✓ Completa Verifica"})})]})]})}function v(){let[e,t]=(0,a.useState)(1),[s,l]=(0,a.useState)(null),[n,r]=(0,a.useState)(null),[o,c]=(0,a.useState)({}),[d,m]=(0,a.useState)(""),[x,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),v=()=>{t(e=>e-1)},f=async()=>{if(s&&n){u(!0);try{let e={condominio_id:s.id,tipologia_id:n.id,dati_verifica:o,note:d},i=await fetch("/api/verifiche",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await i.json();a.success?(g(!0),setTimeout(()=>{t(1),l(null),r(null),c({}),m(""),g(!1)},3e3)):alert("Errore nel completamento della verifica: "+a.error)}catch(e){alert("Errore di connessione")}u(!1)}},N=!!(s&&n),y=!n||n.campi_personalizzati.filter(e=>e.obbligatorio).every(e=>o[e.nome]&&""!==o[e.nome]);return h?(0,i.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-green-500 text-6xl mb-4",children:"✅"}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Verifica Completata con Successo!"}),(0,i.jsxs)("div",{className:"space-y-2 text-gray-600 mb-6",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Condominio:"})," ",null==s?void 0:s.nome]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Tipologia:"})," ",null==n?void 0:n.nome]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Data:"})," ",new Date().toLocaleDateString("it-IT")]})]}),(0,i.jsx)("div",{className:"bg-green-50 p-4 rounded-lg mb-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-center text-green-700",children:[(0,i.jsx)("span",{className:"mr-2",children:"\uD83D\uDCE7"}),"Email di notifica inviata con successo"]})}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Reindirizzamento automatico in corso..."})]})})}):(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Wizard Verifiche"}),(0,i.jsx)("div",{className:"flex items-center justify-between mb-6",children:[1,2,3].map(t=>(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium ".concat(t<e?"bg-green-500 text-white":t===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"),children:t<e?"✓":t}),t<3&&(0,i.jsx)("div",{className:"w-16 md:w-32 h-1 mx-2 ".concat(t<e?"bg-green-500":"bg-gray-200")})]},t))}),(0,i.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,i.jsx)("span",{className:1===e?"font-medium text-blue-600":"",children:"Selezione"}),(0,i.jsx)("span",{className:2===e?"font-medium text-blue-600":"",children:"Compilazione"}),(0,i.jsx)("span",{className:3===e?"font-medium text-blue-600":"",children:"Riepilogo"})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[1===e&&(0,i.jsx)(p,{selectedCondominio:s,selectedTipologia:n,onCondominioChange:l,onTipologiaChange:r,onNext:()=>{s&&n&&t(2)},canProceed:N}),2===e&&n&&(0,i.jsx)(b,{tipologia:n,datiVerifica:o,onDatiChange:c,onNext:()=>{t(3)},onPrevious:v,canProceed:y}),3===e&&s&&n&&(0,i.jsx)(j,{condominio:s,tipologia:n,datiVerifica:o,note:d,onNoteChange:m,onComplete:f,onPrevious:v,loading:x})]}),(0,i.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,i.jsxs)("button",{onClick:()=>{t(1),l(null),r(null),c({}),m(""),g(!1)},className:"text-gray-600 hover:text-gray-800 text-sm flex items-center gap-1",children:[(0,i.jsx)("span",{children:"\uD83D\uDD04"}),"Ricomincia"]}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:"\uD83D\uDCA1 I dati vengono salvati automaticamente ad ogni passaggio"})]})]})}function f(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[n,r]=(0,a.useState)(null),[o,c]=(0,a.useState)("tutte"),[d,m]=(0,a.useState)(null),[x,u]=(0,a.useState)(!1),[h,g]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),j=(0,a.useCallback)(async()=>{l(!0);try{let e="tutte"!==o?"/api/lavorazioni?stato=".concat(o):"/api/lavorazioni",s=await fetch(e),i=await s.json();i.success?t(i.data):r(i.error)}catch(e){r("Errore nel caricamento delle lavorazioni")}l(!1)},[o]);(0,a.useEffect)(()=>{j()},[j]);let v=async(e,t,s)=>{try{let i=await fetch("/api/lavorazioni/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({azione:t,nota:s})}),a=await i.json();a.success?(j(),u(!1),g(""),m(null)):r(a.error)}catch(e){r("Errore nell'esecuzione dell'azione")}},f=(e,t)=>{m(e),b(t),u(!0)},N=e=>new Date(e).toLocaleString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),y=e=>{switch(e){case"aperta":return"bg-yellow-100 text-yellow-800";case"chiusa":return"bg-green-100 text-green-800";case"riaperta":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},w=e=>{switch(e){case"aperta":return"\uD83D\uDCC2";case"chiusa":return"✅";case"riaperta":return"\uD83D\uDD04";default:return"❓"}},C={totali:e.length,aperte:e.filter(e=>"aperta"===e.stato).length,chiuse:e.filter(e=>"chiusa"===e.stato).length,riaperte:e.filter(e=>"riaperta"===e.stato).length};return s?(0,i.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,i.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full"}),(0,i.jsx)("span",{className:"ml-3 text-gray-600",children:"Caricamento lavorazioni..."})]}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Pannello Amministratore"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Gestisci lavorazioni, riapri verifiche chiuse e aggiungi note"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,i.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:C.totali}),(0,i.jsx)("div",{className:"text-blue-800 text-sm",children:"Totali"})]}),(0,i.jsx)("div",{className:"text-blue-400 text-2xl",children:"\uD83D\uDCCA"})]})}),(0,i.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:C.aperte}),(0,i.jsx)("div",{className:"text-yellow-800 text-sm",children:"Aperte"})]}),(0,i.jsx)("div",{className:"text-yellow-400 text-2xl",children:"\uD83D\uDCC2"})]})}),(0,i.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-600",children:C.chiuse}),(0,i.jsx)("div",{className:"text-green-800 text-sm",children:"Chiuse"})]}),(0,i.jsx)("div",{className:"text-green-400 text-2xl",children:"✅"})]})}),(0,i.jsx)("div",{className:"bg-orange-50 p-4 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:C.riaperte}),(0,i.jsx)("div",{className:"text-orange-800 text-sm",children:"Riaperte"})]}),(0,i.jsx)("div",{className:"text-orange-400 text-2xl",children:"\uD83D\uDD04"})]})})]}),(0,i.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Filtra per stato:"}),(0,i.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Filtra lavorazioni per stato",children:[(0,i.jsx)("option",{value:"tutte",children:"Tutte le lavorazioni"}),(0,i.jsx)("option",{value:"aperta",children:"Solo aperte"}),(0,i.jsx)("option",{value:"chiusa",children:"Solo chiuse"}),(0,i.jsx)("option",{value:"riaperta",children:"Solo riaperte"})]}),(0,i.jsxs)("button",{onClick:j,className:"bg-gray-100 text-gray-600 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[(0,i.jsx)("span",{children:"\uD83D\uDD04"}),"Ricarica"]})]}),n&&(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"text-red-600",children:["❌ ",n]})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm border",children:0===e.length?(0,i.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,i.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCB"}),(0,i.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Nessuna lavorazione trovata"}),(0,i.jsx)("p",{children:"Non ci sono lavorazioni che corrispondono ai filtri selezionati"})]}):(0,i.jsx)("div",{className:"divide-y divide-gray-200",children:e.map(e=>(0,i.jsx)("div",{className:"p-6",children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,i.jsx)("span",{className:"text-2xl",children:w(e.stato)}),(0,i.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(y(e.stato)),children:e.stato.toUpperCase()}),(0,i.jsxs)("span",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e.descrizione}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 space-y-1 mb-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Aperta:"})," ",N(e.data_apertura)]}),e.data_chiusura&&(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Chiusa:"})," ",N(e.data_chiusura)]}),e.data_riapertura&&(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Riaperta:"})," ",N(e.data_riapertura)]})]}),e.note.length>0&&(0,i.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md",children:[(0,i.jsxs)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:["Note (",e.note.length,"):"]}),(0,i.jsx)("div",{className:"space-y-2",children:e.note.map((e,t)=>(0,i.jsxs)("div",{className:"text-sm text-gray-600 flex items-start",children:[(0,i.jsx)("span",{className:"text-blue-500 mr-2",children:"•"}),e]},t))})]})]}),(0,i.jsxs)("div",{className:"ml-4 flex flex-col gap-2",children:[(0,i.jsx)("button",{onClick:()=>f(e,"aggiungi_nota"),className:"text-blue-600 hover:text-blue-800 text-sm px-3 py-1 border border-blue-200 rounded",children:"\uD83D\uDCDD Aggiungi Nota"}),"aperta"===e.stato&&(0,i.jsx)("button",{onClick:()=>f(e,"chiudi"),className:"text-green-600 hover:text-green-800 text-sm px-3 py-1 border border-green-200 rounded",children:"✅ Chiudi"}),"chiusa"===e.stato&&(0,i.jsx)("button",{onClick:()=>f(e,"riapri"),className:"text-orange-600 hover:text-orange-800 text-sm px-3 py-1 border border-orange-200 rounded",children:"\uD83D\uDD04 Riapri"})]})]})},e.id))})}),x&&d&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 mx-4",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["chiudi"===p&&"Chiudi Lavorazione","riapri"===p&&"Riapri Lavorazione","aggiungi_nota"===p&&"Aggiungi Nota"]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:[(0,i.jsx)("strong",{children:"Lavorazione:"})," ",d.descrizione]}),(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"aggiungi_nota"===p?"Nuova nota:":"Nota (opzionale):"}),(0,i.jsx)("textarea",{value:h,onChange:e=>g(e.target.value),placeholder:"Inserisci una nota...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,i.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,i.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Annulla"}),(0,i.jsx)("button",{onClick:()=>{d&&v(d.id,p,h)},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Conferma"})]})]})})]})}function N(e){let{onNavigate:t}=e,{condomini:s,loading:a}=r(),l={condomininiAttivi:s.length,verificheCompletate:85,inCorso:7,scadute:3},n=s.filter(e=>{let t=new Date(e.data_inserimento),s=new Date;return s.setDate(s.getDate()-7),t>=s}).length;return(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Dashboard"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,i.jsx)("div",{className:"bg-blue-50 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"Condomini Attivi"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:a?"...":l.condomininiAttivi})]}),(0,i.jsx)("div",{className:"text-blue-400 text-3xl",children:"\uD83C\uDFE2"})]})}),(0,i.jsx)("div",{className:"bg-green-50 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-green-800",children:"Verifiche Completate"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-green-600 mt-2",children:l.verificheCompletate})]}),(0,i.jsx)("div",{className:"text-green-400 text-3xl",children:"✅"})]})}),(0,i.jsx)("div",{className:"bg-yellow-50 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-yellow-800",children:"In Corso"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-yellow-600 mt-2",children:l.inCorso})]}),(0,i.jsx)("div",{className:"text-yellow-400 text-3xl",children:"⏳"})]})}),(0,i.jsx)("div",{className:"bg-red-50 p-6 rounded-lg",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-red-800",children:"Scadute"}),(0,i.jsx)("p",{className:"text-3xl font-bold text-red-600 mt-2",children:l.scadute})]}),(0,i.jsx)("div",{className:"text-red-400 text-3xl",children:"⚠️"})]})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Condomini Recenti",(0,i.jsx)("span",{className:"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:n})]}),a?(0,i.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]}):s.length>0?(0,i.jsx)("div",{className:"space-y-3",children:s.slice(-5).reverse().map(e=>(0,i.jsxs)("div",{className:"flex items-center py-2 border-b border-gray-100 last:border-0",children:[(0,i.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:(0,i.jsx)("span",{className:"text-blue-600 font-medium text-sm",children:e.nome.charAt(0).toUpperCase()})}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:e.nome}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:["Aggiunto il ",new Date(e.data_inserimento).toLocaleDateString("it-IT")]})]})]},e.id))}):(0,i.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Nessun condominio presente"})]}),(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Azioni Rapide"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("button",{onClick:()=>null==t?void 0:t("condomini"),className:"w-full text-left p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-2xl mr-3",children:"\uD83C\uDFE2"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:"Nuovo Condominio"}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Aggiungi un nuovo condominio al sistema"})]})]})}),(0,i.jsx)("button",{onClick:()=>null==t?void 0:t("verifiche"),className:"w-full text-left p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-green-500",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-2xl mr-3",children:"✅"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:"Nuova Verifica"}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Avvia il wizard per una nuova verifica"})]})]})}),(0,i.jsx)("button",{onClick:()=>null==t?void 0:t("tipologie"),className:"w-full text-left p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-2xl mr-3",children:"\uD83D\uDCCB"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:"Tipologie Verifiche"}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Gestisci le tipologie di verifica"})]})]})}),(0,i.jsx)("button",{onClick:()=>null==t?void 0:t("admin"),className:"w-full text-left p-4 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-2xl mr-3",children:"⚙️"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:"Pannello Admin"}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Gestisci lavorazioni e riapri verifiche"})]})]})})]})]})]})]})}function y(){let[e,t]=(0,a.useState)("dashboard");return(0,i.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,i.jsxs)("nav",{className:"w-64 bg-white shadow-lg",children:[(0,i.jsx)("div",{className:"p-6",children:(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Verifiche Condominiali"})}),(0,i.jsx)("ul",{className:"mt-6",children:[{id:"dashboard",name:"Dashboard",icon:"\uD83C\uDFE0"},{id:"condomini",name:"Condomini",icon:"\uD83C\uDFE2"},{id:"tipologie",name:"Tipologie",icon:"\uD83D\uDCCB"},{id:"verifiche",name:"Verifiche",icon:"✅"},{id:"admin",name:"Admin",icon:"⚙️"}].map(s=>(0,i.jsx)("li",{children:(0,i.jsxs)("button",{onClick:()=>t(s.id),className:"w-full flex items-center px-6 py-3 text-left hover:bg-blue-50 transition-colors ".concat(e===s.id?"bg-blue-100 border-r-4 border-blue-500 text-blue-700":"text-gray-600"),children:[(0,i.jsx)("span",{className:"text-2xl mr-3",children:s.icon}),s.name]})},s.id))})]}),(0,i.jsx)("main",{className:"flex-1 p-8",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:["dashboard"===e&&(0,i.jsx)(N,{onNavigate:t}),"condomini"===e&&(0,i.jsx)(d,{}),"tipologie"===e&&(0,i.jsx)(g,{}),"verifiche"===e&&(0,i.jsx)(v,{}),"admin"===e&&(0,i.jsx)(f,{})]})})]})}m.API_BASE="/api/tipologie"}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3210)}),_N_E=e.O()}]);